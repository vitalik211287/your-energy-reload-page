import{a as Ve,i as H}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const Ke={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},L={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},B={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},Ze={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},q={EMAIL_REGEX:Ze.EMAIL,RATING_MIN:1,RATING_MAX:5},T={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},D={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},Ie={RATING:"rating",EXERCISE:"exercise"},b={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${q.RATING_MIN} and ${q.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},N={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class P{constructor(t=Ke.BASE_API_URL){this.baseURL=t,this.axios=Ve.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var o,n;const s=((n=(o=r.response)==null?void 0:o.data)==null?void 0:n.message)||r.message||b.API_ERROR;return console.error("API Error:",s),Promise.reject(r)})}async _request(t,r,s=null,o=null){var n,i;try{const c={method:t,url:r};return s&&(c.data=s),o&&(c.params=o),(await this.axios(c)).data}catch(c){const a=((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||c.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${a}`)}}async getFilters(t={}){return this._request("get",B.FILTERS,null,t)}async getExercises(t={}){return this._request("get",B.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(b.EXERCISE_ID_REQUIRED);return this._request("get",`${B.EXERCISES}/${t}`)}async getQuote(){return this._request("get",B.QUOTE)}async subscribe(t){if(!t.email||!q.EMAIL_REGEX.test(t.email))throw new Error(b.EMAIL_REQUIRED);return this._request("post",B.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(b.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<q.RATING_MIN||r.rate>q.RATING_MAX)throw new Error(b.RATING_RANGE);if(!r.email||!q.EMAIL_REGEX.test(r.email))throw new Error(b.EMAIL_REQUIRED);return this._request("patch",`${B.EXERCISES}/${t}/rating`,r)}}const Oe={position:T.POSITION.TOP_RIGHT,timeout:T.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:L.GRAY_LIGHT,transitionIn:T.TRANSITION.IN,transitionOut:T.TRANSITION.OUT,fontFamily:"inherit",icon:""},et=e=>{H.show({...Oe,title:T.TITLE.SUCCESS,message:e,backgroundColor:L.BLACK,titleColor:L.WHITE,messageColor:L.WHITE,icon:T.ICON.SUCCESS,iconColor:L.WHITE})},v=e=>{H.show({...Oe,title:T.TITLE.ERROR,message:e,backgroundColor:L.BLACK,titleColor:L.WHITE,messageColor:L.GRAY_LIGHT,progressBarColor:L.WHITE,icon:T.ICON.ERROR,iconColor:L.WHITE})},tt=new P,X={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function rt(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:s}=JSON.parse(e),o=new Date(s),n=new Date;if(o.getDate()===n.getDate()){Ne(t,r);return}}ot()}rt();async function ot(){try{const e=await tt.getQuote(),{quote:t,author:r}=e,s={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(s)),Ne(t,r)}catch(e){v(e.message||b.API_ERROR)}}function Ne(e,t){X.content&&(X.content.textContent=e),X.author&&(X.author.textContent=t)}function be(e){if(!e||!e.results)return;const t={"@context":D.SCHEMA_CONTEXT,"@type":D.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,s)=>({"@type":D.SCHEMA_TYPES.LIST_ITEM,position:s+1,item:{"@type":D.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};st("filters",t)}function st(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=D.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function nt({container:e,currentPage:t,totalPages:r,onPageChange:s,mode:o="full",showArrows:n=!1,classes:i={},icons:c={},scrollToTop:a=!0,scrollTarget:d=null}){if(!e)return;e.innerHTML="";const{page:E="",active:m="active",arrow:S=""}=i,I=(l,u,y="")=>{const _=document.createElement("button");return _.className=y,_.textContent=l,_.dataset.page=u,_};if(o==="full")for(let l=1;l<=r;l++){const u=I(l,l,E);l===t&&u.classList.add(m),e.appendChild(u)}else if(o==="neighbors"){let l=[];r<=3?l=Array.from({length:r},(u,y)=>y+1):t===1?l=[1,2,3]:t===r?l=[r-2,r-1,r]:l=[t-1,t,t+1],l.forEach(u=>{const y=I(u,u,`${E} ${u===t?m:""}`.trim());e.appendChild(y)})}e.querySelectorAll("button").forEach(l=>{l.addEventListener("click",()=>{const u=Number(l.dataset.page);if(!(Number.isNaN(u)||u===t)&&(s(u),a))if(d){const y=typeof d=="string"?document.querySelector(d):d;y&&y.scrollIntoView({behavior:"smooth",block:"start"})}else window.scrollTo({top:0,behavior:"smooth"})})})}const w={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function it(){w.loaderOverlay&&w.loaderOverlay.classList.remove("hidden"),w.loaderBg&&w.loaderBg.classList.add("bg-loader")}function Pe(){w.loaderOverlay&&w.loaderOverlay.classList.add("hidden"),w.loaderBg&&w.loaderBg.classList.remove("bg-loader")}const Fe=new P;console.dir(Fe);function at(){return window.innerWidth<768?8:10}let k={type:"body-parts",filter:"waist",keyword:""},xe=1,Ce=1,j=0,oe="";R({page:1});async function R({page:e=1,type:t,filter:r,keyword:s}={}){const o=document.querySelector(".js-exercises-list");if(!o)return;const n=at();t!==void 0&&(k.type=t),r!==void 0&&(k.filter=r),s!==void 0&&(k.keyword=s);const i=k.type,c=k.filter,a=k.keyword||"",d=ct({page:e,limit:n,type:i,filter:c,keyword:a});console.log("ACTIVE TYPE:",i),console.log("FILTER VALUE:",c),console.log("EXERCISES PARAMS:",d);const E=++j;it();try{const m=await Fe.getExercises(d);if(console.log(m),E!==j)return;const S=m.results||[];if(xe=m.page||e,Ce=m.totalPages||1,De(o,S),dt(xe,Ce),S.length)oe="";else{const l=`${i}:${c}:${a||""}`;l!==oe&&(oe=l,(a||t!==void 0||r!==void 0)&&H.warning({title:"No results",message:a?`Nothing found for “${a}”. Try another search.`:"No exercises found for this category.",position:"topRight"}))}if(t!==void 0||r!==void 0||s!==void 0){const l=new URL(window.location.href);l.searchParams.set("type",i),l.searchParams.set("filter",c),a?l.searchParams.set("keyword",a):l.searchParams.delete("keyword"),window.history.pushState({},"",l)}}catch(m){if(console.error("Failed to load exercises:",m),E!==j)return;typeof v=="function"?v(m.message||"Failed to load exercises. Try again later."):H.error({title:"Error",message:m.message||"Failed to load exercises. Try again later.",position:"topRight"}),o.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}finally{E===j&&Pe()}}function ct({page:e,limit:t,type:r,filter:s,keyword:o}){const n={page:e,limit:t};switch(o&&(n.keyword=o),r){case"body-parts":n.bodypart=s;break;case"muscles":n.muscles=s;break;case"equipment":n.equipment=s;break;default:n.bodypart=s}return n}function De(e,t,r=!1){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const s=t.map(o=>lt(o,r)).join("");e.innerHTML=s}function lt(e,t=!1){const{name:r,burnedCalories:s,bodyPart:o,target:n,rating:i,_id:c}=e,a=t?`<button type="button" class="favorites-delete-btn" data-id="${c}">
         <svg class="favorites-icon-trash" width="16" height="16" aria-label="Remove from favorites">
            <use href="/img/trash.svg"></use> 
         </svg>
       </button>`:`<div class="exercises__rating">
         <span class="exercises__meta-key">${i}</span>
         <span class="exercises__meta-value">
           <svg class="star" width="18" height="18">
             <use href="./src/img/sprite.svg#icon-star"></use>
           </svg>
         </span>
       </div>`;return`
    <li class="exercises__item" data-exercise-id="${c}">
      <div class="exercises__item-top">
        <div class="exercises__item-info">
          <span class="exercises__badge">Workout</span>
          
          ${a} 
          
        </div>

        <button
          type="button"
          class="exercises__start-btn js-open-exercise"
          data-exercise-id="${c}"
        >
          Start
          <svg class="arrow__icon" width="16" height="16">
             <use href="./src/img/sprite.svg#icon-arrow"></use>
          </svg>
        </button>
      </div>

      <div class="exercises__name-container">
        <svg class="exercises__icon" width="24" height="24">
           <use href="./src/img/sprite.svg#icon-running-man"></use>
        </svg>
        <h3 class="exercises__name">${r}</h3>
      </div>

        <div class="exercises__item-bottom">
          <p class="exercises__meta">
            <span class="exercises__meta-label">Burned calories:</span>
            <span class="exercises__meta-value">${s} / ${time}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Body part:</span>
            <span class="exercises__meta-value">${o}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Target:</span>
            <span class="exercises__meta-value">${n}</span>
          </p>
        </div>
      </li>
  `}function dt(e,t){const r=document.querySelector(".js-exercises-pagination");r&&nt({container:r,currentPage:e,totalPages:t,mode:"neighbors",classes:{page:"exercises__page",active:"active"},scrollToTop:!0,scrollTarget:".exercises",onPageChange(s){return R({page:s})}})}const O=document.querySelector("[data-filters-tabs]"),$=document.querySelector(".filters__search"),J=document.querySelector(".filters__subtitle"),ut=()=>window.matchMedia("(min-width: 1440px)").matches;function $e(e,t=""){if(!$||!J)return;const r=ut();e==="bodypart"?(J.textContent=` / ${t||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),$.classList.add("filters__search--visible")):(J.textContent="",$.classList.remove("filters__search--visible"))}function He(e,t=""){if(!O)return;const r=O.querySelector(`[data-filter="${e}"]`);if(!r)return;const s=document.getElementById("cards-box"),o=document.getElementById("exercises");if(e==="muscles"||e==="equipment"){s.classList.remove("hidden"),o.classList.add("hidden");const n=document.querySelector(".filters__subtitle");n.textContent="";const i=new URL(window.location.href);i.searchParams.delete("filter"),window.history.pushState({},"",i)}else if(e==="bodypart"){s.classList.add("hidden"),o.classList.remove("hidden");const n=new URL(window.location.href);n.searchParams.set("type","body-parts"),t?n.searchParams.set("filter",t.toLowerCase()):(n.searchParams.delete("filter"),R({page:1}))}O.querySelectorAll(".filters__tab").forEach(n=>{const i=n===r;n.classList.toggle("filters__tab--active",i),n.setAttribute("aria-selected",i?"true":"false")}),$e(e,t)}if(O&&$&&J){O.addEventListener("click",t=>{const r=t.target.closest(".filters__tab");r&&He(r.dataset.filter)});const e=O.querySelector(".filters__tab--active");e&&$e(e.dataset.filter)}const F=document.querySelector(".filters__input"),Q=document.querySelector(".filters__clear-btn");if(F&&Q){const e=()=>{F.value.trim()?Q.classList.add("filters__clear-btn--visible"):Q.classList.remove("filters__clear-btn--visible")};F.addEventListener("input",e),Q.addEventListener("click",()=>{F.value="",F.focus(),e()}),e()}function mt(e){return function(t){t.preventDefault();const r={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},s=r[e.filter]||r["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),He("bodypart",e.name),R({page:1,filter:e.name.toLowerCase(),type:s});const i=new URL(window.location.href);i.searchParams.set("type",s),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const ft=new P,le=window.innerWidth<768?9:12;let V="Muscles",U=1;async function Ue(e=V,t=1,r=le){V=e,U=t;try{const s={filter:e,page:t,limit:r},o=await ft.getFilters(s);if(!o){v("Failed to fetch categories: No response from server"),Y(),W();return}if(o.error||o.status==="error"){v(o.message||"Failed to fetch categories"),Y(),W();return}if(!o.results||o.results.length===0){v("Nothing found"),Y(),W();return}pt(o.results||[]),gt(U,o.totalPages||1),typeof be=="function"&&be(o)}catch(s){console.error("getCategories error:",s),v((s==null?void 0:s.message)||"Something went wrong"),Y(),W()}}function pt(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(r=>{const s=document.createElement("div");s.className="card";const o=r.imgURL&&r.imgURL.trim()!==""?r.imgURL:"/img/no-image.jpg",n=r.name||"",i=r.filter||"";s.innerHTML=`
      <img src="${o}" alt="${n}" loading="lazy" />
      <div class="card-body">
        <h3>${n}</h3>
        <span>${i}</span>
      </div>
    `,s.addEventListener("click",mt(r)),t.appendChild(s),s.querySelector(".card-body").addEventListener("click",()=>{Et(n)})}))}function gt(e,t){const r=document.getElementById("pagination");if(r){r.innerHTML="";for(let s=1;s<=t;s++){const o=s,n=document.createElement("button");n.textContent=o,n.className="pagination-page",n.setAttribute("data-page",o),o===e&&n.classList.add("active"),n.addEventListener("click",()=>{o!==U&&(U=o,Ue(V,o,le),window.scrollTo({top:0,behavior:"smooth"}))}),r.appendChild(n)}}}function Y(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function W(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function Et(e){console.log("Clicked name:",e)}Ue(V,U,le);(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=N;if(!t||!e||!r)return;const s=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",s),r.addEventListener("click",s),window.matchMedia("(min-width: 768px)").addEventListener("change",o=>{o.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const de=document.querySelector(".footer__form"),Te=de.querySelector(".footer__input"),h=de.querySelector(".footer__message");de.addEventListener("submit",async e=>{e.preventDefault();const t=Te.value.trim();if(!t||!q.EMAIL_REGEX.test(t)){h.textContent=b.EMAIL_REQUIRED,h.classList.remove("footer__message--success"),h.classList.add("footer__message--error");return}try{const r=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(r.ok)h.textContent="Subscription successful!",h.classList.remove("footer__message--error"),h.classList.add("footer__message--success"),Te.value="";else{const s=await r.json();h.textContent=s.message||"Subscription failed.",h.classList.remove("footer__message--success"),h.classList.add("footer__message--error")}}catch{h.textContent="Network error. Try again later.",h.classList.remove("footer__message--success"),h.classList.add("footer__message--error")}});const z=document.querySelector(".scroll-up-btn");if(z){let e=function(t=1e3){const r=window.scrollY,s=performance.now();function o(n){const i=n-s,c=Math.min(i/t,1),a=1-Math.pow(1-c,3);window.scrollTo(0,r*(1-a)),c<1&&requestAnimationFrame(o)}requestAnimationFrame(o)};window.addEventListener("scroll",()=>{window.scrollY>300?z.classList.add("show"):z.classList.remove("show")}),z.addEventListener("click",t=>{t.preventDefault(),e()})}const Ge="favorites";function ee(){const e=localStorage.getItem(Ge);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(s=>s.id||s._id).filter(Boolean);return ue(r),r}return t}function ue(e){localStorage.setItem(Ge,JSON.stringify(e))}function we(e){return ee().includes(e)}function yt(e){const t=ee(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),ue(t))}function Xe(e){const r=ee().filter(s=>s!==e);ue(r)}const _t={};function ht(e,t=null){const r=t||N.favoriteBtn;if(!r)return;Object.assign(_t,e);const s=e.id||e._id,o=we(s);se(r,o);const n=r.cloneNode(!0);r.parentNode.replaceChild(n,r),n.onclick=()=>{const i=e.id||e._id;we(i)?(Xe(i),se(n,!1)):(yt(e),se(n,!0))}}function se(e,t){const r=Array.from(e.childNodes).filter(s=>s.nodeType===Node.TEXT_NODE&&s.textContent.trim());if(r.length>0)r[0].textContent=t?"Remove from favorites":"Add to favorites";else{const s=e.querySelector("svg"),o=document.createTextNode(t?"Remove from favorites":"Add to favorites");s?e.insertBefore(o,s):e.appendChild(o)}}const vt=new P;function St(){N.favoritesList.innerHTML=`
    <div class="favorites-empty">
      <p>It appears that you haven’t added any exercises to your favorites yet.</p>
      <p>To get started, add exercises that you like to your favorites for easier access.</p>
    </div>`}async function Lt(e){try{const t=await vt.getExerciseById(e);if(t)return t}catch(t){console.error(`Failed to load exercise ${id}`,t)}}async function It(e){const t=[];if(Array.isArray(e)&&e.length>0)try{const r=e.map(o=>Lt(o.trim()));(await Promise.all(r)).forEach(o=>{o&&t.push(o)})}catch(r){console.error("Error loading:",r)}De(N.favoritesList,t,!0),N.favoritesList.addEventListener("click",r=>{const s=r.target.closest(".favorites-delete-btn");if(s){const o=s.dataset.id;o&&(Xe(o),me())}})}function me(){const e=ee();N.favoritesList&&(e.length?It(e):St())}me();let p=null,Re=!1;const ae={};function qe(e,t,r){ae[e]={getContent:t,init:r}}function K(){Re||(p={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},Re=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{K()}):K();function je(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!ae[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:s,init:o}=ae[r],n=s();if(!n){console.error(`Failed to get content for modal type "${r}"`);return}bt(n),o&&setTimeout(async()=>{try{await o(te)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function bt(e){var t,r;if(K(),!p||!p.modal||!p.body){console.error("Modal template elements not found");return}if(typeof e=="string")p.body.innerHTML=e;else if(e instanceof HTMLElement)p.body.innerHTML="",p.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}p.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",Qe,{once:!1}),(t=p.backdrop)==null||t.addEventListener("click",Ye),(r=p.closeBtn)==null||r.addEventListener("click",We)}function te(){var t,r;if(K(),!p||!p.modal)return;p.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Qe),(t=p.backdrop)==null||t.removeEventListener("click",Ye),(r=p.closeBtn)==null||r.removeEventListener("click",We),p&&p.body&&(p.body.innerHTML=""),document.querySelector(".favorites-list")&&me()}function fe(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function Qe(e){if(e.key==="Escape"){if(fe())return;te()}}function Ye(e){if(e.target===p.backdrop){if(fe())return;te()}}function We(){fe()||te()}const xt=new P;function Ct(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function Tt(e){var a;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const s=r.querySelector(".exercise-modal__loader");s&&s.classList.remove("hidden");let o=sessionStorage.getItem("exerciseModalExerciseId")||((a=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:a.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("exerciseModalExerciseId"),!o){s&&s.classList.add("hidden"),v("Exercise ID is missing");return}let n;try{n=await xt.getExerciseById(o),n.id=n.id||n._id}catch(d){console.error("Failed to load exercise:",d),s&&s.classList.add("hidden"),v(d.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}wt(r,n),s&&s.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&ht(n,i);const c=r.querySelector(".exercise-modal__btn--rating");c&&!c.hasAttribute("data-modal-initialized")&&je()}function wt(e,t){const r=e.querySelector(".exercise-modal__title"),s=e.querySelector(".exercise-modal__rating-value"),o=e.querySelector(".exercise-modal__stars"),n=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),c=e.querySelector(".exercise-modal__bodypart"),a=e.querySelector(".exercise-modal__equipment"),d=e.querySelector(".exercise-modal__popular"),E=e.querySelector(".exercise-modal__calories"),m=e.querySelector(".exercise-modal__description"),S=e.querySelector(".favorites-btn"),I=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const l=t.rating||0;if(s&&(s.textContent=l.toFixed(1)),o&&(o.innerHTML=Rt(l)),n&&(n.src=t.gifUrl||"",n.alt=t.name||"Exercise GIF"),i&&(i.textContent=ne(t.target||"")),c&&(c.textContent=ne(t.bodyPart||"")),a&&(a.textContent=ne(t.equipment||"")),d){const u=t.popularity||0;u>=1e3?d.textContent=(u/1e3).toFixed(1).replace(/\.0$/,"")+"k":d.textContent=u.toString()}if(E){const u=t.burnedCalories,y=E.closest("p");if(u&&u>0){const _=t.time||3;E.textContent=`${u}/${_} min`,y&&(y.style.display="")}else y&&(y.style.display="none")}m&&(m.textContent=t.description||t.instructions||""),S&&S.setAttribute("data-id",t.id||t._id||""),I&&I.setAttribute("data-exercise-id",t.id||t._id||"")}function Rt(e){const r=Math.round(e),s=5-r;let o="";const n="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)o+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${n}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<s;i++)o+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${n}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return o}function ne(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}let g=null,pe=null,ge=null;function ce(){var t,r,s,o,n,i;if(g)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}g={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=g.backdrop)==null||t.removeEventListener("click",Ae,{capture:!0}),(r=g.cancelBtn)==null||r.removeEventListener("click",Z,{capture:!0}),(s=g.confirmBtn)==null||s.removeEventListener("click",Me,{capture:!0}),(o=g.backdrop)==null||o.addEventListener("click",Ae,{capture:!0}),(n=g.cancelBtn)==null||n.addEventListener("click",Z,{capture:!0}),(i=g.confirmBtn)==null||i.addEventListener("click",Me,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ce):ce();function qt(e){e.key==="Escape"&&g&&!g.modal.classList.contains("hidden")&&Z()}function Ae(e){e.target===g.backdrop&&(e.stopPropagation(),e.preventDefault(),Z(e))}function Z(e){e&&(e.stopPropagation(),e.preventDefault());const t=ge;ze(),t&&t()}function Me(e){e&&(e.stopPropagation(),e.preventDefault());const t=pe;ze(),setTimeout(()=>{t&&t()},0)}function At(e,t,r=null){if(ce(),!g||!g.modal){console.error("Confirm modal elements not found");return}pe=t,ge=r,g.message&&(g.message.textContent=e),g.modal.classList.remove("hidden"),document.addEventListener("keydown",qt,{once:!0})}function ze(){!g||!g.modal||(g.modal.classList.add("hidden"),pe=null,ge=null)}const Mt=new P;let A=null;function Bt(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return kt(t),t}function Be(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Be):Be();function kt(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(s=>{const o=s.id;s.id=`${o}-${r}`,e.querySelectorAll(`label[for="${o}"]`).forEach(i=>{i.setAttribute("for",s.id)})})}function ke(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),s=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),n=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),c=t.querySelectorAll(".rating-star");r&&r.reset(),s&&(s.value="0"),n&&(n.value=""),i&&(i.value=""),o&&(o.textContent=""),c.forEach(a=>{a.classList.remove("active")})}function ie(e){A&&A()?At("Are you sure you want to cancel your exercise review?",()=>{ke(),A=null,e()},()=>{}):(ke(),A=null,e())}function Ot(e){var ve;A=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let s=sessionStorage.getItem("ratingModalExerciseId")||((ve=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:ve.getAttribute("data-exercise-id"));if(s&&sessionStorage.removeItem("ratingModalExerciseId"),!s){v("Exercise ID is missing");return}const o=r.querySelectorAll(".rating-star"),n=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),c=r.querySelector(".rating-modal__btn--cancel"),a=r.querySelector('.rating-modal__btn[type="submit"]'),d=r.querySelector('input[name="email"]'),E=r.querySelector('textarea[name="comment"]'),m=r.querySelector(".rating-modal__form");let S=0;a&&(a.disabled=!0),n&&(n.value="0"),i&&(i.textContent="0");const I=()=>S>0&&S<=5&&(d==null?void 0:d.value.trim())!==""&&(E==null?void 0:E.value.trim())!=="",l=()=>{a&&(a.disabled=!I())};A=()=>S>0||(d==null?void 0:d.value.trim())!==""||(E==null?void 0:E.value.trim())!=="";const y=f=>{o.forEach((x,C)=>{C+1<=f?x.classList.add("active"):x.classList.remove("active")})};o.forEach((f,x)=>{const C=x+1;f.addEventListener("click",()=>{S=C,y(C),n&&(n.value=C),i&&(i.textContent=C),l()})}),[d,E].forEach(f=>{f&&f.addEventListener("input",l)});const _=document.querySelector("[data-modal-close]"),re=()=>{const f=document.getElementById("modal-confirm");return f&&!f.classList.contains("hidden")},Ee=f=>{if(f.key==="Escape"){if(re())return;f.stopPropagation(),ie(()=>{G(),e()})}},ye=f=>{if(f.target===_){if(re())return;f.stopPropagation(),ie(()=>{G(),e()})}},G=()=>{document.removeEventListener("keydown",Ee,{capture:!0}),_==null||_.removeEventListener("click",ye,{capture:!0}),M==null||M.removeEventListener("click",_e,{capture:!0})},M=document.querySelector(".modal-template__close-btn"),_e=f=>{re()||(f.stopPropagation(),he())};document.addEventListener("keydown",Ee,{capture:!0}),_==null||_.addEventListener("click",ye,{capture:!0}),M==null||M.addEventListener("click",_e,{capture:!0});const he=()=>{ie(()=>{G(),e()})};c&&e&&c.addEventListener("click",()=>{he()}),m&&(m.setAttribute("data-no-auto-close","true"),m.addEventListener("submit",async f=>{if(f.preventDefault(),!I()){v("Please fill in all fields");return}const x=new FormData(m),C=parseInt(x.get("rating"),10),Se=x.get("email").trim(),Je=x.get("comment").trim();a&&(a.disabled=!0,a.textContent="Sending...");try{await Mt.rateExercise(s,{rate:C,email:Se,review:Je}),et("Thank you for your feedback!"),A=null,setTimeout(()=>{e&&(G(),e())},1e3)}catch(Le){console.error("Failed to submit rating:",Le),v(Le.message||b.API_ERROR),a&&(a.disabled=!1,a.textContent="Send")}}))}function Nt(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var t,r;(t=document.getElementById("categories-section"))==null||t.classList.add("hidden"),(r=document.getElementById("exercises-section"))==null||r.classList.remove("hidden"),R({page:1})}))}function Pt(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),r=document.querySelector(".filters__clear-btn");if(!e||!t)return;const s=()=>{const o=e.value.trim();if(console.log(o),!o){H.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}R({page:1,keyword:o})};t.addEventListener("click",s),e.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),s())}),r&&r.addEventListener("click",()=>{e.value="",e.focus(),R({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>Pe(),200),Ft()});function Ft(){qe(Ie.RATING,Bt,Ot),qe(Ie.EXERCISE,Ct,Tt),je()}R();Nt();Pt();
//# sourceMappingURL=main-Mn0En1Gq.js.map
