import{a as We,i as F}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const ze={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},L={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},B={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},Je={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},q={EMAIL_REGEX:Je.EMAIL,RATING_MIN:1,RATING_MAX:5},T={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},P={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},ve={RATING:"rating",EXERCISE:"exercise"},b={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${q.RATING_MIN} and ${q.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},Be={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class U{constructor(t=ze.BASE_API_URL){this.baseURL=t,this.axios=We.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var n,s;const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||r.message||b.API_ERROR;return console.error("API Error:",o),Promise.reject(r)})}async _request(t,r,o=null,n=null){var s,i;try{const l={method:t,url:r};return o&&(l.data=o),n&&(l.params=n),(await this.axios(l)).data}catch(l){const a=((i=(s=l.response)==null?void 0:s.data)==null?void 0:i.message)||l.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${a}`)}}async getFilters(t={}){return this._request("get",B.FILTERS,null,t)}async getExercises(t={}){return this._request("get",B.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(b.EXERCISE_ID_REQUIRED);return this._request("get",`${B.EXERCISES}/${t}`)}async getQuote(){return this._request("get",B.QUOTE)}async subscribe(t){if(!t.email||!q.EMAIL_REGEX.test(t.email))throw new Error(b.EMAIL_REQUIRED);return this._request("post",B.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(b.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<q.RATING_MIN||r.rate>q.RATING_MAX)throw new Error(b.RATING_RANGE);if(!r.email||!q.EMAIL_REGEX.test(r.email))throw new Error(b.EMAIL_REQUIRED);return this._request("patch",`${B.EXERCISES}/${t}/rating`,r)}}const Oe={position:T.POSITION.TOP_RIGHT,timeout:T.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:L.GRAY_LIGHT,transitionIn:T.TRANSITION.IN,transitionOut:T.TRANSITION.OUT,fontFamily:"inherit",icon:""},Ve=e=>{F.show({...Oe,title:T.TITLE.SUCCESS,message:e,backgroundColor:L.BLACK,titleColor:L.WHITE,messageColor:L.WHITE,icon:T.ICON.SUCCESS,iconColor:L.WHITE})},S=e=>{F.show({...Oe,title:T.TITLE.ERROR,message:e,backgroundColor:L.BLACK,titleColor:L.WHITE,messageColor:L.GRAY_LIGHT,progressBarColor:L.WHITE,icon:T.ICON.ERROR,iconColor:L.WHITE})},Ke=new U,G={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function Ze(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:o}=JSON.parse(e),n=new Date(o),s=new Date;if(n.getDate()===s.getDate()){ke(t,r);return}}et()}Ze();async function et(){try{const e=await Ke.getQuote(),{quote:t,author:r}=e,o={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(o)),ke(t,r)}catch(e){S(e.message||b.API_ERROR)}}function ke(e,t){G.content&&(G.content.textContent=e),G.author&&(G.author.textContent=t)}function Le(e){if(!e||!e.results)return;const t={"@context":P.SCHEMA_CONTEXT,"@type":P.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,o)=>({"@type":P.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":P.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};tt("filters",t)}function tt(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=P.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function rt({container:e,currentPage:t,totalPages:r,onPageChange:o,mode:n="full",showArrows:s=!1,classes:i={},icons:l={},scrollToTop:a=!0,scrollTarget:d=null}){if(!e)return;e.innerHTML="";const{page:E="",active:m="active",arrow:v=""}=i,I=(c,u,y="")=>{const _=document.createElement("button");return _.className=y,_.textContent=c,_.dataset.page=u,_};if(n==="full")for(let c=1;c<=r;c++){const u=I(c,c,E);c===t&&u.classList.add(m),e.appendChild(u)}else if(n==="neighbors"){let c=[];r<=3?c=Array.from({length:r},(u,y)=>y+1):t===1?c=[1,2,3]:t===r?c=[r-2,r-1,r]:c=[t-1,t,t+1],c.forEach(u=>{const y=I(u,u,`${E} ${u===t?m:""}`.trim());e.appendChild(y)})}e.querySelectorAll("button").forEach(c=>{c.addEventListener("click",()=>{const u=Number(c.dataset.page);if(!(Number.isNaN(u)||u===t)&&(o(u),a))if(d){const y=typeof d=="string"?document.querySelector(d):d;y&&y.scrollIntoView({behavior:"smooth",block:"start"})}else window.scrollTo({top:0,behavior:"smooth"})})})}const w={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function ot(){w.loaderOverlay&&w.loaderOverlay.classList.remove("hidden"),w.loaderBg&&w.loaderBg.classList.add("bg-loader")}function Ne(){w.loaderOverlay&&w.loaderOverlay.classList.add("hidden"),w.loaderBg&&w.loaderBg.classList.remove("bg-loader")}const Pe=new U;console.dir(Pe);function nt(){return window.innerWidth<768?8:10}let O={type:"body-parts",filter:"waist",keyword:""},Ie=1,be=1,X=0,te="";R({page:1});async function R({page:e=1,type:t,filter:r,keyword:o}={}){const n=document.querySelector(".js-exercises-list");if(!n)return;const s=nt();t!==void 0&&(O.type=t),r!==void 0&&(O.filter=r),o!==void 0&&(O.keyword=o);const i=O.type,l=O.filter,a=O.keyword||"",d=st({page:e,limit:s,type:i,filter:l,keyword:a});console.log("ACTIVE TYPE:",i),console.log("FILTER VALUE:",l),console.log("EXERCISES PARAMS:",d);const E=++X;ot();try{const m=await Pe.getExercises(d);if(console.log(m),E!==X)return;const v=m.results||[];if(Ie=m.page||e,be=m.totalPages||1,it(n,v),ct(Ie,be),v.length)te="";else{const c=`${i}:${l}:${a||""}`;c!==te&&(te=c,(a||t!==void 0||r!==void 0)&&F.warning({title:"No results",message:a?`Nothing found for “${a}”. Try another search.`:"No exercises found for this category.",position:"topRight"}))}if(t!==void 0||r!==void 0||o!==void 0){const c=new URL(window.location.href);c.searchParams.set("type",i),c.searchParams.set("filter",l),a?c.searchParams.set("keyword",a):c.searchParams.delete("keyword"),window.history.pushState({},"",c)}}catch(m){if(console.error("Failed to load exercises:",m),E!==X)return;typeof S=="function"?S(m.message||"Failed to load exercises. Try again later."):F.error({title:"Error",message:m.message||"Failed to load exercises. Try again later.",position:"topRight"}),n.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}finally{E===X&&Ne()}}function st({page:e,limit:t,type:r,filter:o,keyword:n}){const s={page:e,limit:t};switch(n&&(s.keyword=n),r){case"body-parts":s.bodypart=o;break;case"muscles":s.muscles=o;break;case"equipment":s.equipment=o;break;default:s.bodypart=o}return s}function it(e,t){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const r=t.map(at).join("");e.innerHTML=r}function at(e){const{name:t,burnedCalories:r,bodyPart:o,target:n,rating:s,time:i}=e;return`
      <li class="exercises__item">
        <div class="exercises__item-top">
          <div class="exercises__item-info">
            <span class="exercises__badge">Workout</span>
            <div class="exercises__rating">
              <span class="exercises__meta-key">${s}</span>
              <span class="exercises__meta-value">
                <svg class="star"></svg>
              </span>
            </div>
          </div>
          <button type="button" class="exercises__start-btn js-exercises-start">
            Start
            <svg class="arrow__icon"></svg>
          </button>
        </div>

        <div class="exercises__name-container">
          <svg class="exercises__icon"></svg>
          <h3 class="exercises__name">${t}</h3>
        </div>

        <div class="exercises__item-bottom">
          <p class="exercises__meta">
            <span class="exercises__meta-label">Burned calories:</span>
            <span class="exercises__meta-value">${r} / ${i}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Body part:</span>
            <span class="exercises__meta-value">${o}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Target:</span>
            <span class="exercises__meta-value">${n}</span>
          </p>
        </div>
      </li>
  `}function ct(e,t){const r=document.querySelector(".js-exercises-pagination");r&&rt({container:r,currentPage:e,totalPages:t,mode:"neighbors",classes:{page:"exercises__page",active:"active"},scrollToTop:!0,scrollTarget:".exercises",onPageChange(o){return R({page:o})}})}const k=document.querySelector("[data-filters-tabs]"),D=document.querySelector(".filters__search"),z=document.querySelector(".filters__subtitle"),lt=()=>window.matchMedia("(min-width: 1440px)").matches;function De(e,t=""){if(!D||!z)return;const r=lt();e==="bodypart"?(z.textContent=` / ${t||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),D.classList.add("filters__search--visible")):(z.textContent="",D.classList.remove("filters__search--visible"))}function Fe(e,t=""){if(!k)return;const r=k.querySelector(`[data-filter="${e}"]`);if(!r)return;const o=document.getElementById("cards-box"),n=document.getElementById("exercises");if(e==="muscles"||e==="equipment"){o.classList.remove("hidden"),n.classList.add("hidden");const s=document.querySelector(".filters__subtitle");s.textContent="";const i=new URL(window.location.href);i.searchParams.delete("filter"),window.history.pushState({},"",i)}else if(e==="bodypart"){o.classList.add("hidden"),n.classList.remove("hidden");const s=new URL(window.location.href);s.searchParams.set("type","body-parts"),t?s.searchParams.set("filter",t.toLowerCase()):(s.searchParams.delete("filter"),R({page:1}))}k.querySelectorAll(".filters__tab").forEach(s=>{const i=s===r;s.classList.toggle("filters__tab--active",i),s.setAttribute("aria-selected",i?"true":"false")}),De(e,t)}if(k&&D&&z){k.addEventListener("click",t=>{const r=t.target.closest(".filters__tab");r&&Fe(r.dataset.filter)});const e=k.querySelector(".filters__tab--active");e&&De(e.dataset.filter)}const N=document.querySelector(".filters__input"),Y=document.querySelector(".filters__clear-btn");if(N&&Y){const e=()=>{N.value.trim()?Y.classList.add("filters__clear-btn--visible"):Y.classList.remove("filters__clear-btn--visible")};N.addEventListener("input",e),Y.addEventListener("click",()=>{N.value="",N.focus(),e()}),e()}function dt(e){return function(t){t.preventDefault();const r={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},o=r[e.filter]||r["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),Fe("bodypart",e.name),R({page:1,filter:e.name.toLowerCase(),type:o});const i=new URL(window.location.href);i.searchParams.set("type",o),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const ut=new U,ae=window.innerWidth<768?9:12;let J="Muscles",H=1;async function He(e=J,t=1,r=ae){J=e,H=t;try{const o={filter:e,page:t,limit:r},n=await ut.getFilters(o);if(!n){S("Failed to fetch categories: No response from server"),j(),Q();return}if(n.error||n.status==="error"){S(n.message||"Failed to fetch categories"),j(),Q();return}if(!n.results||n.results.length===0){S("Nothing found"),j(),Q();return}mt(n.results||[]),ft(H,n.totalPages||1),typeof Le=="function"&&Le(n)}catch(o){console.error("getCategories error:",o),S((o==null?void 0:o.message)||"Something went wrong"),j(),Q()}}function mt(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(r=>{const o=document.createElement("div");o.className="card";const n=r.imgURL&&r.imgURL.trim()!==""?r.imgURL:"/img/no-image.jpg",s=r.name||"",i=r.filter||"";o.innerHTML=`
      <img src="${n}" alt="${s}" loading="lazy" />
      <div class="card-body">
        <h3>${s}</h3>
        <span>${i}</span>
      </div>
    `,o.addEventListener("click",dt(r)),t.appendChild(o),o.querySelector(".card-body").addEventListener("click",()=>{pt(s)})}))}function ft(e,t){const r=document.getElementById("pagination");if(r){r.innerHTML="";for(let o=1;o<=t;o++){const n=o,s=document.createElement("button");s.textContent=n,s.className="pagination-page",s.setAttribute("data-page",n),n===e&&s.classList.add("active"),s.addEventListener("click",()=>{n!==H&&(H=n,He(J,n,ae),window.scrollTo({top:0,behavior:"smooth"}))}),r.appendChild(s)}}}function j(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function Q(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function pt(e){console.log("Clicked name:",e)}He(J,H,ae);(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=Be;if(!t||!e||!r)return;const o=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",o),r.addEventListener("click",o),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const ce=document.querySelector(".footer__form"),Ce=ce.querySelector(".footer__input"),h=ce.querySelector(".footer__message");ce.addEventListener("submit",async e=>{e.preventDefault();const t=Ce.value.trim();if(!t||!q.EMAIL_REGEX.test(t)){h.textContent=b.EMAIL_REQUIRED,h.classList.remove("footer__message--success"),h.classList.add("footer__message--error");return}try{const r=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(r.ok)h.textContent="Subscription successful!",h.classList.remove("footer__message--error"),h.classList.add("footer__message--success"),Ce.value="";else{const o=await r.json();h.textContent=o.message||"Subscription failed.",h.classList.remove("footer__message--success"),h.classList.add("footer__message--error")}}catch{h.textContent="Network error. Try again later.",h.classList.remove("footer__message--success"),h.classList.add("footer__message--error")}});const W=document.querySelector(".scroll-up-btn");if(W){let e=function(t=1e3){const r=window.scrollY,o=performance.now();function n(s){const i=s-o,l=Math.min(i/t,1),a=1-Math.pow(1-l,3);window.scrollTo(0,r*(1-a)),l<1&&requestAnimationFrame(n)}requestAnimationFrame(n)};window.addEventListener("scroll",()=>{window.scrollY>300?W.classList.add("show"):W.classList.remove("show")}),W.addEventListener("click",t=>{t.preventDefault(),e()})}let p=null,xe=!1;const se={};function Te(e,t,r){se[e]={getContent:t,init:r}}function V(){xe||(p={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},xe=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{V()}):V();function Ue(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!se[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:o,init:n}=se[r],s=o();if(!s){console.error(`Failed to get content for modal type "${r}"`);return}gt(s),n&&setTimeout(async()=>{try{await n(Z)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function gt(e){var t,r;if(V(),!p||!p.modal||!p.body){console.error("Modal template elements not found");return}if(typeof e=="string")p.body.innerHTML=e;else if(e instanceof HTMLElement)p.body.innerHTML="",p.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}p.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",$e,{once:!1}),(t=p.backdrop)==null||t.addEventListener("click",Ge),(r=p.closeBtn)==null||r.addEventListener("click",Xe)}function Z(){var e,t;V(),!(!p||!p.modal)&&(p.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",$e),(e=p.backdrop)==null||e.removeEventListener("click",Ge),(t=p.closeBtn)==null||t.removeEventListener("click",Xe),p&&p.body&&(p.body.innerHTML=""))}function le(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function $e(e){if(e.key==="Escape"){if(le())return;Z()}}function Ge(e){if(e.target===p.backdrop){if(le())return;Z()}}function Xe(){le()||Z()}const Ye="favorites";function de(){const e=localStorage.getItem(Ye);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(o=>o.id||o._id).filter(Boolean);return ue(r),r}return t}function ue(e){localStorage.setItem(Ye,JSON.stringify(e))}function we(e){return de().includes(e)}function Et(e){const t=de(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),ue(t))}function yt(e){const r=de().filter(o=>o!==e);ue(r)}const _t={};function ht(e,t=null){const r=t||Be.favoriteBtn;if(!r)return;Object.assign(_t,e);const o=e.id||e._id,n=we(o);re(r,n);const s=r.cloneNode(!0);r.parentNode.replaceChild(s,r),s.onclick=()=>{const i=e.id||e._id;we(i)?(yt(i),re(s,!1)):(Et(e),re(s,!0))}}function re(e,t){const r=Array.from(e.childNodes).filter(o=>o.nodeType===Node.TEXT_NODE&&o.textContent.trim());if(r.length>0)r[0].textContent=t?"Remove from favorites":"Add to favorites";else{const o=e.querySelector("svg"),n=document.createTextNode(t?"Remove from favorites":"Add to favorites");o?e.insertBefore(n,o):e.appendChild(n)}}const St=new U;function vt(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function Lt(e){var a;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const o=r.querySelector(".exercise-modal__loader");o&&o.classList.remove("hidden");let n=sessionStorage.getItem("exerciseModalExerciseId")||((a=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:a.getAttribute("data-exercise-id"));if(n&&sessionStorage.removeItem("exerciseModalExerciseId"),!n){o&&o.classList.add("hidden"),S("Exercise ID is missing");return}let s;try{s=await St.getExerciseById(n),s.id=s.id||s._id}catch(d){console.error("Failed to load exercise:",d),o&&o.classList.add("hidden"),S(d.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}It(r,s),o&&o.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&ht(s,i);const l=r.querySelector(".exercise-modal__btn--rating");l&&!l.hasAttribute("data-modal-initialized")&&Ue()}function It(e,t){const r=e.querySelector(".exercise-modal__title"),o=e.querySelector(".exercise-modal__rating-value"),n=e.querySelector(".exercise-modal__stars"),s=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),l=e.querySelector(".exercise-modal__bodypart"),a=e.querySelector(".exercise-modal__equipment"),d=e.querySelector(".exercise-modal__popular"),E=e.querySelector(".exercise-modal__calories"),m=e.querySelector(".exercise-modal__description"),v=e.querySelector(".favorites-btn"),I=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const c=t.rating||0;if(o&&(o.textContent=c.toFixed(1)),n&&(n.innerHTML=bt(c)),s&&(s.src=t.gifUrl||"",s.alt=t.name||"Exercise GIF"),i&&(i.textContent=oe(t.target||"")),l&&(l.textContent=oe(t.bodyPart||"")),a&&(a.textContent=oe(t.equipment||"")),d){const u=t.popularity||0;u>=1e3?d.textContent=(u/1e3).toFixed(1).replace(/\.0$/,"")+"k":d.textContent=u.toString()}if(E){const u=t.burnedCalories,y=E.closest("p");if(u&&u>0){const _=t.time||3;E.textContent=`${u}/${_} min`,y&&(y.style.display="")}else y&&(y.style.display="none")}m&&(m.textContent=t.description||t.instructions||""),v&&v.setAttribute("data-id",t.id||t._id||""),I&&I.setAttribute("data-exercise-id",t.id||t._id||"")}function bt(e){const r=Math.round(e),o=5-r;let n="";const s="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)n+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<o;i++)n+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return n}function oe(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}let g=null,me=null,fe=null;function ie(){var t,r,o,n,s,i;if(g)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}g={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=g.backdrop)==null||t.removeEventListener("click",Re,{capture:!0}),(r=g.cancelBtn)==null||r.removeEventListener("click",K,{capture:!0}),(o=g.confirmBtn)==null||o.removeEventListener("click",qe,{capture:!0}),(n=g.backdrop)==null||n.addEventListener("click",Re,{capture:!0}),(s=g.cancelBtn)==null||s.addEventListener("click",K,{capture:!0}),(i=g.confirmBtn)==null||i.addEventListener("click",qe,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ie):ie();function Ct(e){e.key==="Escape"&&g&&!g.modal.classList.contains("hidden")&&K()}function Re(e){e.target===g.backdrop&&(e.stopPropagation(),e.preventDefault(),K(e))}function K(e){e&&(e.stopPropagation(),e.preventDefault());const t=fe;je(),t&&t()}function qe(e){e&&(e.stopPropagation(),e.preventDefault());const t=me;je(),setTimeout(()=>{t&&t()},0)}function xt(e,t,r=null){if(ie(),!g||!g.modal){console.error("Confirm modal elements not found");return}me=t,fe=r,g.message&&(g.message.textContent=e),g.modal.classList.remove("hidden"),document.addEventListener("keydown",Ct,{once:!0})}function je(){!g||!g.modal||(g.modal.classList.add("hidden"),me=null,fe=null)}const Tt=new U;let A=null;function wt(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return Rt(t),t}function Ae(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ae):Ae();function Rt(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(o=>{const n=o.id;o.id=`${n}-${r}`,e.querySelectorAll(`label[for="${n}"]`).forEach(i=>{i.setAttribute("for",o.id)})})}function Me(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),o=t.querySelector('input[name="rating"]'),n=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),l=t.querySelectorAll(".rating-star");r&&r.reset(),o&&(o.value="0"),s&&(s.value=""),i&&(i.value=""),n&&(n.textContent=""),l.forEach(a=>{a.classList.remove("active")})}function ne(e){A&&A()?xt("Are you sure you want to cancel your exercise review?",()=>{Me(),A=null,e()},()=>{}):(Me(),A=null,e())}function qt(e){var _e;A=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let o=sessionStorage.getItem("ratingModalExerciseId")||((_e=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:_e.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("ratingModalExerciseId"),!o){S("Exercise ID is missing");return}const n=r.querySelectorAll(".rating-star"),s=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),l=r.querySelector(".rating-modal__btn--cancel"),a=r.querySelector('.rating-modal__btn[type="submit"]'),d=r.querySelector('input[name="email"]'),E=r.querySelector('textarea[name="comment"]'),m=r.querySelector(".rating-modal__form");let v=0;a&&(a.disabled=!0),s&&(s.value="0"),i&&(i.textContent="0");const I=()=>v>0&&v<=5&&(d==null?void 0:d.value.trim())!==""&&(E==null?void 0:E.value.trim())!=="",c=()=>{a&&(a.disabled=!I())};A=()=>v>0||(d==null?void 0:d.value.trim())!==""||(E==null?void 0:E.value.trim())!=="";const y=f=>{n.forEach((C,x)=>{x+1<=f?C.classList.add("active"):C.classList.remove("active")})};n.forEach((f,C)=>{const x=C+1;f.addEventListener("click",()=>{v=x,y(x),s&&(s.value=x),i&&(i.textContent=x),c()})}),[d,E].forEach(f=>{f&&f.addEventListener("input",c)});const _=document.querySelector("[data-modal-close]"),ee=()=>{const f=document.getElementById("modal-confirm");return f&&!f.classList.contains("hidden")},pe=f=>{if(f.key==="Escape"){if(ee())return;f.stopPropagation(),ne(()=>{$(),e()})}},ge=f=>{if(f.target===_){if(ee())return;f.stopPropagation(),ne(()=>{$(),e()})}},$=()=>{document.removeEventListener("keydown",pe,{capture:!0}),_==null||_.removeEventListener("click",ge,{capture:!0}),M==null||M.removeEventListener("click",Ee,{capture:!0})},M=document.querySelector(".modal-template__close-btn"),Ee=f=>{ee()||(f.stopPropagation(),ye())};document.addEventListener("keydown",pe,{capture:!0}),_==null||_.addEventListener("click",ge,{capture:!0}),M==null||M.addEventListener("click",Ee,{capture:!0});const ye=()=>{ne(()=>{$(),e()})};l&&e&&l.addEventListener("click",()=>{ye()}),m&&(m.setAttribute("data-no-auto-close","true"),m.addEventListener("submit",async f=>{if(f.preventDefault(),!I()){S("Please fill in all fields");return}const C=new FormData(m),x=parseInt(C.get("rating"),10),he=C.get("email").trim(),Qe=C.get("comment").trim();a&&(a.disabled=!0,a.textContent="Sending...");try{await Tt.rateExercise(o,{rate:x,email:he,review:Qe}),Ve("Thank you for your feedback!"),A=null,setTimeout(()=>{e&&($(),e())},1e3)}catch(Se){console.error("Failed to submit rating:",Se),S(Se.message||b.API_ERROR),a&&(a.disabled=!1,a.textContent="Send")}}))}function At(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var t,r;(t=document.getElementById("categories-section"))==null||t.classList.add("hidden"),(r=document.getElementById("exercises-section"))==null||r.classList.remove("hidden"),R({page:1})}))}function Mt(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),r=document.querySelector(".filters__clear-btn");if(!e||!t)return;const o=()=>{const n=e.value.trim();if(console.log(n),!n){F.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}R({page:1,keyword:n})};t.addEventListener("click",o),e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),o())}),r&&r.addEventListener("click",()=>{e.value="",e.focus(),R({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>Ne(),200),Bt()});function Bt(){Te(ve.RATING,wt,qt),Te(ve.EXERCISE,vt,Lt),Ue()}R();At();Mt();export{Be as R,U as Y,de as g,R as l,yt as r};
//# sourceMappingURL=main-OIfiZ4RE.js.map
