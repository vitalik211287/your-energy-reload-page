{"version":3,"file":"modal-rating-content-ppjd1kul.js","sources":["../../src/js/config.js","../../src/js/constants.js","../../src/js/api.js","../../src/js/iziToast-helper.js","../../src/js/quote-of-the-day.js","../../src/js/seo-function.js","../../src/js/pagination.js","../../src/js/favorites-btn.js","../../src/js/loader.js","../../src/js/favorites-page.js","../../src/js/modal-template.js","../../src/js/modal-exercise-content.js","../../src/js/exercises-list.js","../../src/js/mobile-menu.js","../../src/js/scroll-up.js","../../src/js/confirm-modal.js","../../src/js/modal-rating-content.js"],"sourcesContent":["export const CONFIG = {\n  BASE_API_URL:\n    import.meta.env.VITE_API_BASE_URL || 'https://your-energy.b.goit.study/api',\n  DEV_HOST: import.meta.env.VITE_DEV_HOST || '127.0.0.1',\n  DEV_PORT: import.meta.env.VITE_DEV_PORT || '3000',\n  BASE_PATH: import.meta.env.VITE_BASE_PATH || '/your-energy/',\n};\n","// Local Storage Keys\nexport const STORAGE_KEYS = {};\n\nexport const COLORS = {\n  WHITE: '#fff',\n  BLACK: '#000',\n  GRAY_LIGHT: '#808080',\n};\n\n// API Endpoints\nexport const API_ENDPOINTS = {\n  FILTERS: '/filters',\n  EXERCISES: '/exercises',\n  QUOTE: '/quote',\n  SUBSCRIPTION: '/subscription',\n};\n\n// ========== REGULAR EXPRESSIONS ==========\nexport const REGEX = {\n  EMAIL: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z]{2,}$/,\n};\n\n// ========== VALIDATION CONSTANTS ==========\nexport const VALIDATION = {\n  EMAIL_REGEX: REGEX.EMAIL,\n  RATING_MIN: 1,\n  RATING_MAX: 5,\n};\n\n// ========== PAGINATION CONSTANTS ==========\nexport const PAGINATION = {\n  DEFAULT_PAGE: 1,\n  DEFAULT_LIMIT: 12,\n  MIN_LIMIT: 1,\n  MAX_LIMIT: 100,\n};\n\n// ========== TOAST NOTIFICATION CONSTANTS ==========\nexport const TOAST = {\n  POSITION: {\n    TOP_RIGHT: 'topRight',\n    TOP_LEFT: 'topLeft',\n    TOP_CENTER: 'topCenter',\n    BOTTOM_RIGHT: 'bottomRight',\n    BOTTOM_LEFT: 'bottomLeft',\n    BOTTOM_CENTER: 'bottomCenter',\n  },\n\n  TIMEOUT: {\n    SHORT: 2000,\n    DEFAULT: 4000,\n    LONG: 6000,\n  },\n\n  TRANSITION: {\n    IN: 'fadeInLeft',\n    OUT: 'fadeOutRight',\n  },\n\n  TITLE: {\n    SUCCESS: 'OK',\n    ERROR: 'Error',\n    INFO: 'Info',\n    WARNING: 'Warning',\n  },\n\n  ICON: {\n    SUCCESS: 'icon-check',\n    ERROR: 'icon-error',\n    INFO: 'icon-info',\n    WARNING: 'icon-warning',\n  },\n};\n\n// ========== SEO CONSTANTS ==========\nexport const SEO = {\n  SCHEMA_CONTEXT: 'https://schema.org',\n  SCHEMA_TYPES: {\n    ITEM_LIST: 'ItemList',\n    LIST_ITEM: 'ListItem',\n    EXERCISE_PLAN: 'ExercisePlan',\n  },\n  JSON_LD_TYPE: 'application/ld+json',\n};\n\n// ========== MODAL TYPES ==========\nexport const MODAL_TYPES = {\n  RATING: 'rating',\n  EXERCISE: 'exercise',\n};\n\n// ========== ERROR MESSAGES ==========\nexport const ERROR_MESSAGES = {\n  API_ERROR: 'Something went wrong',\n  EMAIL_REQUIRED: 'Please enter a valid email.',\n  RATING_RANGE: `Rating must be between ${VALIDATION.RATING_MIN} and ${VALIDATION.RATING_MAX}`,\n  EXERCISE_ID_REQUIRED: 'Exercise ID is required',\n};\n\nexport const REFS = {\n  modalBody: document.querySelector('[data-modal-body]'),\n\n  favoritesBtn: document.querySelector('.favorites-btn'),\n  favoritesList: document.querySelector('.favorites-list'),\n\n  exercisesList: document.querySelector('.js-exercises-list'),\n  exercisesActiveTab: document.querySelector('.exercises__tab--active'),\n  exercisesPagination: document.querySelector('.js-exercises-pagination'),\n\n  modalTemplate: document.getElementById('modal-template'),\n  modalCloseBtn: document.querySelector('.modal-template__close-btn'),\n  modalBackdrop: document.querySelector('.modal-template__backdrop'),\n\n  exerciseModal: document.querySelector('.exercise-modal'), // from modal-exercise.html\n  exerciseTrigger: document.querySelector('[data-modal=\"exercise\"]'),\n\n\n  // Filters\n  filtersTabs: document.querySelector('[data-filters-tabs]'),\n  filtersSearchBox: document.querySelector('.filters__search'),\n  filtersSubtitle: document.querySelector('.filters__subtitle'),\n  filtersInput: document.querySelector('.filters__input'),\n  filtersClearBtn: document.querySelector('.filters__clear-btn'),\n\n  // Mobile menu\n  mobileMenu: document.querySelector('[data-menu]'),\n  mobileMenuOpenBtn: document.querySelector('[data-menu-open]'),\n  mobileMenuCloseBtn: document.querySelector('[data-menu-close]'),\n};\n","import axios from 'axios';\nimport { CONFIG } from './config.js';\nimport { VALIDATION, ERROR_MESSAGES, API_ENDPOINTS } from './constants.js';\n\nexport class YourEnergyAPI {\n  constructor(baseURL = CONFIG.BASE_API_URL) {\n    this.baseURL = baseURL;\n    this.axios = axios.create({\n      baseURL: this.baseURL,\n    });\n\n    // Response interceptor for error handling\n    this.axios.interceptors.response.use(\n      response => response,\n      error => {\n        const errorMessage =\n          error.response?.data?.message ||\n          error.message ||\n          ERROR_MESSAGES.API_ERROR;\n        console.error('API Error:', errorMessage);\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  /**\n   * Generic request handler\n   * @private\n   * @param {string} method - HTTP method\n   * @param {string} url - Endpoint URL\n   * @param {Object|null} data - Request body\n   * @param {Object|null} params - Query parameters\n   * @returns {Promise<Object>}\n   */\n  async _request(method, url, data = null, params = null) {\n    try {\n      const config = { method, url };\n      if (data) config.data = data;\n      if (params) config.params = params;\n\n      const response = await this.axios(config);\n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message;\n      throw new Error(`${method.toUpperCase()} ${url} failed: ${message}`);\n    }\n  }\n\n  /**\n   * Get filters\n   * @param {Object} params - Query parameters (filter, page, limit)\n   * @returns {Promise<Object>}\n   */\n  async getFilters(params = {}) {\n    return this._request('get', API_ENDPOINTS.FILTERS, null, params);\n  }\n\n  /**\n   * Get exercises\n   * @param {Object} params - Query parameters (bodypart, muscles, equipment, keyword, page, limit)\n   * @returns {Promise<Object>}\n   */\n  async getExercises(params = {}) {\n    return this._request('get', API_ENDPOINTS.EXERCISES, null, params);\n  }\n\n  async getExerciseById(id) {\n    if (!id) {\n      throw new Error(ERROR_MESSAGES.EXERCISE_ID_REQUIRED);\n    }\n    return this._request('get', `${API_ENDPOINTS.EXERCISES}/${id}`);\n  }\n\n  /**\n   * Get quote of the day\n   * @returns {Promise<Object>}\n   */\n  async getQuote() {\n    return this._request('get', API_ENDPOINTS.QUOTE);\n  }\n\n  /**\n   * Subscribe to new exercises\n   * @param {Object} data - { email: string }\n   * @returns {Promise<Object>}\n   */\n  async subscribe(data) {\n    if (!data.email || !VALIDATION.EMAIL_REGEX.test(data.email)) {\n      throw new Error(ERROR_MESSAGES.EMAIL_REQUIRED);\n    }\n    return this._request('post', API_ENDPOINTS.SUBSCRIPTION, data);\n  }\n\n  /**\n   * Add rating to exercise\n   * @param {string} id - Exercise ID\n   * @param {Object} data - { rate: number, email: string, review: string }\n   * @returns {Promise<Object>}\n   */\n  async rateExercise(id, data) {\n    if (!id) {\n      throw new Error(ERROR_MESSAGES.EXERCISE_ID_REQUIRED);\n    }\n    if (\n      !data.rate ||\n      data.rate < VALIDATION.RATING_MIN ||\n      data.rate > VALIDATION.RATING_MAX\n    ) {\n      throw new Error(ERROR_MESSAGES.RATING_RANGE);\n    }\n    if (!data.email || !VALIDATION.EMAIL_REGEX.test(data.email)) {\n      throw new Error(ERROR_MESSAGES.EMAIL_REQUIRED);\n    }\n    return this._request(\n      'patch',\n      `${API_ENDPOINTS.EXERCISES}/${id}/rating`,\n      data\n    );\n  }\n}\n","import iziToast from 'izitoast';\nimport { COLORS, TOAST } from './constants.js';\n\n// --- Базова конфігурація ---\nconst defaultOptions = {\n  position: TOAST.POSITION.TOP_RIGHT,\n  timeout: TOAST.TIMEOUT.DEFAULT,\n  close: true,\n  closeOnEscape: true,\n  pauseOnHover: true,\n  progressBar: true,\n  progressBarColor: COLORS.GRAY_LIGHT,\n  transitionIn: TOAST.TRANSITION.IN,\n  transitionOut: TOAST.TRANSITION.OUT,\n  fontFamily: 'inherit',\n  icon: '',\n};\n\n// 1. Повідомлення про УСПІХ (Success)\nexport const showSuccess = message => {\n  iziToast.show({\n    ...defaultOptions,\n    title: TOAST.TITLE.SUCCESS,\n    message: message,\n    backgroundColor: COLORS.BLACK,\n    titleColor: COLORS.WHITE,\n    messageColor: COLORS.WHITE,\n    icon: TOAST.ICON.SUCCESS,\n    iconColor: COLORS.WHITE,\n  });\n};\n\n// 2. Повідомлення про ПОМИЛКУ (Error)\nexport const showError = message => {\n  iziToast.show({\n    ...defaultOptions,\n    title: TOAST.TITLE.ERROR,\n    message: message,\n    backgroundColor: COLORS.BLACK,\n    titleColor: COLORS.WHITE,\n    messageColor: COLORS.GRAY_LIGHT,\n    progressBarColor: COLORS.WHITE,\n    icon: TOAST.ICON.ERROR,\n    iconColor: COLORS.WHITE,\n  });\n};\n\n// 3. Інформаційне повідомлення (Info)\nexport const showInfo = message => {\n  iziToast.show({\n    ...defaultOptions,\n    title: TOAST.TITLE.INFO,\n    message: message,\n    backgroundColor: COLORS.WHITE,\n    titleColor: COLORS.BLACK,\n    messageColor: COLORS.BLACK,\n    progressBarColor: COLORS.BLACK,\n    borderBottom: `2px solid ${COLORS.BLACK}`,\n  });\n};\n","import { YourEnergyAPI } from './api';\nimport { showError } from './iziToast-helper';\nimport { ERROR_MESSAGES } from './constants.js';\n\nexport const fetchApi = new YourEnergyAPI();\n\nconst quote = {\n  content: document.querySelector('.js-quote-content'),\n  author: document.querySelector('.js-quote-author'),\n};\n\nfunction getQuoteData() {\n  const storedQuote = localStorage.getItem('quoteData');\n  if (storedQuote) {\n    const { quote: quoteContent, author, date } = JSON.parse(storedQuote);\n    const savedDate = new Date(date);\n    const currentDate = new Date();\n\n    if (savedDate.getDate() === currentDate.getDate()) {\n      addTextContent(quoteContent, author);\n      return;\n    }\n  }\n  fetchGetExercisesQuote();\n}\n\ngetQuoteData();\n\nasync function fetchGetExercisesQuote() {\n  try {\n    const resp = await fetchApi.getQuote();\n\n    const { quote: newQuote, author } = resp;\n    const quoteData = { quote: newQuote, author, date: new Date() };\n    localStorage.setItem('quoteData', JSON.stringify(quoteData));\n    addTextContent(newQuote, author);\n  } catch (err) {\n    showError(err.message || ERROR_MESSAGES.API_ERROR);\n  }\n}\n\nfunction addTextContent(content, author) {\n  if (quote.content) {\n    quote.content.textContent = content;\n  }\n  if (quote.author) {\n    quote.author.textContent = author;\n  }\n}\n","import { SEO } from './constants.js';\n\nexport function injectSchema(data) {\n  if (!data || !data.results) return;\n\n  const schemaData = {\n    '@context': SEO.SCHEMA_CONTEXT,\n    '@type': SEO.SCHEMA_TYPES.ITEM_LIST,\n    itemListElement: data.results.map((item, index) => ({\n      '@type': SEO.SCHEMA_TYPES.LIST_ITEM,\n      position: index + 1,\n      item: {\n        '@type': SEO.SCHEMA_TYPES.EXERCISE_PLAN,\n        name: item.name,\n        filter: item.filter,\n        image: item.imgURL,\n      },\n    })),\n  };\n  updateSchemaScript('filters', schemaData);\n}\n\nexport function injectSchemaExercises(data) {\n  if (!data || !data.results || data.results.length === 0) return;\n\n  const schemaData = {\n    '@context': SEO.SCHEMA_CONTEXT,\n    '@type': SEO.SCHEMA_TYPES.ITEM_LIST,\n    itemListElement: data.results.map((ex, index) => ({\n      '@type': SEO.SCHEMA_TYPES.LIST_ITEM,\n      position: index + 1,\n      item: {\n        '@type': SEO.SCHEMA_TYPES.EXERCISE_PLAN,\n        name: capitalize(ex.name),\n        description: ex.description,\n        image: ex.gifUrl,\n        audience: {\n          '@type': 'PeopleAudience',\n          suggestedGender: 'unisex',\n        },\n        category: ex.target,\n        keywords: `${ex.bodyPart}, ${ex.equipment}, fitness`,\n      },\n    })),\n  };\n\n  updateSchemaScript('detailed-exercises', schemaData);\n}\n\nfunction updateSchemaScript(schemaId, data) {\n  let script = document.querySelector(`script[data-schema=\"${schemaId}\"]`);\n\n  if (!script) {\n    script = document.createElement('script');\n    script.type = SEO.JSON_LD_TYPE;\n    script.setAttribute('data-schema', schemaId);\n    document.head.appendChild(script);\n  }\n\n  script.textContent = JSON.stringify(data);\n  // console.log(`Schema updated for: ${schemaId}`);\n}\n\nfunction capitalize(str) {\n  if (!str) return '';\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","export function renderPaginationUniversal({\n  container,\n  currentPage,\n  totalPages,\n  onPageChange,\n  mode = 'full',\n  showArrows = false, \n  showPrevNext = false, \n  classes = {},\n  icons = {},\n  scrollToTop = true,\n  scrollTarget = null,\n}) {\n  if (!container) return;\n  container.innerHTML = '';\n\n  const {\n    page: pageClass = '',\n    active: activeClass = 'active',\n    arrow: arrowClass = '',\n    prev: prevClass = '',\n    next: nextClass = '',\n    first: firstClass = '',\n    last: lastClass = '',\n  } = classes;\n\n  const {\n    prev: prevIcon = '<',\n    next: nextIcon = '>',\n    first: firstIcon = '<<',\n    last: lastIcon = '>>',\n  } = icons;\n\n  const createBtn = (label, page, className = '') => {\n    const btn = document.createElement('button');\n    btn.className = className;\n    btn.textContent = label;\n    btn.dataset.page = page;\n    return btn;\n  };\n\n  const scrollHandler = () => {\n    if (scrollToTop) {\n      if (scrollTarget) {\n        const el =\n          typeof scrollTarget === 'string'\n            ? document.querySelector(scrollTarget)\n            : scrollTarget;\n\n        if (el) {\n          el.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        }\n      } else {\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n      }\n    }\n  };\n\n\n  if (mode !== 'neighbors') {\n    if (showPrevNext && currentPage > 1) {\n      const prevBtn = createBtn(prevIcon, currentPage - 1, prevClass);\n      container.appendChild(prevBtn);\n    }\n  }\n\n  if (mode === 'full') {\n    for (let i = 1; i <= totalPages; i++) {\n      const btn = createBtn(i, i, pageClass);\n      if (i === currentPage) btn.classList.add(activeClass);\n      container.appendChild(btn);\n    }\n  } else if (mode === 'neighbors') {\n    let pages = [];\n\n    if (totalPages <= 3) {\n      pages = Array.from({ length: totalPages }, (_, i) => i + 1);\n    } else if (currentPage === 1) {\n      pages = [1, 2, 3];\n    } else if (currentPage === totalPages) {\n      pages = [totalPages - 2, totalPages - 1, totalPages];\n    } else {\n      pages = [currentPage - 1, currentPage, currentPage + 1];\n    }\n\n\n    const disablePrev = currentPage === 1; \n    const disableFirst = currentPage <= 2;\n    const isAtEnd = pages[2] === totalPages; \n\n  \n    if (showArrows && totalPages > 3) {\n      const firstBtn = createBtn(\n        firstIcon,\n        1,\n        `${arrowClass} ${prevClass} ${firstClass}`.trim()\n      );\n      if (disableFirst) firstBtn.disabled = true;\n      container.appendChild(firstBtn);\n    }\n\n    if (showPrevNext) {\n      const prevBtn = createBtn(\n        prevIcon,\n        Math.max(1, currentPage - 1),\n        `${prevClass}`.trim()\n      );\n      if (disablePrev) prevBtn.disabled = true;\n      container.appendChild(prevBtn);\n    }\n\n    pages.forEach(p => {\n      const btn = createBtn(\n        p,\n        p,\n        `${pageClass} ${p === currentPage ? activeClass : ''}`.trim()\n      );\n      container.appendChild(btn);\n    });\n\n    if (showPrevNext) {\n      const nextBtn = createBtn(\n        nextIcon,\n        Math.min(totalPages, currentPage + 1),\n        `${nextClass}`.trim()\n      );\n      if (isAtEnd) nextBtn.disabled = true;\n      container.appendChild(nextBtn);\n    }\n\n    if (showArrows && totalPages > 3) {\n      const lastBtn = createBtn(\n        lastIcon,\n        totalPages,\n        `${arrowClass} ${nextClass} ${lastClass}`.trim()\n      );\n      if (isAtEnd) lastBtn.disabled = true;\n      container.appendChild(lastBtn);\n    }\n  }\n\n  if (mode !== 'neighbors') {\n    if (showPrevNext && currentPage < totalPages) {\n      const nextBtn = createBtn(nextIcon, currentPage + 1, nextClass);\n      container.appendChild(nextBtn);\n    }\n  }\n\n  container.querySelectorAll('button').forEach(btn => {\n    btn.addEventListener('click', () => {\n      if (btn.disabled) return;\n\n      const page = Number(btn.dataset.page);\n      if (Number.isNaN(page) || page === currentPage) return;\n\n      onPageChange(page);\n\n      if (scrollToTop) {\n        if (scrollTarget) {\n          const el =\n            typeof scrollTarget === 'string'\n              ? document.querySelector(scrollTarget)\n              : scrollTarget;\n\n          if (el) {\n            const y = el.getBoundingClientRect().top + window.scrollY;\n            window.scrollTo({ top: y - 200, behavior: 'smooth' });\n          }\n        } else {\n          window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n      }\n    });\n  });\n}\n","import { REFS } from './constants.js';\n\nconst FAVORITES_KEY = 'favorites';\n\n// Get favorites from LocalStorage\nfunction getFavorites() {\n  const data = localStorage.getItem(FAVORITES_KEY);\n  if (!data) return [];\n\n  const parsed = JSON.parse(data);\n\n  if (parsed.length > 0 && typeof parsed[0] === 'object' && parsed[0].id) {\n    const ids = parsed.map(item => item.id || item._id).filter(Boolean);\n    saveFavorites(ids);\n    return ids;\n  }\n\n  return parsed;\n}\n\n// Save favorites to LocalStorage\nfunction saveFavorites(favoritesArray) {\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favoritesArray));\n}\n\nfunction isFavorite(id) {\n  const favorites = getFavorites();\n  return favorites.includes(id);\n}\n\nfunction addFavorite(exerciseObj) {\n  const favorites = getFavorites();\n  const exerciseId = exerciseObj.id || exerciseObj._id;\n  if (exerciseId && !favorites.includes(exerciseId)) {\n    favorites.push(exerciseId);\n    saveFavorites(favorites);\n  }\n}\n\nfunction removeFavorite(id) {\n  const favorites = getFavorites();\n  const updated = favorites.filter(itemId => itemId !== id);\n  saveFavorites(updated);\n}\n\nconst currentExercise = {};\n\nfunction initFavoritesBtn(exercise, buttonElement = null) {\n  const favoriteBtnElement = buttonElement || REFS.favoriteBtn;\n\n  if (!favoriteBtnElement) return;\n\n  Object.assign(currentExercise, exercise);\n\n  const exerciseId = exercise.id || exercise._id;\n  const isInFavorites = isFavorite(exerciseId);\n\n  updateButtonState(favoriteBtnElement, isInFavorites);\n\n  favoriteBtnElement.onclick = () => {\n    const currentId = exercise.id || exercise._id;\n    if (isFavorite(currentId)) {\n      removeFavorite(currentId);\n      updateButtonState(favoriteBtnElement, false);\n    } else {\n      addFavorite(exercise);\n      updateButtonState(favoriteBtnElement, true);\n    }\n  };\n}\n\nfunction updateButtonState(button, isInFavorites) {\n  const textElement = button.querySelector('.exercise-modal__btn-text');\n  const heartIcon = button.querySelector('.exercise-modal__btn-icon--heart');\n  const trashIcon = button.querySelector('.exercise-modal__btn-icon--trash');\n\n  if (textElement) {\n    textElement.textContent = isInFavorites\n      ? 'Remove from favorites'\n      : 'Add to favorites';\n  }\n\n  if (heartIcon && trashIcon) {\n    if (isInFavorites) {\n      heartIcon.classList.add('exercise-modal__btn-icon--hidden');\n      trashIcon.classList.remove('exercise-modal__btn-icon--hidden');\n    } else {\n      heartIcon.classList.remove('exercise-modal__btn-icon--hidden');\n      trashIcon.classList.add('exercise-modal__btn-icon--hidden');\n    }\n  }\n}\n\nexport {\n  getFavorites,\n  saveFavorites,\n  isFavorite,\n  addFavorite,\n  removeFavorite,\n  currentExercise,\n  initFavoritesBtn,\n};\n","const ref = {\n  loaderOverlay: document.getElementById('loader-overlay'),\n  loaderBg: document.getElementById('bg-loader'),\n};\nexport function startLoader() {\n  if (ref.loaderOverlay) ref.loaderOverlay.classList.remove('hidden');\n  if (ref.loaderBg) ref.loaderBg.classList.add('bg-loader');\n}\nexport function cancelLoader() {\n  if (ref.loaderOverlay) ref.loaderOverlay.classList.add('hidden');\n  if (ref.loaderBg) ref.loaderBg.classList.remove('bg-loader');\n}\n","import { getFavorites, removeFavorite } from './favorites-btn.js';\nimport { YourEnergyAPI } from './api.js';\nimport { renderExercisesList } from '../js/exercises-list';\nimport { renderPaginationUniversal } from './pagination.js';\nimport { cancelLoader, startLoader } from './loader.js';\n\nconst api = new YourEnergyAPI();\n\nlet currentPage = 1;\nlet allFavoritesData = [];\n\nfunction isDesktop() {\n  return window.innerWidth >= 1440;\n}\n\nfunction getItemsPerPage() {\n  if (window.innerWidth >= 768) {\n    return 10;\n  }\n  return 8;\n}\nfunction renderEmptyMessage() {\n  const container = document.querySelector('.favorites-wrapper');\n  if (!container) return;\n\n  const existingContent = container.querySelector('.favorites-content');\n  if (existingContent) existingContent.remove();\n\n  const existingEmpty = container.querySelector('.favorites-empty');\n  if (existingEmpty) existingEmpty.remove();\n\n  let mainContainer = container.querySelector('.main-container');\n  if (!mainContainer) {\n    mainContainer = document.createElement('div');\n    mainContainer.className = 'main-container container';\n    container.appendChild(mainContainer);\n  }\n\n  const emptyDiv = document.createElement('div');\n  emptyDiv.className = 'favorites-empty';\n  emptyDiv.innerHTML = `\n    <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>\n  `;\n\n  mainContainer.appendChild(emptyDiv);\n}\n\nasync function loadFavoritesData(ids) {\n  try {\n    const exercise = await api.getExerciseById(ids);\n    if (exercise) return exercise;\n  } catch (err) {\n    console.error(`Failed to load exercise ${ids}`, err);\n  }\n}\n\nfunction renderPaginatedFavorites(page = 1) {\n  const container = document.querySelector('.main-container');\n  if (!container) return;\n\n  let contentWrapper = container.querySelector('.favorites-content');\n  if (!contentWrapper) {\n    contentWrapper = document.createElement('div');\n    contentWrapper.className = 'favorites-content';\n    container.appendChild(contentWrapper);\n  }\n\n  let listEl = contentWrapper.querySelector('.favorites-list');\n  if (!listEl) {\n    listEl = document.createElement('ul');\n    listEl.className = 'favorites favorites-list';\n    contentWrapper.appendChild(listEl);\n  }\n\n  let paginationContainer = contentWrapper.querySelector(\n    '.js-favorites-pagination'\n  );\n  if (!paginationContainer) {\n    paginationContainer = document.createElement('div');\n    paginationContainer.className =\n      'favorites-pagination js-favorites-pagination';\n    contentWrapper.appendChild(paginationContainer);\n  }\n\n  if (isDesktop()) {\n    const desktopLimit = 12;\n    const totalPages = Math.ceil(allFavoritesData.length / desktopLimit);\n    const needsPagination = totalPages > 1;\n\n    const startIndex = (page - 1) * desktopLimit;\n    const endIndex = startIndex + desktopLimit;\n\n    const paginatedDesktop = allFavoritesData.slice(startIndex, endIndex);\n    renderExercisesList(listEl, paginatedDesktop, true);\n\n    if (needsPagination) {\n      renderPaginationUniversal({\n        container: paginationContainer,\n        currentPage: page,\n        totalPages: totalPages,\n        mode: 'neighbors',\n        showPrevNext: totalPages > 2,\n        showArrows: totalPages > 3, // ✅ додано: подвійні << >>\n        classes: {\n          page: 'exercises__page',\n          active: 'active',\n          prev: 'exercises__page-prev',\n          next: 'exercises__page-next',\n        },\n        icons: {\n          prev: '<',\n          next: '>',\n        },\n        scrollToTop: true,\n        scrollTarget: '.favorites-wrapper',\n        onPageChange(newPage) {\n          currentPage = newPage;\n          renderPaginatedFavorites(newPage);\n        },\n      });\n    } else {\n      paginationContainer.innerHTML = '';\n    }\n\n    return;\n  }\n\n  const itemsPerPage = getItemsPerPage();\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n\n  const paginatedData = allFavoritesData.slice(startIndex, endIndex);\n  renderExercisesList(listEl, paginatedData, true);\n\n  const totalPages = Math.ceil(allFavoritesData.length / itemsPerPage);\n\n  if (totalPages > 1) {\n    renderPaginationUniversal({\n      container: paginationContainer,\n      currentPage: page,\n      totalPages: totalPages,\n      mode: 'neighbors',\n      showPrevNext: totalPages > 2,\n      showArrows: totalPages > 3, // \n      classes: {\n        page: 'exercises__page',\n        active: 'active',\n        prev: 'exercises__page-prev',\n        next: 'exercises__page-next',\n      },\n      icons: {\n        prev: '<',\n        next: '>',\n      },\n      scrollToTop: true,\n      scrollTarget: '.favorites-wrapper',\n      onPageChange(newPage) {\n        currentPage = newPage;\n        renderPaginatedFavorites(newPage);\n      },\n    });\n  } else {\n    paginationContainer.innerHTML = '';\n  }\n}\n\nasync function renderFavorites(arr) {\n  const container = document.querySelector('.favorites-wrapper');\n  if (!container) return;\n\n  const emptyDiv = container.querySelector('.favorites-empty');\n  if (emptyDiv) emptyDiv.remove();\n\n  allFavoritesData = [];\n\n  if (Array.isArray(arr) && arr.length > 0) {\n    try {\n      const promises = arr.map(it => loadFavoritesData(it.trim()));\n      const results = await Promise.all(promises);\n      results.forEach(data => {\n        if (data) allFavoritesData.push(data);\n      });\n    } catch (error) {\n      console.error('Error loading:', error);\n    }\n  }\n\n  if (allFavoritesData.length === 0) {\n    renderEmptyMessage();\n    return;\n  }\n\n  currentPage = 1;\n  renderPaginatedFavorites(1);\n}\n\nexport function startRenderFavorites() {\n  const favorites = getFavorites();\n  favorites.length ? renderFavorites(favorites) : renderEmptyMessage();\n}\n\nlet resizeTimeout;\nwindow.addEventListener('resize', () => {\n  clearTimeout(resizeTimeout);\n  resizeTimeout = setTimeout(() => {\n    if (allFavoritesData.length > 0) {\n      renderPaginatedFavorites(currentPage);\n    }\n  }, 250);\n});\n\nconst wrapper = document.querySelector('.favorites-wrapper');\n\nif (wrapper) {\n  wrapper.addEventListener('click', event => {\n    const deleteBtn = event.target.closest('.favorites-delete-btn');\n\n    if (deleteBtn) {\n      const idToRemove = deleteBtn.dataset.id;\n\n      if (idToRemove) {\n        if (wrapper.style.pointerEvents === 'none') return;\n        wrapper.style.pointerEvents = 'none';\n\n        startLoader();\n        removeFavorite(idToRemove);\n        startRenderFavorites();\n        cancelLoader();\n\n        setTimeout(() => {\n          wrapper.style.pointerEvents = 'auto';\n        }, 500);\n      }\n    }\n  });\n}\n\nstartRenderFavorites();\n","/**\n * Universal module for working with a modal window template\n * Allows opening a modal with any content,\n * blocks the page scroll, closes on Escape\n */\n\nimport { startRenderFavorites } from './favorites-page';\n\nlet refs = null;\nlet isInitialized = false;\nconst modalTypes = {};\n\nexport function registerModalType(type, getContentFn, initFn) {\n  modalTypes[type] = {\n    getContent: getContentFn,\n    init: initFn,\n  };\n}\n\nfunction initRefs() {\n  if (isInitialized) return;\n\n  refs = {\n    modal: document.getElementById('modal-template'),\n    backdrop: document.querySelector('[data-modal-close]'),\n    closeBtn: document.querySelector('.modal-template__close-btn'),\n    body: document.querySelector('[data-modal-body]'),\n  };\n\n  isInitialized = true;\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    initRefs();\n  });\n} else {\n  initRefs();\n}\n\nexport function initModalButtons() {\n  const modalButtons = document.querySelectorAll('[data-modal]');\n\n  modalButtons.forEach(button => {\n    if (button.hasAttribute('data-modal-initialized')) {\n      return;\n    }\n\n    const modalType = button.getAttribute('data-modal');\n\n    if (!modalTypes[modalType]) {\n      console.warn(`Modal type \"${modalType}\" is not registered`);\n      return;\n    }\n\n    button.addEventListener('click', () => {\n      const { getContent, init } = modalTypes[modalType];\n\n      const content = getContent();\n      if (!content) {\n        console.error(`Failed to get content for modal type \"${modalType}\"`);\n        return;\n      }\n\n      openModal(content);\n\n      if (init) {\n        setTimeout(async () => {\n          try {\n            await init(closeModal);\n          } catch (error) {\n            console.error('Error initializing modal:', error);\n          }\n        }, 100);\n      }\n    });\n\n    button.setAttribute('data-modal-initialized', 'true');\n  });\n}\n\nexport function openModal(content) {\n  initRefs();\n\n  if (!refs || !refs.modal || !refs.body) {\n    console.error('Modal template elements not found');\n    return;\n  }\n\n  if (typeof content === 'string') {\n    refs.body.innerHTML = content;\n  } else if (content instanceof HTMLElement) {\n    refs.body.innerHTML = '';\n    refs.body.appendChild(content);\n  } else {\n    console.error('Invalid content type. Expected string or HTMLElement');\n    return;\n  }\n\n  refs.modal.classList.remove('hidden');\n  document.body.classList.add('modal-open');\n\n  document.addEventListener('keydown', handleEscape, { once: false });\n  refs.backdrop?.addEventListener('click', handleBackdropClick);\n  refs.closeBtn?.addEventListener('click', handleCloseButtonClick);\n}\n\nexport function closeModal() {\n  initRefs();\n\n  if (!refs || !refs.modal) return;\n\n  refs.modal.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', handleEscape);\n  refs.backdrop?.removeEventListener('click', handleBackdropClick);\n  refs.closeBtn?.removeEventListener('click', handleCloseButtonClick);\n\n  if (refs && refs.body) {\n    refs.body.innerHTML = '';\n  }\n  const checkExcesicerender = document.querySelector('.favorites-list');\n  if (checkExcesicerender) startRenderFavorites();\n}\n\nfunction isConfirmModalOpen() {\n  const confirmModal = document.getElementById('modal-confirm');\n  return confirmModal && !confirmModal.classList.contains('hidden');\n}\n\nfunction handleEscape(event) {\n  if (event.key === 'Escape') {\n    if (isConfirmModalOpen()) {\n      return;\n    }\n    closeModal();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === refs.backdrop) {\n    if (isConfirmModalOpen()) {\n      return;\n    }\n    closeModal();\n  }\n}\n\nfunction handleCloseButtonClick() {\n  if (isConfirmModalOpen()) {\n    return;\n  }\n  closeModal();\n}\n\nexport function isModalOpen() {\n  initRefs();\n  return refs && refs.modal && !refs.modal.classList.contains('hidden');\n}\n","import { YourEnergyAPI } from './api.js';\nimport { initFavoritesBtn } from './favorites-btn.js';\nimport { showError } from './iziToast-helper.js';\nimport { initModalButtons } from './modal-template.js';\n\nconst api = new YourEnergyAPI();\n\nexport function getExerciseModalContent() {\n  const modalTemplate = document.getElementById('exercise-modal-template');\n\n  if (!modalTemplate) {\n    console.error(\n      'Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag.'\n    );\n    return null;\n  }\n\n  const fragment = modalTemplate.content.cloneNode(true);\n  const content = fragment.firstElementChild || fragment.firstChild;\n\n  if (!content) {\n    console.error('Failed to extract content from template fragment');\n    return null;\n  }\n\n  return content;\n}\n\nexport async function initExerciseModal(closeModalFn) {\n  const modalBody = document.querySelector('[data-modal-body]');\n  const modal = modalBody?.querySelector('.exercise-modal');\n\n  if (!modalBody || !modal) {\n    console.error('Modal body or exercise modal not found');\n    return;\n  }\n\n  const loader = modal.querySelector('.exercise-modal__loader');\n  if (loader) {\n    loader.classList.remove('hidden');\n  }\n\n  let exerciseId =\n    sessionStorage.getItem('exerciseModalExerciseId') ||\n    document\n      .querySelector('[data-modal=\"exercise\"][data-exercise-id]')\n      ?.getAttribute('data-exercise-id');\n\n  if (exerciseId) {\n    sessionStorage.removeItem('exerciseModalExerciseId');\n  }\n\n  if (!exerciseId) {\n    if (loader) loader.classList.add('hidden');\n    showError('Exercise ID is missing');\n    return;\n  }\n\n  let exercise;\n  try {\n    exercise = await api.getExerciseById(exerciseId);\n    exercise.id = exercise.id || exercise._id;\n  } catch (err) {\n    console.error('Failed to load exercise:', err);\n    if (loader) loader.classList.add('hidden');\n    showError(err.message || 'Failed to load exercise. Try later.');\n    modal.innerHTML = `<p>Failed to load exercise. Try later.</p>`;\n    return;\n  }\n\n  renderExerciseData(modal, exercise);\n\n  if (loader) {\n    loader.classList.add('hidden');\n  }\n\n  const favoritesBtn = modal.querySelector('.favorites-btn');\n  if (favoritesBtn) {\n    initFavoritesBtn(exercise, favoritesBtn);\n  }\n\n  const ratingBtn = modal.querySelector('.exercise-modal__btn--rating');\n  if (ratingBtn && !ratingBtn.hasAttribute('data-modal-initialized')) {\n    initModalButtons();\n  }\n}\n\nfunction renderExerciseData(container, exercise) {\n  const titleEl = container.querySelector('.exercise-modal__title');\n  const ratingValueEl = container.querySelector(\n    '.exercise-modal__rating-value'\n  );\n  const starsContainer = container.querySelector('.exercise-modal__stars');\n  const gifEl = container.querySelector('.exercise-modal__gif');\n  const targetEl = container.querySelector('.exercise-modal__target');\n  const bodypartEl = container.querySelector('.exercise-modal__bodypart');\n  const equipmentEl = container.querySelector('.exercise-modal__equipment');\n  const popularEl = container.querySelector('.exercise-modal__popular');\n  const caloriesEl = container.querySelector('.exercise-modal__calories');\n  const descriptionEl = container.querySelector('.exercise-modal__description');\n  const favoritesBtn = container.querySelector('.favorites-btn');\n  const ratingBtn = container.querySelector('.exercise-modal__btn--rating');\n\n  // Title\n  if (titleEl) titleEl.textContent = exercise.name || '';\n\n  // Rating\n  const rating = exercise.rating || 0;\n  if (ratingValueEl) {\n    ratingValueEl.textContent = rating.toFixed(1);\n  }\n  if (starsContainer) {\n    starsContainer.innerHTML = renderStars(rating);\n  }\n\n  // GIF\n  if (gifEl) {\n    gifEl.src = exercise.gifUrl || '';\n    gifEl.alt = exercise.name || 'Exercise GIF';\n  }\n\n  // Info\n  if (targetEl) targetEl.textContent = capitalizeFirst(exercise.target || '');\n  if (bodypartEl)\n    bodypartEl.textContent = capitalizeFirst(exercise.bodyPart || '');\n  if (equipmentEl)\n    equipmentEl.textContent = capitalizeFirst(exercise.equipment || '');\n\n  // Popular\n  if (popularEl) {\n    const popularity = exercise.popularity || 0;\n    if (popularity >= 1000) {\n      popularEl.textContent =\n        (popularity / 1000).toFixed(1).replace(/\\.0$/, '') + 'k';\n    } else {\n      popularEl.textContent = popularity.toString();\n    }\n  }\n\n  // Calories\n  if (caloriesEl) {\n    const calories = exercise.burnedCalories;\n    const caloriesContainer = caloriesEl.closest('p');\n\n    if (calories && calories > 0) {\n      const time = exercise.time || 3;\n      caloriesEl.textContent = `${calories}/${time} min`;\n      if (caloriesContainer) {\n        caloriesContainer.style.display = '';\n      }\n    } else {\n      if (caloriesContainer) {\n        caloriesContainer.style.display = 'none';\n      }\n    }\n  }\n\n  // Description\n  if (descriptionEl) {\n    descriptionEl.textContent =\n      exercise.description || exercise.instructions || '';\n  }\n\n  // Buttons\n  if (favoritesBtn) {\n    favoritesBtn.setAttribute('data-id', exercise.id || exercise._id || '');\n  }\n\n  if (ratingBtn) {\n    ratingBtn.setAttribute(\n      'data-exercise-id',\n      exercise.id || exercise._id || ''\n    );\n  }\n}\n\nfunction renderStars(rating) {\n  const roundedRating = Math.round(rating);\n  const fullStars = roundedRating;\n  const emptyStars = 5 - fullStars;\n\n  let starsHTML = '';\n\n  const starPath =\n    'M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z';\n\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML += `\n      <div class=\"rating-star active\">\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 13 13\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"rating-star__svg\"\n        >\n          <path\n            d=\"${starPath}\"\n            class=\"rating-star__path\"\n          />\n        </svg>\n      </div>\n    `;\n  }\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML += `\n      <div class=\"rating-star\">\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 13 13\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"rating-star__svg\"\n        >\n          <path\n            d=\"${starPath}\"\n            class=\"rating-star__path\"\n          />\n        </svg>\n      </div>\n    `;\n  }\n\n  return starsHTML;\n}\n\nfunction capitalizeFirst(str) {\n  if (!str) return '';\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","import { YourEnergyAPI } from './api';\nimport { showError } from './iziToast-helper';\nimport { renderPaginationUniversal } from './pagination.js';\nimport iziToast from 'izitoast';\nimport { openModal, closeModal } from './modal-template.js';\nimport { startLoader, cancelLoader } from './loader.js';\nimport {\n  getExerciseModalContent,\n  initExerciseModal,\n} from './modal-exercise-content.js';\nimport { injectSchemaExercises } from './seo-function.js';\n\nconst api = new YourEnergyAPI();\n\nfunction getPageLimit() {\n  return window.innerWidth < 768 ? 8 : 10;\n}\n\nlet currentQuery = {\n  type: 'body-parts',\n  filter: 'waist',\n  keyword: '',\n};\n\nlet currentPage = 1;\nlet currentTotalPages = 1;\nlet lastRequestId = 0;\nlet lastEmptyToastKey = '';\n\nexport async function loadExercisesList({\n  page = 1,\n  type,\n  filter,\n  keyword,\n} = {}) {\n  const listEl = document.querySelector('.js-exercises-list');\n  if (!listEl) return;\n\n  const limit = getPageLimit();\n\n  if (type !== undefined) currentQuery.type = type;\n  if (filter !== undefined) currentQuery.filter = filter;\n  if (keyword !== undefined) currentQuery.keyword = keyword;\n\n  const activeType = currentQuery.type;\n  const activeFilter = currentQuery.filter;\n  const activeKeyword = currentQuery.keyword || '';\n  const params = buildExercisesParams({\n    page,\n    limit,\n    type: activeType,\n    filter: activeFilter,\n    keyword: activeKeyword,\n  });\n\n  const requestId = ++lastRequestId;\n\n  startLoader();\n\n  try {\n    const data = await api.getExercises(params);\n\n    if (requestId !== lastRequestId) return;\n\n    const items = data.results || [];\n    currentPage = data.page || page;\n    currentTotalPages = data.totalPages || 1;\n    injectSchemaExercises(data);\n    renderExercisesList(listEl, items);\n    renderExercisesPagination(currentPage, currentTotalPages);\n\n    if (!items.length) {\n      const emptyKey = `${activeType}:${activeFilter}:${activeKeyword || ''}`;\n\n      if (emptyKey !== lastEmptyToastKey) {\n        lastEmptyToastKey = emptyKey;\n\n        if (activeKeyword || type !== undefined || filter !== undefined) {\n          iziToast.warning({\n            title: 'No results',\n            message: activeKeyword\n              ? `Nothing found for “${activeKeyword}”. Try another search.`\n              : 'No exercises found for this category.',\n            position: 'topRight',\n          });\n        }\n      }\n    } else {\n      lastEmptyToastKey = '';\n    }\n\n    const shouldUpdateUrl =\n      type !== undefined || filter !== undefined || keyword !== undefined;\n\n    if (shouldUpdateUrl) {\n      const url = new URL(window.location.href);\n      url.searchParams.set('type', activeType);\n      url.searchParams.set('filter', activeFilter);\n\n      if (activeKeyword) url.searchParams.set('keyword', activeKeyword);\n      else url.searchParams.delete('keyword');\n\n      window.history.pushState({}, '', url);\n    }\n  } catch (err) {\n    console.error('Failed to load exercises:', err);\n\n    if (requestId !== lastRequestId) return;\n\n    if (typeof showError === 'function') {\n      showError(err.message || 'Failed to load exercises. Try again later.');\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: err.message || 'Failed to load exercises. Try again later.',\n        position: 'topRight',\n      });\n    }\n\n    listEl.innerHTML = `\n      <li class=\"exercises__item\">\n        <p>Failed to load exercises. Try again later.</p>\n      </li>\n    `;\n  } finally {\n    if (requestId === lastRequestId) {\n      cancelLoader();\n    }\n  }\n}\n\nfunction buildExercisesParams({ page, limit, type, filter, keyword }) {\n  const params = { page, limit };\n\n  if (keyword) params.keyword = keyword;\n\n  switch (type) {\n    case 'body-parts':\n      params.bodypart = filter;\n      break;\n    case 'muscles':\n      params.muscles = filter;\n      break;\n    case 'equipment':\n      params.equipment = filter;\n      break;\n    default:\n      params.bodypart = filter;\n  }\n\n  return params;\n}\n\nexport function renderExercisesList(listEl, items, isFavorite = false) {\n  if (!items.length) {\n    listEl.innerHTML = `\n      <li class=\"exercises__item\">\n        <p>No exercises found.</p>\n      </li>\n    `;\n    return;\n  }\n\n  const markup = items\n    .map(it => createExerciseCardMarkup(it, isFavorite))\n    .join('');\n  listEl.innerHTML = markup;\n  handleExerciseItemClick(listEl);\n}\n\nfunction createExerciseCardMarkup(item, isFavorite = false) {\n  const { name, burnedCalories, bodyPart, target, time, rating, _id } = item;\n  const actionMarkup = isFavorite\n    ? `<button type=\"button\" class=\"favorites-delete-btn\" data-id=\"${_id}\">\n         <svg class=\"favorites-icon-trash\" width=\"16\" height=\"16\" aria-label=\"Remove from favorites\">\n            <use href=\"./img/icons.svg#icon-trash\"></use> \n         </svg>\n       </button>`\n    : `<div class=\"exercises__rating\">\n         <span class=\"exercises__meta-key\">${rating}</span>\n         <span class=\"exercises__meta-value\">\n           <svg class=\"star\" width=\"18\" height=\"18\">\n             <use href=\"./img/icons.svg#icon-star\"></use>\n           </svg>\n         </span>\n       </div>`;\n\n  return `\n    <li class=\"exercises__item\" data-exercise-id=\"${_id}\">\n      <div class=\"exercises__item-top\">\n        <div class=\"exercises__item-info\">\n          <span class=\"exercises__badge\">Workout</span>\n          \n          ${actionMarkup} \n          \n        </div>\n\n        <button\n          type=\"button\"\n          class=\"exercises__start-btn js-open-exercise\"\n          data-exercise-id=\"${_id}\"\n        >\n          Start\n          <svg class=\"arrow__icon\" width=\"16\" height=\"16\">\n             <use href=\"./img/icons.svg#icon-arrow\"></use>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"exercises__name-container\">\n        <svg class=\"exercises__icon\" width=\"24\" height=\"24\">\n           <use href=\"./img/icons.svg#icon-running-man\"></use>\n        </svg>\n        <h3 class=\"exercises__name\">${name}</h3>\n      </div>\n\n        <div class=\"exercises__item-bottom\">\n          <p class=\"exercises__meta\">\n            <span class=\"exercises__meta-label\">Burned calories:</span>\n            <span class=\"exercises__meta-value\">${burnedCalories} / ${time}</span>\n          </p>\n          <p class=\"exercises__meta\">\n            <span class=\"exercises__meta-label\">Body part:</span>\n            <span class=\"exercises__meta-value\">${bodyPart}</span>\n          </p>\n          <p class=\"exercises__meta\">\n            <span class=\"exercises__meta-label\">Target:</span>\n            <span class=\"exercises__meta-value\">${target}</span>\n          </p>\n        </div>\n      </li>\n  `;\n}\n\nexport function renderExercisesPagination(currentPage, totalPages) {\n  const container = document.querySelector('.js-exercises-pagination');\n  if (!container) return;\n\n  renderPaginationUniversal({\n    container,\n    currentPage,\n    totalPages,\n    mode: 'neighbors',\n\n    showPrevNext: totalPages > 2, \n    showArrows: totalPages > 3, \n\n    classes: {\n      page: 'exercises__page',\n      active: 'active',\n      prev: 'exercises__page-prev',\n      next: 'exercises__page-next',\n    },\n\n    scrollTarget: '.exercises',\n    onPageChange: page => loadExercisesList({ page }),\n  });\n\n  document\n    .querySelector('.filters__controls')\n    ?.scrollIntoView({ behavior: 'smooth' });\n}\n\n\nfunction handleExerciseItemClick(listEl) {\n  const startButtons = listEl.querySelectorAll(\n    '.exercises__start-btn[data-exercise-id]'\n  );\n\n  startButtons.forEach(button => {\n    if (button.hasAttribute('data-click-handler-attached')) {\n      return;\n    }\n\n    button.addEventListener('click', handleExcersiseModalOpen);\n    button.setAttribute('data-click-handler-attached', 'true');\n  });\n}\n\nasync function handleExcersiseModalOpen(event) {\n  const button = event.currentTarget;\n  const exerciseId = button.getAttribute('data-exercise-id');\n\n  if (!exerciseId) {\n    console.error('Exercise ID is missing');\n    return;\n  }\n\n  sessionStorage.setItem('exerciseModalExerciseId', exerciseId);\n\n  const content = getExerciseModalContent();\n  if (!content) {\n    console.error('Failed to get exercise modal content');\n    return;\n  }\n\n  openModal(content);\n  try {\n    await initExerciseModal(closeModal);\n  } catch (error) {\n    console.error('Error initializing exercise modal:', error);\n  }\n}\n","import { REFS } from './constants.js';\n\n(() => {\n  const {\n    mobileMenu: menu,\n    mobileMenuOpenBtn: openMenuBtn,\n    mobileMenuCloseBtn: closeMenuBtn,\n  } = REFS;\n\n  if (!openMenuBtn || !menu || !closeMenuBtn) return;\n\n  const toggleMenu = () => {\n    menu.classList.toggle('is-open');\n    document.body.classList.toggle('menu-open');\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  window\n    .matchMedia('(min-width: 768px)')\n    .addEventListener('change', e => {\n      if (!e.matches) return;\n      menu.classList.remove('is-open');\n      document.body.classList.remove('menu-open');\n    });\n})();\n","const scrollUpButton = document.querySelector('.scroll-up-btn');\n\nif (scrollUpButton) {\n  function smoothScrollToTop(duration = 1000) {\n    const start = window.scrollY;\n    const startTime = performance.now();\n\n    function scrollStep(currentTime) {\n      const elapsed = currentTime - startTime;\n      const progress = Math.min(elapsed / duration, 1);\n      const ease = 1 - Math.pow(1 - progress, 3);\n      window.scrollTo(0, start * (1 - ease));\n\n      if (progress < 1) {\n        requestAnimationFrame(scrollStep);\n      }\n    }\n\n    requestAnimationFrame(scrollStep);\n  }\n\n  window.addEventListener('scroll', () => {\n    if (window.scrollY > 300) {\n      scrollUpButton.classList.add('show');\n    } else {\n      scrollUpButton.classList.remove('show');\n    }\n  });\n\n  scrollUpButton.addEventListener('click', (e) => {\n    e.preventDefault();\n    smoothScrollToTop();\n  });\n}\n","/**\n * module for working with a confirm modal that opens over the main modal\n */\n\nlet confirmModalRefs = null;\nlet confirmCallback = null;\nlet cancelCallback = null;\n\nfunction initConfirmRefs() {\n  if (confirmModalRefs) return;\n\n  const modal = document.getElementById('modal-confirm');\n  if (!modal) {\n    console.error('Confirm modal not found');\n    return;\n  }\n\n  confirmModalRefs = {\n    modal,\n    backdrop: modal.querySelector('[data-confirm-close]'),\n    message: modal.querySelector('[data-confirm-message]'),\n    cancelBtn: modal.querySelector('[data-confirm-cancel]'),\n    confirmBtn: modal.querySelector('[data-confirm-ok]'),\n  };\n\n  confirmModalRefs.backdrop?.removeEventListener('click', handleBackdropClick, {\n    capture: true,\n  });\n  confirmModalRefs.cancelBtn?.removeEventListener('click', handleCancel, {\n    capture: true,\n  });\n  confirmModalRefs.confirmBtn?.removeEventListener('click', handleConfirm, {\n    capture: true,\n  });\n\n  confirmModalRefs.backdrop?.addEventListener('click', handleBackdropClick, {\n    capture: true,\n  });\n  confirmModalRefs.cancelBtn?.addEventListener('click', handleCancel, {\n    capture: true,\n  });\n  confirmModalRefs.confirmBtn?.addEventListener('click', handleConfirm, {\n    capture: true,\n  });\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initConfirmRefs);\n} else {\n  initConfirmRefs();\n}\n\nfunction handleEscape(event) {\n  if (\n    event.key === 'Escape' &&\n    confirmModalRefs &&\n    !confirmModalRefs.modal.classList.contains('hidden')\n  ) {\n    handleCancel();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === confirmModalRefs.backdrop) {\n    event.stopPropagation();\n    event.preventDefault();\n    handleCancel(event);\n  }\n}\n\nfunction handleCancel(event) {\n  if (event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  const callback = cancelCallback;\n  closeConfirmModal();\n  if (callback) {\n    callback();\n  }\n}\n\nfunction handleConfirm(event) {\n  if (event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  const callback = confirmCallback;\n  closeConfirmModal();\n  setTimeout(() => {\n    if (callback) {\n      callback();\n    }\n  }, 0);\n}\n\nexport function openConfirmModal(message, onConfirm, onCancel = null) {\n  initConfirmRefs();\n\n  if (!confirmModalRefs || !confirmModalRefs.modal) {\n    console.error('Confirm modal elements not found');\n    return;\n  }\n\n  confirmCallback = onConfirm;\n  cancelCallback = onCancel;\n\n  if (confirmModalRefs.message) {\n    confirmModalRefs.message.textContent = message;\n  }\n\n  confirmModalRefs.modal.classList.remove('hidden');\n  document.addEventListener('keydown', handleEscape, { once: true });\n}\n\nexport function closeConfirmModal() {\n  if (!confirmModalRefs || !confirmModalRefs.modal) return;\n\n  confirmModalRefs.modal.classList.add('hidden');\n  confirmCallback = null;\n  cancelCallback = null;\n}\n","import { YourEnergyAPI } from './api.js';\nimport { showError, showSuccess } from './iziToast-helper.js';\nimport { openConfirmModal } from './confirm-modal.js';\nimport { ERROR_MESSAGES } from './constants.js';\n\nconst api = new YourEnergyAPI();\n\nlet checkFormFilledFn = null;\n\nexport function getRatingModalContent() {\n  const existingRatingModal = document.querySelector('.rating-modal');\n\n  if (!existingRatingModal) {\n    console.error(\n      'Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag.'\n    );\n    return null;\n  }\n\n  const clonedModal = existingRatingModal.cloneNode(true);\n  updateElementIds(clonedModal);\n\n  return clonedModal;\n}\n\nfunction initRatingModalButtons() {\n  document.addEventListener(\n    'click',\n    function (event) {\n      const button = event.target.closest('[data-modal=\"rating\"]');\n      if (button) {\n        const exerciseId = button.getAttribute('data-exercise-id');\n        if (exerciseId) {\n          sessionStorage.setItem('ratingModalExerciseId', exerciseId);\n        }\n      }\n    },\n    { capture: true }\n  );\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initRatingModalButtons);\n} else {\n  initRatingModalButtons();\n}\n\nfunction updateElementIds(element) {\n  const elementsWithId = element.querySelectorAll('[id]');\n  const timestamp = Date.now();\n\n  elementsWithId.forEach(el => {\n    const oldId = el.id;\n    el.id = `${oldId}-${timestamp}`;\n\n    const labels = element.querySelectorAll(`label[for=\"${oldId}\"]`);\n    labels.forEach(label => {\n      label.setAttribute('for', el.id);\n    });\n  });\n}\n\nexport function checkRatingFormFilled() {\n  return checkFormFilledFn ? checkFormFilledFn() : false;\n}\n\nfunction clearRatingForm() {\n  const modalBody = document.querySelector('[data-modal-body]');\n  const ratingModal = modalBody?.querySelector('.rating-modal');\n\n  if (!ratingModal) return;\n\n  const form = ratingModal.querySelector('.rating-modal__form');\n  const ratingInput = ratingModal.querySelector('input[name=\"rating\"]');\n  const ratingText = ratingModal.querySelector('.rating-modal__rating-text');\n  const emailInput = ratingModal.querySelector('input[name=\"email\"]');\n  const commentTextarea = ratingModal.querySelector('textarea[name=\"comment\"]');\n  const stars = ratingModal.querySelectorAll('.rating-star');\n\n  if (form) form.reset();\n  if (ratingInput) ratingInput.value = '0';\n  if (emailInput) emailInput.value = '';\n  if (commentTextarea) commentTextarea.value = '';\n  if (ratingText) ratingText.textContent = '';\n\n  stars.forEach(star => {\n    star.classList.remove('active');\n  });\n}\n\nexport function handleRatingModalClose(closeModalFn) {\n  if (checkFormFilledFn && checkFormFilledFn()) {\n    openConfirmModal(\n      'Are you sure you want to cancel your exercise review?',\n      () => {\n        clearRatingForm();\n        checkFormFilledFn = null;\n        closeModalFn();\n      },\n      () => {}\n    );\n  } else {\n    clearRatingForm();\n    checkFormFilledFn = null;\n    closeModalFn();\n  }\n}\n\nexport function initRatingModal(closeModalFn) {\n  checkFormFilledFn = null;\n\n  const modalBody = document.querySelector('[data-modal-body]');\n  const ratingModal = modalBody?.querySelector('.rating-modal');\n\n  if (!modalBody || !ratingModal) {\n    console.error('Modal body or rating modal not found');\n    return;\n  }\n\n  let exerciseId =\n    sessionStorage.getItem('ratingModalExerciseId') ||\n    document\n      .querySelector('[data-modal=\"rating\"][data-exercise-id]')\n      ?.getAttribute('data-exercise-id');\n\n  if (exerciseId) {\n    sessionStorage.removeItem('ratingModalExerciseId');\n  }\n\n  if (!exerciseId) {\n    showError('Exercise ID is missing');\n    return;\n  }\n\n  const stars = ratingModal.querySelectorAll('.rating-star');\n  const ratingInput = ratingModal.querySelector('input[name=\"rating\"]');\n  const ratingText = ratingModal.querySelector('.rating-modal__rating-text');\n  const cancelBtn = ratingModal.querySelector('.rating-modal__btn--cancel');\n  const submitBtn = ratingModal.querySelector(\n    '.rating-modal__btn[type=\"submit\"]'\n  );\n  const emailInput = ratingModal.querySelector('input[name=\"email\"]');\n  const commentTextarea = ratingModal.querySelector('textarea[name=\"comment\"]');\n  const form = ratingModal.querySelector('.rating-modal__form');\n\n  let currentRating = 0;\n  if (submitBtn) submitBtn.disabled = true;\n  if (ratingInput) ratingInput.value = '0';\n  if (ratingText) ratingText.textContent = '0';\n\n  const isFormValid = () => {\n    return (\n      currentRating > 0 &&\n      currentRating <= 5 &&\n      emailInput?.value.trim() !== '' &&\n      commentTextarea?.value.trim() !== ''\n    );\n  };\n\n  const updateSubmitButton = () => {\n    if (submitBtn) {\n      submitBtn.disabled = !isFormValid();\n    }\n  };\n\n  const checkFormFilled = () => {\n    return (\n      currentRating > 0 ||\n      emailInput?.value.trim() !== '' ||\n      commentTextarea?.value.trim() !== ''\n    );\n  };\n\n  checkFormFilledFn = checkFormFilled;\n\n  const updateStars = rating => {\n    stars.forEach((star, index) => {\n      const starRating = index + 1;\n      if (starRating <= rating) {\n        star.classList.add('active');\n      } else {\n        star.classList.remove('active');\n      }\n    });\n  };\n\n  stars.forEach((star, index) => {\n    const rating = index + 1;\n\n    star.addEventListener('click', () => {\n      currentRating = rating;\n      updateStars(rating);\n      if (ratingInput) ratingInput.value = rating;\n      if (ratingText) ratingText.textContent = rating;\n      updateSubmitButton();\n    });\n  });\n\n  [emailInput, commentTextarea].forEach(input => {\n    if (input) {\n      input.addEventListener('input', updateSubmitButton);\n    }\n  });\n\n  const resetForm = () => {\n    currentRating = 0;\n    if (ratingInput) ratingInput.value = '0';\n    if (emailInput) emailInput.value = '';\n    if (commentTextarea) commentTextarea.value = '';\n    if (ratingText) ratingText.textContent = '0';\n    updateStars(0);\n    updateSubmitButton();\n  };\n\n  const backdrop = document.querySelector('[data-modal-close]');\n\n  const isConfirmModalOpen = () => {\n    const confirmModal = document.getElementById('modal-confirm');\n    return confirmModal && !confirmModal.classList.contains('hidden');\n  };\n\n  const handleEscapeCapture = event => {\n    if (event.key === 'Escape') {\n      if (isConfirmModalOpen()) {\n        return;\n      }\n      event.stopPropagation();\n      handleRatingModalClose(() => {\n        cleanup();\n        closeModalFn();\n      });\n    }\n  };\n\n  const backdropClickHandler = event => {\n    if (event.target === backdrop) {\n      if (isConfirmModalOpen()) {\n        return;\n      }\n      event.stopPropagation();\n      handleRatingModalClose(() => {\n        cleanup();\n        closeModalFn();\n      });\n    }\n  };\n\n  const cleanup = () => {\n    document.removeEventListener('keydown', handleEscapeCapture, {\n      capture: true,\n    });\n    backdrop?.removeEventListener('click', backdropClickHandler, {\n      capture: true,\n    });\n    closeBtn?.removeEventListener('click', closeBtnHandler, { capture: true });\n  };\n\n  const closeBtn = document.querySelector('.modal-template__close-btn');\n  const closeBtnHandler = event => {\n    if (isConfirmModalOpen()) {\n      return;\n    }\n    event.stopPropagation();\n    handleClose();\n  };\n\n  document.addEventListener('keydown', handleEscapeCapture, { capture: true });\n  backdrop?.addEventListener('click', backdropClickHandler, { capture: true });\n  closeBtn?.addEventListener('click', closeBtnHandler, { capture: true });\n\n  const handleClose = () => {\n    handleRatingModalClose(() => {\n      cleanup();\n      closeModalFn();\n    });\n  };\n\n  if (cancelBtn && closeModalFn) {\n    cancelBtn.addEventListener('click', () => {\n      handleClose();\n    });\n  }\n\n  if (form) {\n    form.setAttribute('data-no-auto-close', 'true');\n\n    form.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      if (!isFormValid()) {\n        showError('Please fill in all fields');\n        return;\n      }\n\n      const formData = new FormData(form);\n      const rating = parseInt(formData.get('rating'), 10);\n      const email = formData.get('email').trim();\n      const comment = formData.get('comment').trim();\n\n      if (submitBtn) {\n        submitBtn.disabled = true;\n        submitBtn.textContent = 'Sending...';\n      }\n\n      try {\n        await api.rateExercise(exerciseId, {\n          rate: rating,\n          email: email,\n          review: comment,\n        });\n\n        showSuccess('Thank you for your feedback!');\n        checkFormFilledFn = null;\n\n        setTimeout(() => {\n          if (closeModalFn) {\n            cleanup();\n            closeModalFn();\n          }\n        }, 1000);\n      } catch (error) {\n        console.error('Failed to submit rating:', error);\n        showError(error.message || ERROR_MESSAGES.API_ERROR);\n\n        if (submitBtn) {\n          submitBtn.disabled = false;\n          submitBtn.textContent = 'Send';\n        }\n      }\n    });\n  }\n}\n"],"names":["CONFIG","COLORS","API_ENDPOINTS","REGEX","VALIDATION","TOAST","SEO","MODAL_TYPES","ERROR_MESSAGES","REFS","YourEnergyAPI","baseURL","axios","response","error","errorMessage","_b","_a","method","url","data","params","config","message","id","defaultOptions","showSuccess","iziToast","showError","showInfo","fetchApi","quote","getQuoteData","storedQuote","quoteContent","author","date","savedDate","currentDate","addTextContent","fetchGetExercisesQuote","resp","newQuote","quoteData","err","content","injectSchema","schemaData","item","index","updateSchemaScript","injectSchemaExercises","ex","capitalize","schemaId","script","str","renderPaginationUniversal","container","currentPage","totalPages","onPageChange","mode","showArrows","showPrevNext","classes","icons","scrollToTop","scrollTarget","pageClass","activeClass","arrowClass","prevClass","nextClass","firstClass","lastClass","prevIcon","nextIcon","firstIcon","lastIcon","createBtn","label","page","className","btn","prevBtn","i","pages","_","disablePrev","disableFirst","isAtEnd","firstBtn","p","nextBtn","lastBtn","el","y","FAVORITES_KEY","getFavorites","parsed","ids","saveFavorites","favoritesArray","isFavorite","addFavorite","exerciseObj","favorites","exerciseId","removeFavorite","updated","itemId","currentExercise","initFavoritesBtn","exercise","buttonElement","favoriteBtnElement","isInFavorites","updateButtonState","currentId","button","textElement","heartIcon","trashIcon","ref","startLoader","cancelLoader","api","allFavoritesData","isDesktop","getItemsPerPage","renderEmptyMessage","existingContent","existingEmpty","mainContainer","emptyDiv","loadFavoritesData","renderPaginatedFavorites","contentWrapper","listEl","paginationContainer","needsPagination","startIndex","endIndex","paginatedDesktop","renderExercisesList","newPage","itemsPerPage","paginatedData","renderFavorites","arr","promises","it","startRenderFavorites","resizeTimeout","wrapper","event","deleteBtn","idToRemove","refs","isInitialized","modalTypes","registerModalType","type","getContentFn","initFn","initRefs","initModalButtons","modalType","getContent","init","openModal","closeModal","handleEscape","handleBackdropClick","handleCloseButtonClick","isConfirmModalOpen","confirmModal","getExerciseModalContent","modalTemplate","fragment","initExerciseModal","closeModalFn","modalBody","modal","loader","renderExerciseData","favoritesBtn","ratingBtn","titleEl","ratingValueEl","starsContainer","gifEl","targetEl","bodypartEl","equipmentEl","popularEl","caloriesEl","descriptionEl","rating","renderStars","capitalizeFirst","popularity","calories","caloriesContainer","time","fullStars","emptyStars","starsHTML","starPath","getPageLimit","currentQuery","currentTotalPages","lastRequestId","lastEmptyToastKey","loadExercisesList","filter","keyword","limit","activeType","activeFilter","activeKeyword","buildExercisesParams","requestId","items","renderExercisesPagination","emptyKey","markup","createExerciseCardMarkup","handleExerciseItemClick","name","burnedCalories","bodyPart","target","_id","actionMarkup","handleExcersiseModalOpen","menu","openMenuBtn","closeMenuBtn","toggleMenu","e","scrollUpButton","smoothScrollToTop","duration","start","startTime","scrollStep","currentTime","elapsed","progress","ease","confirmModalRefs","confirmCallback","cancelCallback","initConfirmRefs","handleCancel","_c","handleConfirm","_d","_e","_f","callback","closeConfirmModal","openConfirmModal","onConfirm","onCancel","checkFormFilledFn","getRatingModalContent","existingRatingModal","clonedModal","updateElementIds","initRatingModalButtons","element","elementsWithId","timestamp","oldId","clearRatingForm","ratingModal","form","ratingInput","ratingText","emailInput","commentTextarea","stars","star","handleRatingModalClose","initRatingModal","cancelBtn","submitBtn","currentRating","isFormValid","updateSubmitButton","updateStars","input","backdrop","handleEscapeCapture","cleanup","backdropClickHandler","closeBtn","closeBtnHandler","handleClose","formData","email","comment"],"mappings":"uvBAAO,MAAMA,GAAS,CACpB,aACuC,uCACvC,SAA2C,YAC3C,SAA2C,OAC3C,UAA6C,eAC/C,ECHaC,EAAS,CACpB,MAAO,OACP,MAAO,OACP,WAAY,SACd,EAGaC,EAAgB,CAC3B,QAAS,WACT,UAAW,aACX,MAAO,SACP,aAAc,eAChB,EAGaC,GAAQ,CACnB,MAAO,iDACT,EAGaC,EAAa,CACxB,YAAaD,GAAM,MACnB,WAAY,EACZ,WAAY,CACd,EAWaE,EAAQ,CACnB,SAAU,CACR,UAAW,WACX,SAAU,UACV,WAAY,YACZ,aAAc,cACd,YAAa,aACb,cAAe,cAChB,EAED,QAAS,CACP,MAAO,IACP,QAAS,IACT,KAAM,GACP,EAED,WAAY,CACV,GAAI,aACJ,IAAK,cACN,EAED,MAAO,CACL,QAAS,KACT,MAAO,QACP,KAAM,OACN,QAAS,SACV,EAED,KAAM,CACJ,QAAS,aACT,MAAO,aACP,KAAM,YACN,QAAS,cACV,CACH,EAGaC,EAAM,CACjB,eAAgB,qBAChB,aAAc,CACZ,UAAW,WACX,UAAW,WACX,cAAe,cAChB,EACD,aAAc,qBAChB,EAGaC,GAAc,CACzB,OAAQ,SACR,SAAU,UACZ,EAGaC,EAAiB,CAC5B,UAAW,uBACX,eAAgB,8BAChB,aAAc,0BAA0BJ,EAAW,UAAU,QAAQA,EAAW,UAAU,GAC1F,qBAAsB,yBACxB,EAEaK,GAAO,CAClB,UAAW,SAAS,cAAc,mBAAmB,EAErD,aAAc,SAAS,cAAc,gBAAgB,EACrD,cAAe,SAAS,cAAc,iBAAiB,EAEvD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,mBAAoB,SAAS,cAAc,yBAAyB,EACpE,oBAAqB,SAAS,cAAc,0BAA0B,EAEtE,cAAe,SAAS,eAAe,gBAAgB,EACvD,cAAe,SAAS,cAAc,4BAA4B,EAClE,cAAe,SAAS,cAAc,2BAA2B,EAEjE,cAAe,SAAS,cAAc,iBAAiB,EACvD,gBAAiB,SAAS,cAAc,yBAAyB,EAIjE,YAAa,SAAS,cAAc,qBAAqB,EACzD,iBAAkB,SAAS,cAAc,kBAAkB,EAC3D,gBAAiB,SAAS,cAAc,oBAAoB,EAC5D,aAAc,SAAS,cAAc,iBAAiB,EACtD,gBAAiB,SAAS,cAAc,qBAAqB,EAG7D,WAAY,SAAS,cAAc,aAAa,EAChD,kBAAmB,SAAS,cAAc,kBAAkB,EAC5D,mBAAoB,SAAS,cAAc,mBAAmB,CAChE,EC5HO,MAAMC,CAAc,CACzB,YAAYC,EAAUX,GAAO,aAAc,CACzC,KAAK,QAAUW,EACf,KAAK,MAAQC,GAAM,OAAO,CACxB,QAAS,KAAK,OACpB,CAAK,EAGD,KAAK,MAAM,aAAa,SAAS,IAC/BC,GAAYA,EACZC,GAAS,SACP,MAAMC,IACJC,GAAAC,EAAAH,EAAM,WAAN,YAAAG,EAAgB,OAAhB,YAAAD,EAAsB,UACtBF,EAAM,SACNN,EAAe,UACjB,eAAQ,MAAM,aAAcO,CAAY,EACjC,QAAQ,OAAOD,CAAK,CAC5B,CACP,CACG,CAWD,MAAM,SAASI,EAAQC,EAAKC,EAAO,KAAMC,EAAS,KAAM,SACtD,GAAI,CACF,MAAMC,EAAS,CAAE,OAAAJ,EAAQ,IAAAC,GACzB,OAAIC,IAAME,EAAO,KAAOF,GACpBC,IAAQC,EAAO,OAASD,IAEX,MAAM,KAAK,MAAMC,CAAM,GACxB,IACjB,OAAQR,EAAO,CACd,MAAMS,IAAUP,GAAAC,EAAAH,EAAM,WAAN,YAAAG,EAAgB,OAAhB,YAAAD,EAAsB,UAAWF,EAAM,QACvD,MAAM,IAAI,MAAM,GAAGI,EAAO,YAAW,CAAE,IAAIC,CAAG,YAAYI,CAAO,EAAE,CACpE,CACF,CAOD,MAAM,WAAWF,EAAS,GAAI,CAC5B,OAAO,KAAK,SAAS,MAAOnB,EAAc,QAAS,KAAMmB,CAAM,CAChE,CAOD,MAAM,aAAaA,EAAS,GAAI,CAC9B,OAAO,KAAK,SAAS,MAAOnB,EAAc,UAAW,KAAMmB,CAAM,CAClE,CAED,MAAM,gBAAgBG,EAAI,CACxB,GAAI,CAACA,EACH,MAAM,IAAI,MAAMhB,EAAe,oBAAoB,EAErD,OAAO,KAAK,SAAS,MAAO,GAAGN,EAAc,SAAS,IAAIsB,CAAE,EAAE,CAC/D,CAMD,MAAM,UAAW,CACf,OAAO,KAAK,SAAS,MAAOtB,EAAc,KAAK,CAChD,CAOD,MAAM,UAAUkB,EAAM,CACpB,GAAI,CAACA,EAAK,OAAS,CAAChB,EAAW,YAAY,KAAKgB,EAAK,KAAK,EACxD,MAAM,IAAI,MAAMZ,EAAe,cAAc,EAE/C,OAAO,KAAK,SAAS,OAAQN,EAAc,aAAckB,CAAI,CAC9D,CAQD,MAAM,aAAaI,EAAIJ,EAAM,CAC3B,GAAI,CAACI,EACH,MAAM,IAAI,MAAMhB,EAAe,oBAAoB,EAErD,GACE,CAACY,EAAK,MACNA,EAAK,KAAOhB,EAAW,YACvBgB,EAAK,KAAOhB,EAAW,WAEvB,MAAM,IAAI,MAAMI,EAAe,YAAY,EAE7C,GAAI,CAACY,EAAK,OAAS,CAAChB,EAAW,YAAY,KAAKgB,EAAK,KAAK,EACxD,MAAM,IAAI,MAAMZ,EAAe,cAAc,EAE/C,OAAO,KAAK,SACV,QACA,GAAGN,EAAc,SAAS,IAAIsB,CAAE,UAChCJ,CACN,CACG,CACH,CCnHA,MAAMK,GAAiB,CACrB,SAAUpB,EAAM,SAAS,UACzB,QAASA,EAAM,QAAQ,QACvB,MAAO,GACP,cAAe,GACf,aAAc,GACd,YAAa,GACb,iBAAkBJ,EAAO,WACzB,aAAcI,EAAM,WAAW,GAC/B,cAAeA,EAAM,WAAW,IAChC,WAAY,UACZ,KAAM,EACR,EAGaqB,GAAcH,GAAW,CACpCI,EAAS,KAAK,CACZ,GAAGF,GACH,MAAOpB,EAAM,MAAM,QACnB,QAASkB,EACT,gBAAiBtB,EAAO,MACxB,WAAYA,EAAO,MACnB,aAAcA,EAAO,MACrB,KAAMI,EAAM,KAAK,QACjB,UAAWJ,EAAO,KACtB,CAAG,CACH,EAGa2B,EAAYL,GAAW,CAClCI,EAAS,KAAK,CACZ,GAAGF,GACH,MAAOpB,EAAM,MAAM,MACnB,QAASkB,EACT,gBAAiBtB,EAAO,MACxB,WAAYA,EAAO,MACnB,aAAcA,EAAO,WACrB,iBAAkBA,EAAO,MACzB,KAAMI,EAAM,KAAK,MACjB,UAAWJ,EAAO,KACtB,CAAG,CACH,EAGa4B,GAAWN,GAAW,CACjCI,EAAS,KAAK,CACZ,GAAGF,GACH,MAAOpB,EAAM,MAAM,KACnB,QAASkB,EACT,gBAAiBtB,EAAO,MACxB,WAAYA,EAAO,MACnB,aAAcA,EAAO,MACrB,iBAAkBA,EAAO,MACzB,aAAc,aAAaA,EAAO,KAAK,EAC3C,CAAG,CACH,ECvDa6B,GAAW,IAAIpB,EAEtBqB,EAAQ,CACZ,QAAS,SAAS,cAAc,mBAAmB,EACnD,OAAQ,SAAS,cAAc,kBAAkB,CACnD,EAEA,SAASC,IAAe,CACtB,MAAMC,EAAc,aAAa,QAAQ,WAAW,EACpD,GAAIA,EAAa,CACf,KAAM,CAAE,MAAOC,EAAc,OAAAC,EAAQ,KAAAC,CAAI,EAAK,KAAK,MAAMH,CAAW,EAC9DI,EAAY,IAAI,KAAKD,CAAI,EACzBE,EAAc,IAAI,KAExB,GAAID,EAAU,QAAO,IAAOC,EAAY,QAAO,EAAI,CACjDC,GAAeL,EAAcC,CAAM,EACnC,MACD,CACF,CACDK,IACF,CAEAR,KAEA,eAAeQ,IAAyB,CACtC,GAAI,CACF,MAAMC,EAAO,MAAMX,GAAS,WAEtB,CAAE,MAAOY,EAAU,OAAAP,CAAM,EAAKM,EAC9BE,EAAY,CAAE,MAAOD,EAAU,OAAAP,EAAQ,KAAM,IAAI,MACvD,aAAa,QAAQ,YAAa,KAAK,UAAUQ,CAAS,CAAC,EAC3DJ,GAAeG,EAAUP,CAAM,CAChC,OAAQS,EAAK,CACZhB,EAAUgB,EAAI,SAAWpC,EAAe,SAAS,CAClD,CACH,CAEA,SAAS+B,GAAeM,EAASV,EAAQ,CACnCJ,EAAM,UACRA,EAAM,QAAQ,YAAcc,GAE1Bd,EAAM,SACRA,EAAM,OAAO,YAAcI,EAE/B,CC9CO,SAASW,GAAa1B,EAAM,CACjC,GAAI,CAACA,GAAQ,CAACA,EAAK,QAAS,OAE5B,MAAM2B,EAAa,CACjB,WAAYzC,EAAI,eAChB,QAASA,EAAI,aAAa,UAC1B,gBAAiBc,EAAK,QAAQ,IAAI,CAAC4B,EAAMC,KAAW,CAClD,QAAS3C,EAAI,aAAa,UAC1B,SAAU2C,EAAQ,EAClB,KAAM,CACJ,QAAS3C,EAAI,aAAa,cAC1B,KAAM0C,EAAK,KACX,OAAQA,EAAK,OACb,MAAOA,EAAK,MACb,CACP,EAAM,CACN,EACEE,GAAmB,UAAWH,CAAU,CAC1C,CAEO,SAASI,GAAsB/B,EAAM,CAC1C,GAAI,CAACA,GAAQ,CAACA,EAAK,SAAWA,EAAK,QAAQ,SAAW,EAAG,OAEzD,MAAM2B,EAAa,CACjB,WAAYzC,EAAI,eAChB,QAASA,EAAI,aAAa,UAC1B,gBAAiBc,EAAK,QAAQ,IAAI,CAACgC,EAAIH,KAAW,CAChD,QAAS3C,EAAI,aAAa,UAC1B,SAAU2C,EAAQ,EAClB,KAAM,CACJ,QAAS3C,EAAI,aAAa,cAC1B,KAAM+C,GAAWD,EAAG,IAAI,EACxB,YAAaA,EAAG,YAChB,MAAOA,EAAG,OACV,SAAU,CACR,QAAS,iBACT,gBAAiB,QAClB,EACD,SAAUA,EAAG,OACb,SAAU,GAAGA,EAAG,QAAQ,KAAKA,EAAG,SAAS,WAC1C,CACP,EAAM,CACN,EAEEF,GAAmB,qBAAsBH,CAAU,CACrD,CAEA,SAASG,GAAmBI,EAAUlC,EAAM,CAC1C,IAAImC,EAAS,SAAS,cAAc,uBAAuBD,CAAQ,IAAI,EAElEC,IACHA,EAAS,SAAS,cAAc,QAAQ,EACxCA,EAAO,KAAOjD,EAAI,aAClBiD,EAAO,aAAa,cAAeD,CAAQ,EAC3C,SAAS,KAAK,YAAYC,CAAM,GAGlCA,EAAO,YAAc,KAAK,UAAUnC,CAAI,CAE1C,CAEA,SAASiC,GAAWG,EAAK,CACvB,OAAKA,EACEA,EAAI,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAI,MAAM,CAAC,EAD/B,EAEnB,CClEO,SAASC,GAA0B,CACxC,UAAAC,EACA,YAAAC,EACA,WAAAC,EACA,aAAAC,EACA,KAAAC,EAAO,OACP,WAAAC,EAAa,GACb,aAAAC,EAAe,GACf,QAAAC,EAAU,CAAE,EACZ,MAAAC,EAAQ,CAAE,EACV,YAAAC,EAAc,GACd,aAAAC,EAAe,IACjB,EAAG,CACD,GAAI,CAACV,EAAW,OAChBA,EAAU,UAAY,GAEtB,KAAM,CACJ,KAAMW,EAAY,GAClB,OAAQC,EAAc,SACtB,MAAOC,EAAa,GACpB,KAAMC,EAAY,GAClB,KAAMC,EAAY,GAClB,MAAOC,EAAa,GACpB,KAAMC,EAAY,EACnB,EAAGV,EAEE,CACJ,KAAMW,EAAW,IACjB,KAAMC,EAAW,IACjB,MAAOC,EAAY,KACnB,KAAMC,EAAW,IAClB,EAAGb,EAEEc,EAAY,CAACC,EAAOC,EAAMC,EAAY,KAAO,CACjD,MAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3C,OAAAA,EAAI,UAAYD,EAChBC,EAAI,YAAcH,EAClBG,EAAI,QAAQ,KAAOF,EACZE,CACX,EAoBE,GAAItB,IAAS,aACPE,GAAgBL,EAAc,EAAG,CACnC,MAAM0B,EAAUL,EAAUJ,EAAUjB,EAAc,EAAGa,CAAS,EAC9Dd,EAAU,YAAY2B,CAAO,CAC9B,CAGH,GAAIvB,IAAS,OACX,QAASwB,EAAI,EAAGA,GAAK1B,EAAY0B,IAAK,CACpC,MAAMF,EAAMJ,EAAUM,EAAGA,EAAGjB,CAAS,EACjCiB,IAAM3B,GAAayB,EAAI,UAAU,IAAId,CAAW,EACpDZ,EAAU,YAAY0B,CAAG,CAC1B,SACQtB,IAAS,YAAa,CAC/B,IAAIyB,EAAQ,CAAA,EAER3B,GAAc,EAChB2B,EAAQ,MAAM,KAAK,CAAE,OAAQ3B,GAAc,CAAC4B,EAAGF,IAAMA,EAAI,CAAC,EACjD3B,IAAgB,EACzB4B,EAAQ,CAAC,EAAG,EAAG,CAAC,EACP5B,IAAgBC,EACzB2B,EAAQ,CAAC3B,EAAa,EAAGA,EAAa,EAAGA,CAAU,EAEnD2B,EAAQ,CAAC5B,EAAc,EAAGA,EAAaA,EAAc,CAAC,EAIxD,MAAM8B,EAAc9B,IAAgB,EAC9B+B,EAAe/B,GAAe,EAC9BgC,EAAUJ,EAAM,CAAC,IAAM3B,EAG7B,GAAIG,GAAcH,EAAa,EAAG,CAChC,MAAMgC,EAAWZ,EACfF,EACA,EACA,GAAGP,CAAU,IAAIC,CAAS,IAAIE,CAAU,GAAG,KAAM,CACzD,EACUgB,IAAcE,EAAS,SAAW,IACtClC,EAAU,YAAYkC,CAAQ,CAC/B,CAED,GAAI5B,EAAc,CAChB,MAAMqB,EAAUL,EACdJ,EACA,KAAK,IAAI,EAAGjB,EAAc,CAAC,EAC3B,GAAGa,CAAS,GAAG,KAAM,CAC7B,EACUiB,IAAaJ,EAAQ,SAAW,IACpC3B,EAAU,YAAY2B,CAAO,CAC9B,CAWD,GATAE,EAAM,QAAQM,GAAK,CACjB,MAAMT,EAAMJ,EACVa,EACAA,EACA,GAAGxB,CAAS,IAAIwB,IAAMlC,EAAcW,EAAc,EAAE,GAAG,KAAM,CACrE,EACMZ,EAAU,YAAY0B,CAAG,CAC/B,CAAK,EAEGpB,EAAc,CAChB,MAAM8B,EAAUd,EACdH,EACA,KAAK,IAAIjB,EAAYD,EAAc,CAAC,EACpC,GAAGc,CAAS,GAAG,KAAM,CAC7B,EACUkB,IAASG,EAAQ,SAAW,IAChCpC,EAAU,YAAYoC,CAAO,CAC9B,CAED,GAAI/B,GAAcH,EAAa,EAAG,CAChC,MAAMmC,EAAUf,EACdD,EACAnB,EACA,GAAGW,CAAU,IAAIE,CAAS,IAAIE,CAAS,GAAG,KAAM,CACxD,EACUgB,IAASI,EAAQ,SAAW,IAChCrC,EAAU,YAAYqC,CAAO,CAC9B,CACF,CAED,GAAIjC,IAAS,aACPE,GAAgBL,EAAcC,EAAY,CAC5C,MAAMkC,EAAUd,EAAUH,EAAUlB,EAAc,EAAGc,CAAS,EAC9Df,EAAU,YAAYoC,CAAO,CAC9B,CAGHpC,EAAU,iBAAiB,QAAQ,EAAE,QAAQ0B,GAAO,CAClDA,EAAI,iBAAiB,QAAS,IAAM,CAClC,GAAIA,EAAI,SAAU,OAElB,MAAMF,EAAO,OAAOE,EAAI,QAAQ,IAAI,EACpC,GAAI,SAAO,MAAMF,CAAI,GAAKA,IAASvB,KAEnCE,EAAaqB,CAAI,EAEbf,GACF,GAAIC,EAAc,CAChB,MAAM4B,EACJ,OAAO5B,GAAiB,SACpB,SAAS,cAAcA,CAAY,EACnCA,EAEN,GAAI4B,EAAI,CACN,MAAMC,EAAID,EAAG,sBAAuB,EAAC,IAAM,OAAO,QAClD,OAAO,SAAS,CAAE,IAAKC,EAAI,IAAK,SAAU,QAAQ,CAAE,CACrD,CACX,MACU,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAQ,CAAE,CAGxD,CAAK,CACL,CAAG,CACH,CC5KA,MAAMC,GAAgB,YAGtB,SAASC,GAAe,CACtB,MAAM/E,EAAO,aAAa,QAAQ8E,EAAa,EAC/C,GAAI,CAAC9E,EAAM,MAAO,GAElB,MAAMgF,EAAS,KAAK,MAAMhF,CAAI,EAE9B,GAAIgF,EAAO,OAAS,GAAK,OAAOA,EAAO,CAAC,GAAM,UAAYA,EAAO,CAAC,EAAE,GAAI,CACtE,MAAMC,EAAMD,EAAO,IAAIpD,GAAQA,EAAK,IAAMA,EAAK,GAAG,EAAE,OAAO,OAAO,EAClE,OAAAsD,GAAcD,CAAG,EACVA,CACR,CAED,OAAOD,CACT,CAGA,SAASE,GAAcC,EAAgB,CACrC,aAAa,QAAQL,GAAe,KAAK,UAAUK,CAAc,CAAC,CACpE,CAEA,SAASC,GAAWhF,EAAI,CAEtB,OADkB2E,IACD,SAAS3E,CAAE,CAC9B,CAEA,SAASiF,GAAYC,EAAa,CAChC,MAAMC,EAAYR,IACZS,EAAaF,EAAY,IAAMA,EAAY,IAC7CE,GAAc,CAACD,EAAU,SAASC,CAAU,IAC9CD,EAAU,KAAKC,CAAU,EACzBN,GAAcK,CAAS,EAE3B,CAEA,SAASE,GAAerF,EAAI,CAE1B,MAAMsF,EADYX,IACQ,OAAOY,GAAUA,IAAWvF,CAAE,EACxD8E,GAAcQ,CAAO,CACvB,CAEA,MAAME,GAAkB,CAAA,EAExB,SAASC,GAAiBC,EAAUC,EAAgB,KAAM,CACxD,MAAMC,EAAqBD,GAAiB1G,GAAK,YAEjD,GAAI,CAAC2G,EAAoB,OAEzB,OAAO,OAAOJ,GAAiBE,CAAQ,EAEvC,MAAMN,EAAaM,EAAS,IAAMA,EAAS,IACrCG,EAAgBb,GAAWI,CAAU,EAE3CU,GAAkBF,EAAoBC,CAAa,EAEnDD,EAAmB,QAAU,IAAM,CACjC,MAAMG,EAAYL,EAAS,IAAMA,EAAS,IACtCV,GAAWe,CAAS,GACtBV,GAAeU,CAAS,EACxBD,GAAkBF,EAAoB,EAAK,IAE3CX,GAAYS,CAAQ,EACpBI,GAAkBF,EAAoB,EAAI,EAEhD,CACA,CAEA,SAASE,GAAkBE,EAAQH,EAAe,CAChD,MAAMI,EAAcD,EAAO,cAAc,2BAA2B,EAC9DE,EAAYF,EAAO,cAAc,kCAAkC,EACnEG,EAAYH,EAAO,cAAc,kCAAkC,EAErEC,IACFA,EAAY,YAAcJ,EACtB,wBACA,oBAGFK,GAAaC,IACXN,GACFK,EAAU,UAAU,IAAI,kCAAkC,EAC1DC,EAAU,UAAU,OAAO,kCAAkC,IAE7DD,EAAU,UAAU,OAAO,kCAAkC,EAC7DC,EAAU,UAAU,IAAI,kCAAkC,GAGhE,CC3FA,MAAMC,EAAM,CACV,cAAe,SAAS,eAAe,gBAAgB,EACvD,SAAU,SAAS,eAAe,WAAW,CAC/C,EACO,SAASC,IAAc,CACxBD,EAAI,eAAeA,EAAI,cAAc,UAAU,OAAO,QAAQ,EAC9DA,EAAI,UAAUA,EAAI,SAAS,UAAU,IAAI,WAAW,CAC1D,CACO,SAASE,IAAe,CACzBF,EAAI,eAAeA,EAAI,cAAc,UAAU,IAAI,QAAQ,EAC3DA,EAAI,UAAUA,EAAI,SAAS,UAAU,OAAO,WAAW,CAC7D,CCLA,MAAMG,GAAM,IAAIrH,EAEhB,IAAIiD,EAAc,EACdqE,EAAmB,CAAA,EAEvB,SAASC,IAAY,CACnB,OAAO,OAAO,YAAc,IAC9B,CAEA,SAASC,IAAkB,CACzB,OAAI,OAAO,YAAc,IAChB,GAEF,CACT,CACA,SAASC,IAAqB,CAC5B,MAAMzE,EAAY,SAAS,cAAc,oBAAoB,EAC7D,GAAI,CAACA,EAAW,OAEhB,MAAM0E,EAAkB1E,EAAU,cAAc,oBAAoB,EAChE0E,GAAiBA,EAAgB,SAErC,MAAMC,EAAgB3E,EAAU,cAAc,kBAAkB,EAC5D2E,GAAeA,EAAc,SAEjC,IAAIC,EAAgB5E,EAAU,cAAc,iBAAiB,EACxD4E,IACHA,EAAgB,SAAS,cAAc,KAAK,EAC5CA,EAAc,UAAY,2BAC1B5E,EAAU,YAAY4E,CAAa,GAGrC,MAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,kBACrBA,EAAS,UAAY;AAAA;AAAA,IAIrBD,EAAc,YAAYC,CAAQ,CACpC,CAEA,eAAeC,GAAkBnC,EAAK,CACpC,GAAI,CACF,MAAMa,EAAW,MAAMa,GAAI,gBAAgB1B,CAAG,EAC9C,GAAIa,EAAU,OAAOA,CACtB,OAAQtE,EAAK,CACZ,QAAQ,MAAM,2BAA2ByD,CAAG,GAAIzD,CAAG,CACpD,CACH,CAEA,SAAS6F,EAAyBvD,EAAO,EAAG,CAC1C,MAAMxB,EAAY,SAAS,cAAc,iBAAiB,EAC1D,GAAI,CAACA,EAAW,OAEhB,IAAIgF,EAAiBhF,EAAU,cAAc,oBAAoB,EAC5DgF,IACHA,EAAiB,SAAS,cAAc,KAAK,EAC7CA,EAAe,UAAY,oBAC3BhF,EAAU,YAAYgF,CAAc,GAGtC,IAAIC,EAASD,EAAe,cAAc,iBAAiB,EACtDC,IACHA,EAAS,SAAS,cAAc,IAAI,EACpCA,EAAO,UAAY,2BACnBD,EAAe,YAAYC,CAAM,GAGnC,IAAIC,EAAsBF,EAAe,cACvC,0BACJ,EAQE,GAPKE,IACHA,EAAsB,SAAS,cAAc,KAAK,EAClDA,EAAoB,UAClB,+CACFF,EAAe,YAAYE,CAAmB,GAG5CX,GAAS,EAAI,CAEf,MAAMrE,EAAa,KAAK,KAAKoE,EAAiB,OAAS,EAAY,EAC7Da,EAAkBjF,EAAa,EAE/BkF,GAAc5D,EAAO,GAAK,GAC1B6D,EAAWD,EAAa,GAExBE,EAAmBhB,EAAiB,MAAMc,EAAYC,CAAQ,EACpEE,GAAoBN,EAAQK,EAAkB,EAAI,EAE9CH,EACFpF,GAA0B,CACxB,UAAWmF,EACX,YAAa1D,EACb,WAAYtB,EACZ,KAAM,YACN,aAAcA,EAAa,EAC3B,WAAYA,EAAa,EACzB,QAAS,CACP,KAAM,kBACN,OAAQ,SACR,KAAM,uBACN,KAAM,sBACP,EACD,MAAO,CACL,KAAM,IACN,KAAM,GACP,EACD,YAAa,GACb,aAAc,qBACd,aAAasF,EAAS,CACpBvF,EAAcuF,EACdT,EAAyBS,CAAO,CACjC,CACT,CAAO,EAEDN,EAAoB,UAAY,GAGlC,MACD,CAED,MAAMO,EAAejB,KACfY,GAAc5D,EAAO,GAAKiE,EAC1BJ,EAAWD,EAAaK,EAExBC,EAAgBpB,EAAiB,MAAMc,EAAYC,CAAQ,EACjEE,GAAoBN,EAAQS,EAAe,EAAI,EAE/C,MAAMxF,EAAa,KAAK,KAAKoE,EAAiB,OAASmB,CAAY,EAE/DvF,EAAa,EACfH,GAA0B,CACxB,UAAWmF,EACX,YAAa1D,EACb,WAAYtB,EACZ,KAAM,YACN,aAAcA,EAAa,EAC3B,WAAYA,EAAa,EACzB,QAAS,CACP,KAAM,kBACN,OAAQ,SACR,KAAM,uBACN,KAAM,sBACP,EACD,MAAO,CACL,KAAM,IACN,KAAM,GACP,EACD,YAAa,GACb,aAAc,qBACd,aAAasF,EAAS,CACpBvF,EAAcuF,EACdT,EAAyBS,CAAO,CACjC,CACP,CAAK,EAEDN,EAAoB,UAAY,EAEpC,CAEA,eAAeS,GAAgBC,EAAK,CAClC,MAAM5F,EAAY,SAAS,cAAc,oBAAoB,EAC7D,GAAI,CAACA,EAAW,OAEhB,MAAM6E,EAAW7E,EAAU,cAAc,kBAAkB,EAK3D,GAJI6E,GAAUA,EAAS,SAEvBP,EAAmB,CAAA,EAEf,MAAM,QAAQsB,CAAG,GAAKA,EAAI,OAAS,EACrC,GAAI,CACF,MAAMC,EAAWD,EAAI,IAAIE,GAAMhB,GAAkBgB,EAAG,KAAM,CAAA,CAAC,GAC3C,MAAM,QAAQ,IAAID,CAAQ,GAClC,QAAQnI,GAAQ,CAClBA,GAAM4G,EAAiB,KAAK5G,CAAI,CAC5C,CAAO,CACF,OAAQN,EAAO,CACd,QAAQ,MAAM,iBAAkBA,CAAK,CACtC,CAGH,GAAIkH,EAAiB,SAAW,EAAG,CACjCG,KACA,MACD,CAEDxE,EAAc,EACd8E,EAAyB,CAAC,CAC5B,CAEO,SAASgB,IAAuB,CACrC,MAAM9C,EAAYR,IAClBQ,EAAU,OAAS0C,GAAgB1C,CAAS,EAAIwB,GAAkB,CACpE,CAEA,IAAIuB,GACJ,OAAO,iBAAiB,SAAU,IAAM,CACtC,aAAaA,EAAa,EAC1BA,GAAgB,WAAW,IAAM,CAC3B1B,EAAiB,OAAS,GAC5BS,EAAyB9E,CAAW,CAEvC,EAAE,GAAG,CACR,CAAC,EAED,MAAMgG,EAAU,SAAS,cAAc,oBAAoB,EAEvDA,GACFA,EAAQ,iBAAiB,QAASC,GAAS,CACzC,MAAMC,EAAYD,EAAM,OAAO,QAAQ,uBAAuB,EAE9D,GAAIC,EAAW,CACb,MAAMC,EAAaD,EAAU,QAAQ,GAErC,GAAIC,EAAY,CACd,GAAIH,EAAQ,MAAM,gBAAkB,OAAQ,OAC5CA,EAAQ,MAAM,cAAgB,OAE9B9B,KACAhB,GAAeiD,CAAU,EACzBL,KACA3B,KAEA,WAAW,IAAM,CACf6B,EAAQ,MAAM,cAAgB,MAC/B,EAAE,GAAG,CACP,CACF,CACL,CAAG,EAGHF,GAAsB,ECrOtB,IAAIM,EAAO,KACPC,GAAgB,GACpB,MAAMC,GAAa,CAAA,EAEZ,SAASC,GAAkBC,EAAMC,EAAcC,EAAQ,CAC5DJ,GAAWE,CAAI,EAAI,CACjB,WAAYC,EACZ,KAAMC,CACV,CACA,CAEA,SAASC,GAAW,CACdN,KAEJD,EAAO,CACL,MAAO,SAAS,eAAe,gBAAgB,EAC/C,SAAU,SAAS,cAAc,oBAAoB,EACrD,SAAU,SAAS,cAAc,4BAA4B,EAC7D,KAAM,SAAS,cAAc,mBAAmB,CACpD,EAEEC,GAAgB,GAClB,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoB,IAAM,CAClDM,GACJ,CAAG,EAEDA,IAGK,SAASC,IAAmB,CACZ,SAAS,iBAAiB,cAAc,EAEhD,QAAQ/C,GAAU,CAC7B,GAAIA,EAAO,aAAa,wBAAwB,EAC9C,OAGF,MAAMgD,EAAYhD,EAAO,aAAa,YAAY,EAElD,GAAI,CAACyC,GAAWO,CAAS,EAAG,CAC1B,QAAQ,KAAK,eAAeA,CAAS,qBAAqB,EAC1D,MACD,CAEDhD,EAAO,iBAAiB,QAAS,IAAM,CACrC,KAAM,CAAE,WAAAiD,EAAY,KAAAC,CAAM,EAAGT,GAAWO,CAAS,EAE3C3H,EAAU4H,IAChB,GAAI,CAAC5H,EAAS,CACZ,QAAQ,MAAM,yCAAyC2H,CAAS,GAAG,EACnE,MACD,CAEDG,GAAU9H,CAAO,EAEb6H,GACF,WAAW,SAAY,CACrB,GAAI,CACF,MAAMA,EAAKE,CAAU,CACtB,OAAQ9J,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CACjD,CACF,EAAE,GAAG,CAEd,CAAK,EAED0G,EAAO,aAAa,yBAA0B,MAAM,CACxD,CAAG,CACH,CAEO,SAASmD,GAAU9H,EAAS,SAGjC,GAFAyH,IAEI,CAACP,GAAQ,CAACA,EAAK,OAAS,CAACA,EAAK,KAAM,CACtC,QAAQ,MAAM,mCAAmC,EACjD,MACD,CAED,GAAI,OAAOlH,GAAY,SACrBkH,EAAK,KAAK,UAAYlH,UACbA,aAAmB,YAC5BkH,EAAK,KAAK,UAAY,GACtBA,EAAK,KAAK,YAAYlH,CAAO,MACxB,CACL,QAAQ,MAAM,sDAAsD,EACpE,MACD,CAEDkH,EAAK,MAAM,UAAU,OAAO,QAAQ,EACpC,SAAS,KAAK,UAAU,IAAI,YAAY,EAExC,SAAS,iBAAiB,UAAWc,GAAc,CAAE,KAAM,EAAK,CAAE,GAClE5J,EAAA8I,EAAK,WAAL,MAAA9I,EAAe,iBAAiB,QAAS6J,KACzC9J,EAAA+I,EAAK,WAAL,MAAA/I,EAAe,iBAAiB,QAAS+J,GAC3C,CAEO,SAASH,GAAa,SAG3B,GAFAN,IAEI,CAACP,GAAQ,CAACA,EAAK,MAAO,OAE1BA,EAAK,MAAM,UAAU,IAAI,QAAQ,EACjC,SAAS,KAAK,UAAU,OAAO,YAAY,EAE3C,SAAS,oBAAoB,UAAWc,EAAY,GACpD5J,EAAA8I,EAAK,WAAL,MAAA9I,EAAe,oBAAoB,QAAS6J,KAC5C9J,EAAA+I,EAAK,WAAL,MAAA/I,EAAe,oBAAoB,QAAS+J,IAExChB,GAAQA,EAAK,OACfA,EAAK,KAAK,UAAY,IAEI,SAAS,cAAc,iBAAiB,GAC3CN,IAC3B,CAEA,SAASuB,IAAqB,CAC5B,MAAMC,EAAe,SAAS,eAAe,eAAe,EAC5D,OAAOA,GAAgB,CAACA,EAAa,UAAU,SAAS,QAAQ,CAClE,CAEA,SAASJ,GAAajB,EAAO,CAC3B,GAAIA,EAAM,MAAQ,SAAU,CAC1B,GAAIoB,GAAkB,EACpB,OAEFJ,GACD,CACH,CAEA,SAASE,GAAoBlB,EAAO,CAClC,GAAIA,EAAM,SAAWG,EAAK,SAAU,CAClC,GAAIiB,GAAkB,EACpB,OAEFJ,GACD,CACH,CAEA,SAASG,IAAyB,CAC5BC,GAAkB,GAGtBJ,GACF,CCrJA,MAAM7C,GAAM,IAAIrH,EAET,SAASwK,IAA0B,CACxC,MAAMC,EAAgB,SAAS,eAAe,yBAAyB,EAEvE,GAAI,CAACA,EACH,eAAQ,MACN,yFACN,EACW,KAGT,MAAMC,EAAWD,EAAc,QAAQ,UAAU,EAAI,EAC/CtI,EAAUuI,EAAS,mBAAqBA,EAAS,WAEvD,OAAKvI,IACH,QAAQ,MAAM,kDAAkD,EACzD,KAIX,CAEO,eAAewI,GAAkBC,EAAc,OACpD,MAAMC,EAAY,SAAS,cAAc,mBAAmB,EACtDC,EAAQD,GAAA,YAAAA,EAAW,cAAc,mBAEvC,GAAI,CAACA,GAAa,CAACC,EAAO,CACxB,QAAQ,MAAM,wCAAwC,EACtD,MACD,CAED,MAAMC,EAASD,EAAM,cAAc,yBAAyB,EACxDC,GACFA,EAAO,UAAU,OAAO,QAAQ,EAGlC,IAAI7E,EACF,eAAe,QAAQ,yBAAyB,KAChD3F,EAAA,SACG,cAAc,2CAA2C,IAD5D,YAAAA,EAEI,aAAa,qBAMnB,GAJI2F,GACF,eAAe,WAAW,yBAAyB,EAGjD,CAACA,EAAY,CACX6E,GAAQA,EAAO,UAAU,IAAI,QAAQ,EACzC7J,EAAU,wBAAwB,EAClC,MACD,CAED,IAAIsF,EACJ,GAAI,CACFA,EAAW,MAAMa,GAAI,gBAAgBnB,CAAU,EAC/CM,EAAS,GAAKA,EAAS,IAAMA,EAAS,GACvC,OAAQtE,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,EACzC6I,GAAQA,EAAO,UAAU,IAAI,QAAQ,EACzC7J,EAAUgB,EAAI,SAAW,qCAAqC,EAC9D4I,EAAM,UAAY,6CAClB,MACD,CAEDE,GAAmBF,EAAOtE,CAAQ,EAE9BuE,GACFA,EAAO,UAAU,IAAI,QAAQ,EAG/B,MAAME,EAAeH,EAAM,cAAc,gBAAgB,EACrDG,GACF1E,GAAiBC,EAAUyE,CAAY,EAGzC,MAAMC,EAAYJ,EAAM,cAAc,8BAA8B,EAChEI,GAAa,CAACA,EAAU,aAAa,wBAAwB,GAC/DrB,IAEJ,CAEA,SAASmB,GAAmBhI,EAAWwD,EAAU,CAC/C,MAAM2E,EAAUnI,EAAU,cAAc,wBAAwB,EAC1DoI,EAAgBpI,EAAU,cAC9B,+BACJ,EACQqI,EAAiBrI,EAAU,cAAc,wBAAwB,EACjEsI,EAAQtI,EAAU,cAAc,sBAAsB,EACtDuI,EAAWvI,EAAU,cAAc,yBAAyB,EAC5DwI,EAAaxI,EAAU,cAAc,2BAA2B,EAChEyI,EAAczI,EAAU,cAAc,4BAA4B,EAClE0I,EAAY1I,EAAU,cAAc,0BAA0B,EAC9D2I,EAAa3I,EAAU,cAAc,2BAA2B,EAChE4I,EAAgB5I,EAAU,cAAc,8BAA8B,EACtEiI,EAAejI,EAAU,cAAc,gBAAgB,EACvDkI,EAAYlI,EAAU,cAAc,8BAA8B,EAGpEmI,IAASA,EAAQ,YAAc3E,EAAS,MAAQ,IAGpD,MAAMqF,EAASrF,EAAS,QAAU,EAsBlC,GArBI4E,IACFA,EAAc,YAAcS,EAAO,QAAQ,CAAC,GAE1CR,IACFA,EAAe,UAAYS,GAAYD,CAAM,GAI3CP,IACFA,EAAM,IAAM9E,EAAS,QAAU,GAC/B8E,EAAM,IAAM9E,EAAS,MAAQ,gBAI3B+E,IAAUA,EAAS,YAAcQ,GAAgBvF,EAAS,QAAU,EAAE,GACtEgF,IACFA,EAAW,YAAcO,GAAgBvF,EAAS,UAAY,EAAE,GAC9DiF,IACFA,EAAY,YAAcM,GAAgBvF,EAAS,WAAa,EAAE,GAGhEkF,EAAW,CACb,MAAMM,EAAaxF,EAAS,YAAc,EACtCwF,GAAc,IAChBN,EAAU,aACPM,EAAa,KAAM,QAAQ,CAAC,EAAE,QAAQ,OAAQ,EAAE,EAAI,IAEvDN,EAAU,YAAcM,EAAW,UAEtC,CAGD,GAAIL,EAAY,CACd,MAAMM,EAAWzF,EAAS,eACpB0F,EAAoBP,EAAW,QAAQ,GAAG,EAEhD,GAAIM,GAAYA,EAAW,EAAG,CAC5B,MAAME,EAAO3F,EAAS,MAAQ,EAC9BmF,EAAW,YAAc,GAAGM,CAAQ,IAAIE,CAAI,OACxCD,IACFA,EAAkB,MAAM,QAAU,GAE1C,MACUA,IACFA,EAAkB,MAAM,QAAU,OAGvC,CAGGN,IACFA,EAAc,YACZpF,EAAS,aAAeA,EAAS,cAAgB,IAIjDyE,GACFA,EAAa,aAAa,UAAWzE,EAAS,IAAMA,EAAS,KAAO,EAAE,EAGpE0E,GACFA,EAAU,aACR,mBACA1E,EAAS,IAAMA,EAAS,KAAO,EACrC,CAEA,CAEA,SAASsF,GAAYD,EAAQ,CAE3B,MAAMO,EADgB,KAAK,MAAMP,CAAM,EAEjCQ,EAAa,EAAID,EAEvB,IAAIE,EAAY,GAEhB,MAAMC,EACJ,ooBAEF,QAAS,EAAI,EAAG,EAAIH,EAAW,IAC7BE,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAWAC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,MAOvB,QAAS,EAAI,EAAG,EAAIF,EAAY,IAC9BC,GAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAWAC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,MAQvB,OAAOD,CACT,CAEA,SAASP,GAAgBjJ,EAAK,CAC5B,OAAKA,EACEA,EAAI,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAI,MAAM,CAAC,EAD/B,EAEnB,CC3NA,MAAMuE,GAAM,IAAIrH,EAEhB,SAASwM,IAAe,CACtB,OAAO,OAAO,WAAa,IAAM,EAAI,EACvC,CAEA,IAAIC,EAAe,CACjB,KAAM,aACN,OAAQ,QACR,QAAS,EACX,EAEIxJ,GAAc,EACdyJ,GAAoB,EACpBC,EAAgB,EAChBC,GAAoB,GAEjB,eAAeC,GAAkB,CACtC,KAAArI,EAAO,EACP,KAAAiF,EACA,OAAAqD,EACA,QAAAC,CACF,EAAI,GAAI,CACN,MAAM9E,EAAS,SAAS,cAAc,oBAAoB,EAC1D,GAAI,CAACA,EAAQ,OAEb,MAAM+E,EAAQR,KAEV/C,IAAS,SAAWgD,EAAa,KAAOhD,GACxCqD,IAAW,SAAWL,EAAa,OAASK,GAC5CC,IAAY,SAAWN,EAAa,QAAUM,GAElD,MAAME,EAAaR,EAAa,KAC1BS,EAAeT,EAAa,OAC5BU,EAAgBV,EAAa,SAAW,GACxC9L,EAASyM,GAAqB,CAClC,KAAA5I,EACA,MAAAwI,EACA,KAAMC,EACN,OAAQC,EACR,QAASC,CACb,CAAG,EAEKE,EAAY,EAAEV,EAEpBxF,KAEA,GAAI,CACF,MAAMzG,EAAO,MAAM2G,GAAI,aAAa1G,CAAM,EAE1C,GAAI0M,IAAcV,EAAe,OAEjC,MAAMW,EAAQ5M,EAAK,SAAW,GAO9B,GANAuC,GAAcvC,EAAK,MAAQ8D,EAC3BkI,GAAoBhM,EAAK,YAAc,EACvC+B,GAAsB/B,CAAI,EAC1B6H,GAAoBN,EAAQqF,CAAK,EACjCC,GAA0BtK,GAAayJ,EAAiB,EAEnDY,EAAM,OAiBTV,GAAoB,OAjBH,CACjB,MAAMY,EAAW,GAAGP,CAAU,IAAIC,CAAY,IAAIC,GAAiB,EAAE,GAEjEK,IAAaZ,KACfA,GAAoBY,GAEhBL,GAAiB1D,IAAS,QAAaqD,IAAW,SACpD7L,EAAS,QAAQ,CACf,MAAO,aACP,QAASkM,EACL,sBAAsBA,CAAa,yBACnC,wCACJ,SAAU,UACtB,CAAW,EAGX,CAOI,GAFE1D,IAAS,QAAaqD,IAAW,QAAaC,IAAY,OAEvC,CACnB,MAAMtM,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EACxCA,EAAI,aAAa,IAAI,OAAQwM,CAAU,EACvCxM,EAAI,aAAa,IAAI,SAAUyM,CAAY,EAEvCC,EAAe1M,EAAI,aAAa,IAAI,UAAW0M,CAAa,EAC3D1M,EAAI,aAAa,OAAO,SAAS,EAEtC,OAAO,QAAQ,UAAU,CAAE,EAAE,GAAIA,CAAG,CACrC,CACF,OAAQyB,EAAK,CAGZ,GAFA,QAAQ,MAAM,4BAA6BA,CAAG,EAE1CmL,IAAcV,EAAe,OAE7B,OAAOzL,GAAc,WACvBA,EAAUgB,EAAI,SAAW,4CAA4C,EAErEjB,EAAS,MAAM,CACb,MAAO,QACP,QAASiB,EAAI,SAAW,6CACxB,SAAU,UAClB,CAAO,EAGH+F,EAAO,UAAY;AAAA;AAAA;AAAA;AAAA,KAKvB,QAAY,CACJoF,IAAcV,GAChBvF,IAEH,CACH,CAEA,SAASgG,GAAqB,CAAE,KAAA5I,EAAM,MAAAwI,EAAO,KAAAvD,EAAM,OAAAqD,EAAQ,QAAAC,GAAW,CACpE,MAAMpM,EAAS,CAAE,KAAA6D,EAAM,MAAAwI,GAIvB,OAFID,IAASpM,EAAO,QAAUoM,GAEtBtD,EAAI,CACV,IAAK,aACH9I,EAAO,SAAWmM,EAClB,MACF,IAAK,UACHnM,EAAO,QAAUmM,EACjB,MACF,IAAK,YACHnM,EAAO,UAAYmM,EACnB,MACF,QACEnM,EAAO,SAAWmM,CACrB,CAED,OAAOnM,CACT,CAEO,SAAS4H,GAAoBN,EAAQqF,EAAOxH,EAAa,GAAO,CACrE,GAAI,CAACwH,EAAM,OAAQ,CACjBrF,EAAO,UAAY;AAAA;AAAA;AAAA;AAAA,MAKnB,MACD,CAED,MAAMwF,EAASH,EACZ,IAAIxE,GAAM4E,GAAyB5E,EAAIhD,CAAU,CAAC,EAClD,KAAK,EAAE,EACVmC,EAAO,UAAYwF,EACnBE,GAAwB1F,CAAM,CAChC,CAEA,SAASyF,GAAyBpL,EAAMwD,EAAa,GAAO,CAC1D,KAAM,CAAE,KAAA8H,EAAM,eAAAC,EAAgB,SAAAC,EAAU,OAAAC,EAAQ,KAAA5B,EAAM,OAAAN,EAAQ,IAAAmC,CAAK,EAAG1L,EAChE2L,EAAenI,EACjB,+DAA+DkI,CAAG;AAAA;AAAA;AAAA;AAAA,kBAKlE;AAAA,6CACuCnC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAQjD,MAAO;AAAA,oDAC2CmC,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA,YAK3CC,CAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAOMD,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAaKJ,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAMQC,CAAc,MAAM1B,CAAI;AAAA;AAAA;AAAA;AAAA,kDAIxB2B,CAAQ;AAAA;AAAA;AAAA;AAAA,kDAIRC,CAAM;AAAA;AAAA;AAAA;AAAA,GAKxD,CAEO,SAASR,GAA0BtK,EAAaC,EAAY,OACjE,MAAMF,EAAY,SAAS,cAAc,0BAA0B,EAC9DA,IAELD,GAA0B,CACxB,UAAAC,EACA,YAAAC,EACA,WAAAC,EACA,KAAM,YAEN,aAAcA,EAAa,EAC3B,WAAYA,EAAa,EAEzB,QAAS,CACP,KAAM,kBACN,OAAQ,SACR,KAAM,uBACN,KAAM,sBACP,EAED,aAAc,aACd,aAAcsB,GAAQqI,GAAkB,CAAE,KAAArI,CAAI,CAAE,CACpD,CAAG,GAEDjE,EAAA,SACG,cAAc,oBAAoB,IADrC,MAAAA,EAEI,eAAe,CAAE,SAAU,QAAQ,GACzC,CAGA,SAASoN,GAAwB1F,EAAQ,CAClBA,EAAO,iBAC1B,yCACJ,EAEe,QAAQnB,GAAU,CACzBA,EAAO,aAAa,6BAA6B,IAIrDA,EAAO,iBAAiB,QAASoH,EAAwB,EACzDpH,EAAO,aAAa,8BAA+B,MAAM,EAC7D,CAAG,CACH,CAEA,eAAeoH,GAAyBhF,EAAO,CAE7C,MAAMhD,EADSgD,EAAM,cACK,aAAa,kBAAkB,EAEzD,GAAI,CAAChD,EAAY,CACf,QAAQ,MAAM,wBAAwB,EACtC,MACD,CAED,eAAe,QAAQ,0BAA2BA,CAAU,EAE5D,MAAM/D,EAAUqI,KAChB,GAAI,CAACrI,EAAS,CACZ,QAAQ,MAAM,sCAAsC,EACpD,MACD,CAED8H,GAAU9H,CAAO,EACjB,GAAI,CACF,MAAMwI,GAAkBT,CAAU,CACnC,OAAQ9J,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CAC1D,CACH,EC5SC,IAAM,CACL,KAAM,CACJ,WAAY+N,EACZ,kBAAmBC,EACnB,mBAAoBC,CACrB,EAAGtO,GAEJ,GAAI,CAACqO,GAAe,CAACD,GAAQ,CAACE,EAAc,OAE5C,MAAMC,EAAa,IAAM,CACvBH,EAAK,UAAU,OAAO,SAAS,EAC/B,SAAS,KAAK,UAAU,OAAO,WAAW,CAC9C,EAEEC,EAAY,iBAAiB,QAASE,CAAU,EAChDD,EAAa,iBAAiB,QAASC,CAAU,EAEjD,OACG,WAAW,oBAAoB,EAC/B,iBAAiB,SAAUC,GAAK,CAC1BA,EAAE,UACPJ,EAAK,UAAU,OAAO,SAAS,EAC/B,SAAS,KAAK,UAAU,OAAO,WAAW,EAChD,CAAK,CACL,GAAI,EC1BJ,MAAMK,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,GAAIA,EAAgB,CAClB,IAASC,EAAT,SAA2BC,EAAW,IAAM,CAC1C,MAAMC,EAAQ,OAAO,QACfC,EAAY,YAAY,MAE9B,SAASC,EAAWC,EAAa,CAC/B,MAAMC,EAAUD,EAAcF,EACxBI,EAAW,KAAK,IAAID,EAAUL,EAAU,CAAC,EACzCO,EAAO,EAAI,KAAK,IAAI,EAAID,EAAU,CAAC,EACzC,OAAO,SAAS,EAAGL,GAAS,EAAIM,EAAK,EAEjCD,EAAW,GACb,sBAAsBH,CAAU,CAEnC,CAED,sBAAsBA,CAAU,CACjC,EAED,OAAO,iBAAiB,SAAU,IAAM,CAClC,OAAO,QAAU,IACnBL,EAAe,UAAU,IAAI,MAAM,EAEnCA,EAAe,UAAU,OAAO,MAAM,CAE5C,CAAG,EAEDA,EAAe,iBAAiB,QAAUD,GAAM,CAC9CA,EAAE,eAAc,EAChBE,GACJ,CAAG,CACH,CC7BA,IAAIS,EAAmB,KACnBC,GAAkB,KAClBC,GAAiB,KAErB,SAASC,IAAkB,iBACzB,GAAIH,EAAkB,OAEtB,MAAMpE,EAAQ,SAAS,eAAe,eAAe,EACrD,GAAI,CAACA,EAAO,CACV,QAAQ,MAAM,yBAAyB,EACvC,MACD,CAEDoE,EAAmB,CACjB,MAAApE,EACA,SAAUA,EAAM,cAAc,sBAAsB,EACpD,QAASA,EAAM,cAAc,wBAAwB,EACrD,UAAWA,EAAM,cAAc,uBAAuB,EACtD,WAAYA,EAAM,cAAc,mBAAmB,CACvD,GAEEvK,EAAA2O,EAAiB,WAAjB,MAAA3O,EAA2B,oBAAoB,QAAS6J,GAAqB,CAC3E,QAAS,EACb,IACE9J,EAAA4O,EAAiB,YAAjB,MAAA5O,EAA4B,oBAAoB,QAASgP,EAAc,CACrE,QAAS,EACb,IACEC,EAAAL,EAAiB,aAAjB,MAAAK,EAA6B,oBAAoB,QAASC,GAAe,CACvE,QAAS,EACb,IAEEC,EAAAP,EAAiB,WAAjB,MAAAO,EAA2B,iBAAiB,QAASrF,GAAqB,CACxE,QAAS,EACb,IACEsF,EAAAR,EAAiB,YAAjB,MAAAQ,EAA4B,iBAAiB,QAASJ,EAAc,CAClE,QAAS,EACb,IACEK,EAAAT,EAAiB,aAAjB,MAAAS,EAA6B,iBAAiB,QAASH,GAAe,CACpE,QAAS,EACb,EACA,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBH,EAAe,EAE7DA,KAGF,SAASlF,GAAajB,EAAO,CAEzBA,EAAM,MAAQ,UACdgG,GACA,CAACA,EAAiB,MAAM,UAAU,SAAS,QAAQ,GAEnDI,GAEJ,CAEA,SAASlF,GAAoBlB,EAAO,CAC9BA,EAAM,SAAWgG,EAAiB,WACpChG,EAAM,gBAAe,EACrBA,EAAM,eAAc,EACpBoG,EAAapG,CAAK,EAEtB,CAEA,SAASoG,EAAapG,EAAO,CACvBA,IACFA,EAAM,gBAAe,EACrBA,EAAM,eAAc,GAEtB,MAAM0G,EAAWR,GACjBS,KACID,GACFA,GAEJ,CAEA,SAASJ,GAActG,EAAO,CACxBA,IACFA,EAAM,gBAAe,EACrBA,EAAM,eAAc,GAGtB,MAAM0G,EAAWT,GACjBU,KACA,WAAW,IAAM,CACXD,GACFA,GAEH,EAAE,CAAC,CACN,CAEO,SAASE,GAAiBjP,EAASkP,EAAWC,EAAW,KAAM,CAGpE,GAFAX,KAEI,CAACH,GAAoB,CAACA,EAAiB,MAAO,CAChD,QAAQ,MAAM,kCAAkC,EAChD,MACD,CAEDC,GAAkBY,EAClBX,GAAiBY,EAEbd,EAAiB,UACnBA,EAAiB,QAAQ,YAAcrO,GAGzCqO,EAAiB,MAAM,UAAU,OAAO,QAAQ,EAChD,SAAS,iBAAiB,UAAW/E,GAAc,CAAE,KAAM,EAAI,CAAE,CACnE,CAEO,SAAS0F,IAAoB,CAC9B,CAACX,GAAoB,CAACA,EAAiB,QAE3CA,EAAiB,MAAM,UAAU,IAAI,QAAQ,EAC7CC,GAAkB,KAClBC,GAAiB,KACnB,CCrHA,MAAM/H,GAAM,IAAIrH,EAEhB,IAAIiQ,EAAoB,KAEjB,SAASC,IAAwB,CACtC,MAAMC,EAAsB,SAAS,cAAc,eAAe,EAElE,GAAI,CAACA,EACH,eAAQ,MACN,oFACN,EACW,KAGT,MAAMC,EAAcD,EAAoB,UAAU,EAAI,EACtD,OAAAE,GAAiBD,CAAW,EAErBA,CACT,CAEA,SAASE,IAAyB,CAChC,SAAS,iBACP,QACA,SAAUpH,EAAO,CACf,MAAMpC,EAASoC,EAAM,OAAO,QAAQ,uBAAuB,EAC3D,GAAIpC,EAAQ,CACV,MAAMZ,EAAaY,EAAO,aAAa,kBAAkB,EACrDZ,GACF,eAAe,QAAQ,wBAAyBA,CAAU,CAE7D,CACF,EACD,CAAE,QAAS,EAAM,CACrB,CACA,CAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBoK,EAAsB,EAEpEA,KAGF,SAASD,GAAiBE,EAAS,CACjC,MAAMC,EAAiBD,EAAQ,iBAAiB,MAAM,EAChDE,EAAY,KAAK,MAEvBD,EAAe,QAAQlL,GAAM,CAC3B,MAAMoL,EAAQpL,EAAG,GACjBA,EAAG,GAAK,GAAGoL,CAAK,IAAID,CAAS,GAEdF,EAAQ,iBAAiB,cAAcG,CAAK,IAAI,EACxD,QAAQnM,GAAS,CACtBA,EAAM,aAAa,MAAOe,EAAG,EAAE,CACrC,CAAK,CACL,CAAG,CACH,CAMA,SAASqL,IAAkB,CACzB,MAAM9F,EAAY,SAAS,cAAc,mBAAmB,EACtD+F,EAAc/F,GAAA,YAAAA,EAAW,cAAc,iBAE7C,GAAI,CAAC+F,EAAa,OAElB,MAAMC,EAAOD,EAAY,cAAc,qBAAqB,EACtDE,EAAcF,EAAY,cAAc,sBAAsB,EAC9DG,EAAaH,EAAY,cAAc,4BAA4B,EACnEI,EAAaJ,EAAY,cAAc,qBAAqB,EAC5DK,EAAkBL,EAAY,cAAc,0BAA0B,EACtEM,EAAQN,EAAY,iBAAiB,cAAc,EAErDC,GAAMA,EAAK,QACXC,IAAaA,EAAY,MAAQ,KACjCE,IAAYA,EAAW,MAAQ,IAC/BC,IAAiBA,EAAgB,MAAQ,IACzCF,IAAYA,EAAW,YAAc,IAEzCG,EAAM,QAAQC,GAAQ,CACpBA,EAAK,UAAU,OAAO,QAAQ,CAClC,CAAG,CACH,CAEO,SAASC,GAAuBxG,EAAc,CAC/CqF,GAAqBA,IACvBH,GACE,wDACA,IAAM,CACJa,KACAV,EAAoB,KACpBrF,GACD,EACD,IAAM,CAAE,CACd,GAEI+F,KACAV,EAAoB,KACpBrF,IAEJ,CAEO,SAASyG,GAAgBzG,EAAc,OAC5CqF,EAAoB,KAEpB,MAAMpF,EAAY,SAAS,cAAc,mBAAmB,EACtD+F,EAAc/F,GAAA,YAAAA,EAAW,cAAc,iBAE7C,GAAI,CAACA,GAAa,CAAC+F,EAAa,CAC9B,QAAQ,MAAM,sCAAsC,EACpD,MACD,CAED,IAAI1K,EACF,eAAe,QAAQ,uBAAuB,KAC9C3F,EAAA,SACG,cAAc,yCAAyC,IAD1D,YAAAA,EAEI,aAAa,qBAMnB,GAJI2F,GACF,eAAe,WAAW,uBAAuB,EAG/C,CAACA,EAAY,CACfhF,EAAU,wBAAwB,EAClC,MACD,CAED,MAAMgQ,EAAQN,EAAY,iBAAiB,cAAc,EACnDE,EAAcF,EAAY,cAAc,sBAAsB,EAC9DG,EAAaH,EAAY,cAAc,4BAA4B,EACnEU,EAAYV,EAAY,cAAc,4BAA4B,EAClEW,EAAYX,EAAY,cAC5B,mCACJ,EACQI,EAAaJ,EAAY,cAAc,qBAAqB,EAC5DK,EAAkBL,EAAY,cAAc,0BAA0B,EACtEC,EAAOD,EAAY,cAAc,qBAAqB,EAE5D,IAAIY,EAAgB,EAChBD,IAAWA,EAAU,SAAW,IAChCT,IAAaA,EAAY,MAAQ,KACjCC,IAAYA,EAAW,YAAc,KAEzC,MAAMU,EAAc,IAEhBD,EAAgB,GAChBA,GAAiB,IACjBR,GAAA,YAAAA,EAAY,MAAM,UAAW,KAC7BC,GAAA,YAAAA,EAAiB,MAAM,UAAW,GAIhCS,EAAqB,IAAM,CAC3BH,IACFA,EAAU,SAAW,CAACE,IAE5B,EAUExB,EARwB,IAEpBuB,EAAgB,IAChBR,GAAA,YAAAA,EAAY,MAAM,UAAW,KAC7BC,GAAA,YAAAA,EAAiB,MAAM,UAAW,GAMtC,MAAMU,EAAc9F,GAAU,CAC5BqF,EAAM,QAAQ,CAACC,EAAM5O,IAAU,CACVA,EAAQ,GACTsJ,EAChBsF,EAAK,UAAU,IAAI,QAAQ,EAE3BA,EAAK,UAAU,OAAO,QAAQ,CAEtC,CAAK,CACL,EAEED,EAAM,QAAQ,CAACC,EAAM5O,IAAU,CAC7B,MAAMsJ,EAAStJ,EAAQ,EAEvB4O,EAAK,iBAAiB,QAAS,IAAM,CACnCK,EAAgB3F,EAChB8F,EAAY9F,CAAM,EACdiF,IAAaA,EAAY,MAAQjF,GACjCkF,IAAYA,EAAW,YAAclF,GACzC6F,GACN,CAAK,CACL,CAAG,EAED,CAACV,EAAYC,CAAe,EAAE,QAAQW,GAAS,CACzCA,GACFA,EAAM,iBAAiB,QAASF,CAAkB,CAExD,CAAG,EAYD,MAAMG,EAAW,SAAS,cAAc,oBAAoB,EAEtDvH,EAAqB,IAAM,CAC/B,MAAMC,EAAe,SAAS,eAAe,eAAe,EAC5D,OAAOA,GAAgB,CAACA,EAAa,UAAU,SAAS,QAAQ,CACpE,EAEQuH,EAAsB5I,GAAS,CACnC,GAAIA,EAAM,MAAQ,SAAU,CAC1B,GAAIoB,EAAkB,EACpB,OAEFpB,EAAM,gBAAe,EACrBkI,GAAuB,IAAM,CAC3BW,IACAnH,GACR,CAAO,CACF,CACL,EAEQoH,EAAuB9I,GAAS,CACpC,GAAIA,EAAM,SAAW2I,EAAU,CAC7B,GAAIvH,EAAkB,EACpB,OAEFpB,EAAM,gBAAe,EACrBkI,GAAuB,IAAM,CAC3BW,IACAnH,GACR,CAAO,CACF,CACL,EAEQmH,EAAU,IAAM,CACpB,SAAS,oBAAoB,UAAWD,EAAqB,CAC3D,QAAS,EACf,CAAK,EACDD,GAAA,MAAAA,EAAU,oBAAoB,QAASG,EAAsB,CAC3D,QAAS,EACf,GACIC,GAAA,MAAAA,EAAU,oBAAoB,QAASC,EAAiB,CAAE,QAAS,EAAI,EAC3E,EAEQD,EAAW,SAAS,cAAc,4BAA4B,EAC9DC,EAAkBhJ,GAAS,CAC3BoB,EAAkB,IAGtBpB,EAAM,gBAAe,EACrBiJ,IACJ,EAEE,SAAS,iBAAiB,UAAWL,EAAqB,CAAE,QAAS,EAAI,CAAE,EAC3ED,GAAA,MAAAA,EAAU,iBAAiB,QAASG,EAAsB,CAAE,QAAS,EAAI,GACzEC,GAAA,MAAAA,EAAU,iBAAiB,QAASC,EAAiB,CAAE,QAAS,EAAI,GAEpE,MAAMC,EAAc,IAAM,CACxBf,GAAuB,IAAM,CAC3BW,IACAnH,GACN,CAAK,CACL,EAEM0G,GAAa1G,GACf0G,EAAU,iBAAiB,QAAS,IAAM,CACxCa,GACN,CAAK,EAGCtB,IACFA,EAAK,aAAa,qBAAsB,MAAM,EAE9CA,EAAK,iBAAiB,SAAU,MAAMtC,GAAK,CAGzC,GAFAA,EAAE,eAAc,EAEZ,CAACkD,EAAW,EAAI,CAClBvQ,EAAU,2BAA2B,EACrC,MACD,CAED,MAAMkR,EAAW,IAAI,SAASvB,CAAI,EAC5BhF,EAAS,SAASuG,EAAS,IAAI,QAAQ,EAAG,EAAE,EAC5CC,GAAQD,EAAS,IAAI,OAAO,EAAE,KAAI,EAClCE,GAAUF,EAAS,IAAI,SAAS,EAAE,KAAI,EAExCb,IACFA,EAAU,SAAW,GACrBA,EAAU,YAAc,cAG1B,GAAI,CACF,MAAMlK,GAAI,aAAanB,EAAY,CACjC,KAAM2F,EACN,MAAOwG,GACP,OAAQC,EAClB,CAAS,EAEDtR,GAAY,8BAA8B,EAC1CiP,EAAoB,KAEpB,WAAW,IAAM,CACXrF,IACFmH,IACAnH,IAEH,EAAE,GAAI,CACR,OAAQxK,GAAO,CACd,QAAQ,MAAM,2BAA4BA,EAAK,EAC/Cc,EAAUd,GAAM,SAAWN,EAAe,SAAS,EAE/CyR,IACFA,EAAU,SAAW,GACrBA,EAAU,YAAc,OAE3B,CACP,CAAK,EAEL"}