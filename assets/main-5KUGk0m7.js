import{a as st,i as N}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const it={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},h={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},B={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},at={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},w={EMAIL_REGEX:at.EMAIL,RATING_MIN:1,RATING_MAX:5},x={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},F={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},be={RATING:"rating",EXERCISE:"exercise"},C={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${w.RATING_MIN} and ${w.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},De={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class P{constructor(t=it.BASE_API_URL){this.baseURL=t,this.axios=st.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var o,s;const n=((s=(o=r.response)==null?void 0:o.data)==null?void 0:s.message)||r.message||C.API_ERROR;return console.error("API Error:",n),Promise.reject(r)})}async _request(t,r,n=null,o=null){var s,i;try{const c={method:t,url:r};return n&&(c.data=n),o&&(c.params=o),(await this.axios(c)).data}catch(c){const a=((i=(s=c.response)==null?void 0:s.data)==null?void 0:i.message)||c.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${a}`)}}async getFilters(t={}){return this._request("get",B.FILTERS,null,t)}async getExercises(t={}){return this._request("get",B.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(C.EXERCISE_ID_REQUIRED);return this._request("get",`${B.EXERCISES}/${t}`)}async getQuote(){return this._request("get",B.QUOTE)}async subscribe(t){if(!t.email||!w.EMAIL_REGEX.test(t.email))throw new Error(C.EMAIL_REQUIRED);return this._request("post",B.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(C.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<w.RATING_MIN||r.rate>w.RATING_MAX)throw new Error(C.RATING_RANGE);if(!r.email||!w.EMAIL_REGEX.test(r.email))throw new Error(C.EMAIL_REQUIRED);return this._request("patch",`${B.EXERCISES}/${t}/rating`,r)}}const le={position:x.POSITION.TOP_RIGHT,timeout:x.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:h.GRAY_LIGHT,transitionIn:x.TRANSITION.IN,transitionOut:x.TRANSITION.OUT,fontFamily:"inherit",icon:""},Fe=e=>{N.show({...le,title:x.TITLE.SUCCESS,message:e,backgroundColor:h.BLACK,titleColor:h.WHITE,messageColor:h.WHITE,icon:x.ICON.SUCCESS,iconColor:h.WHITE})},_=e=>{N.show({...le,title:x.TITLE.ERROR,message:e,backgroundColor:h.BLACK,titleColor:h.WHITE,messageColor:h.GRAY_LIGHT,progressBarColor:h.WHITE,icon:x.ICON.ERROR,iconColor:h.WHITE})},ct=e=>{N.show({...le,title:x.TITLE.INFO,message:e,backgroundColor:h.WHITE,titleColor:h.BLACK,messageColor:h.BLACK,progressBarColor:h.BLACK,borderBottom:`2px solid ${h.BLACK}`})},lt=new P,X={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function dt(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:n}=JSON.parse(e),o=new Date(n),s=new Date;if(o.getDate()===s.getDate()){$e(t,r);return}}ut()}dt();async function ut(){try{const e=await lt.getQuote(),{quote:t,author:r}=e,n={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(n)),$e(t,r)}catch(e){_(e.message||C.API_ERROR)}}function $e(e,t){X.content&&(X.content.textContent=e),X.author&&(X.author.textContent=t)}function Ce(e){if(!e||!e.results)return;const t={"@context":F.SCHEMA_CONTEXT,"@type":F.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,n)=>({"@type":F.SCHEMA_TYPES.LIST_ITEM,position:n+1,item:{"@type":F.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};ft("filters",t)}function ft(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=F.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function He({container:e,currentPage:t,totalPages:r,onPageChange:n,mode:o="full",showArrows:s=!1,classes:i={},icons:c={},scrollToTop:a=!0,scrollTarget:d=null}){if(!e)return;e.innerHTML="";const{page:f="",active:y="active",arrow:S=""}=i,L=(l,u,E="")=>{const v=document.createElement("button");return v.className=E,v.textContent=l,v.dataset.page=u,v};if(o==="full")for(let l=1;l<=r;l++){const u=L(l,l,f);l===t&&u.classList.add(y),e.appendChild(u)}else if(o==="neighbors"){let l=[];r<=3?l=Array.from({length:r},(u,E)=>E+1):t===1?l=[1,2,3]:t===r?l=[r-2,r-1,r]:l=[t-1,t,t+1],l.forEach(u=>{const E=L(u,u,`${f} ${u===t?y:""}`.trim());e.appendChild(E)})}e.querySelectorAll("button").forEach(l=>{l.addEventListener("click",()=>{const u=Number(l.dataset.page);if(!(Number.isNaN(u)||u===t)&&(n(u),a))if(d){const E=typeof d=="string"?document.querySelector(d):d;E&&E.scrollIntoView({behavior:"smooth",block:"start"})}else window.scrollTo({top:0,behavior:"smooth"})})})}const Ue="favorites";function ee(){const e=localStorage.getItem(Ue);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(n=>n.id||n._id).filter(Boolean);return de(r),r}return t}function de(e){localStorage.setItem(Ue,JSON.stringify(e))}function Te(e){return ee().includes(e)}function mt(e){const t=ee(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),de(t))}function Ge(e){const r=ee().filter(n=>n!==e);de(r)}const pt={};function gt(e,t=null){const r=t||De.favoriteBtn;if(!r)return;Object.assign(pt,e);const n=e.id||e._id,o=Te(n);re(r,o);const s=r.cloneNode(!0);r.parentNode.replaceChild(s,r),s.onclick=()=>{const i=e.id||e._id;Te(i)?(Ge(i),re(s,!1)):(mt(e),re(s,!0))}}function re(e,t){const r=Array.from(e.childNodes).filter(n=>n.nodeType===Node.TEXT_NODE&&n.textContent.trim());if(r.length>0)r[0].textContent=t?"Remove from favorites":"Add to favorites";else{const n=e.querySelector("svg"),o=document.createTextNode(t?"Remove from favorites":"Add to favorites");n?e.insertBefore(o,n):e.appendChild(o)}}const yt=new P;let ue=1,R=[];function Et(){return window.innerWidth>=1440}function ht(){return window.innerWidth>=768?10:8}function Xe(){const e=document.querySelector(".favorites-wrapper");if(!e)return;const t=e.querySelector(".favorites-content");t&&t.remove();const r=e.querySelector(".favorites-empty");r&&r.remove();const n=document.createElement("div");n.className="favorites-empty",n.innerHTML=`
    <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
  `,e.appendChild(n)}async function vt(e){try{const t=await yt.getExerciseById(e);if(t)return t}catch(t){console.error(`Failed to load exercise ${e}`,t)}}function fe(e=1){const t=document.querySelector(".favorites-wrapper");if(!t)return;let r=t.querySelector(".favorites-content");r||(r=document.createElement("div"),r.className="favorites-content",t.appendChild(r));let n=r.querySelector(".favorites-list");n||(n=document.createElement("ul"),n.className="favorites favorites-list",r.appendChild(n));let o=r.querySelector(".js-favorites-pagination");if(o||(o=document.createElement("div"),o.className="favorites-pagination js-favorites-pagination",r.appendChild(o)),Et()){ae(n,R,!0),o.innerHTML="";return}const s=ht(),i=(e-1)*s,c=i+s,a=R.slice(i,c);ae(n,a,!0);const d=Math.ceil(R.length/s);d>1?He({container:o,currentPage:e,totalPages:d,mode:"neighbors",classes:{page:"exercises__page",active:"active"},scrollToTop:!0,scrollTarget:".favorites-wrapper",onPageChange(f){ue=f,fe(f)}}):o.innerHTML=""}async function _t(e){const t=document.querySelector(".favorites-wrapper");if(!t)return;const r=t.querySelector(".favorites-empty");if(r&&r.remove(),R=[],Array.isArray(e)&&e.length>0)try{const o=e.map(i=>vt(i.trim()));(await Promise.all(o)).forEach(i=>{i&&R.push(i)})}catch(o){console.error("Error loading:",o)}if(R.length===0){Xe();return}ue=1,fe(1);const n=t.querySelector(".favorites-list");n&&n.addEventListener("click",o=>{const s=o.target.closest(".favorites-delete-btn");if(s){const i=s.dataset.id;i&&(Ge(i),me())}})}function me(){const e=ee();e.length?_t(e):Xe()}let we;window.addEventListener("resize",()=>{clearTimeout(we),we=setTimeout(()=>{R.length>0&&fe(ue)},250)});me();let p=null,qe=!1;const ie={};function Re(e,t,r){ie[e]={getContent:t,init:r}}function J(){qe||(p={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},qe=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{J()}):J();function We(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!ie[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:n,init:o}=ie[r],s=n();if(!s){console.error(`Failed to get content for modal type "${r}"`);return}je(s),o&&setTimeout(async()=>{try{await o(U)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function je(e){var t,r;if(J(),!p||!p.modal||!p.body){console.error("Modal template elements not found");return}if(typeof e=="string")p.body.innerHTML=e;else if(e instanceof HTMLElement)p.body.innerHTML="",p.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}p.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",Ye,{once:!1}),(t=p.backdrop)==null||t.addEventListener("click",Qe),(r=p.closeBtn)==null||r.addEventListener("click",ze)}function U(){var t,r;if(J(),!p||!p.modal)return;p.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Ye),(t=p.backdrop)==null||t.removeEventListener("click",Qe),(r=p.closeBtn)==null||r.removeEventListener("click",ze),p&&p.body&&(p.body.innerHTML=""),document.querySelector(".favorites-list")&&me()}function pe(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function Ye(e){if(e.key==="Escape"){if(pe())return;U()}}function Qe(e){if(e.target===p.backdrop){if(pe())return;U()}}function ze(){pe()||U()}const T={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function St(){T.loaderOverlay&&T.loaderOverlay.classList.remove("hidden"),T.loaderBg&&T.loaderBg.classList.add("bg-loader")}function Ke(){T.loaderOverlay&&T.loaderOverlay.classList.add("hidden"),T.loaderBg&&T.loaderBg.classList.remove("bg-loader")}const Lt=new P;function Je(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function Ve(e){var a;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const n=r.querySelector(".exercise-modal__loader");n&&n.classList.remove("hidden");let o=sessionStorage.getItem("exerciseModalExerciseId")||((a=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:a.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("exerciseModalExerciseId"),!o){n&&n.classList.add("hidden"),_("Exercise ID is missing");return}let s;try{s=await Lt.getExerciseById(o),s.id=s.id||s._id}catch(d){console.error("Failed to load exercise:",d),n&&n.classList.add("hidden"),_(d.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}xt(r,s),n&&n.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&gt(s,i);const c=r.querySelector(".exercise-modal__btn--rating");c&&!c.hasAttribute("data-modal-initialized")&&We()}function xt(e,t){const r=e.querySelector(".exercise-modal__title"),n=e.querySelector(".exercise-modal__rating-value"),o=e.querySelector(".exercise-modal__stars"),s=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),c=e.querySelector(".exercise-modal__bodypart"),a=e.querySelector(".exercise-modal__equipment"),d=e.querySelector(".exercise-modal__popular"),f=e.querySelector(".exercise-modal__calories"),y=e.querySelector(".exercise-modal__description"),S=e.querySelector(".favorites-btn"),L=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const l=t.rating||0;if(n&&(n.textContent=l.toFixed(1)),o&&(o.innerHTML=It(l)),s&&(s.src=t.gifUrl||"",s.alt=t.name||"Exercise GIF"),i&&(i.textContent=ne(t.target||"")),c&&(c.textContent=ne(t.bodyPart||"")),a&&(a.textContent=ne(t.equipment||"")),d){const u=t.popularity||0;u>=1e3?d.textContent=(u/1e3).toFixed(1).replace(/\.0$/,"")+"k":d.textContent=u.toString()}if(f){const u=t.burnedCalories,E=f.closest("p");if(u&&u>0){const v=t.time||3;f.textContent=`${u}/${v} min`,E&&(E.style.display="")}else E&&(E.style.display="none")}y&&(y.textContent=t.description||t.instructions||""),S&&S.setAttribute("data-id",t.id||t._id||""),L&&L.setAttribute("data-exercise-id",t.id||t._id||"")}function It(e){const r=Math.round(e),n=5-r;let o="";const s="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)o+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<n;i++)o+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return o}function ne(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}const bt=new P;function Ct(){return window.innerWidth<768?8:10}let k={type:"body-parts",filter:"waist",keyword:""},Ae=1,Me=1,W=0,oe="";async function A({page:e=1,type:t,filter:r,keyword:n}={}){const o=document.querySelector(".js-exercises-list");if(!o)return;const s=Ct();t!==void 0&&(k.type=t),r!==void 0&&(k.filter=r),n!==void 0&&(k.keyword=n);const i=k.type,c=k.filter,a=k.keyword||"",d=Tt({page:e,limit:s,type:i,filter:c,keyword:a}),f=++W;St();try{const y=await bt.getExercises(d);if(f!==W)return;const S=y.results||[];if(Ae=y.page||e,Me=y.totalPages||1,ae(o,S),qt(Ae,Me),S.length)oe="";else{const l=`${i}:${c}:${a||""}`;l!==oe&&(oe=l,(a||t!==void 0||r!==void 0)&&N.warning({title:"No results",message:a?`Nothing found for â€œ${a}â€. Try another search.`:"No exercises found for this category.",position:"topRight"}))}if(t!==void 0||r!==void 0||n!==void 0){const l=new URL(window.location.href);l.searchParams.set("type",i),l.searchParams.set("filter",c),a?l.searchParams.set("keyword",a):l.searchParams.delete("keyword"),window.history.pushState({},"",l)}}catch(y){if(console.error("Failed to load exercises:",y),f!==W)return;typeof _=="function"?_(y.message||"Failed to load exercises. Try again later."):N.error({title:"Error",message:y.message||"Failed to load exercises. Try again later.",position:"topRight"}),o.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}finally{f===W&&Ke()}}function Tt({page:e,limit:t,type:r,filter:n,keyword:o}){const s={page:e,limit:t};switch(o&&(s.keyword=o),r){case"body-parts":s.bodypart=n;break;case"muscles":s.muscles=n;break;case"equipment":s.equipment=n;break;default:s.bodypart=n}return s}function ae(e,t,r=!1){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const n=t.map(o=>wt(o,r)).join("");e.innerHTML=n,Rt(e)}function wt(e,t=!1){const{name:r,burnedCalories:n,bodyPart:o,target:s,time:i,rating:c,_id:a}=e,d=t?`<button type="button" class="favorites-delete-btn" data-id="${a}">
         <svg class="favorites-icon-trash" width="16" height="16" aria-label="Remove from favorites">
            <use href="./img/icons.svg#icon-trash"></use> 
         </svg>
       </button>`:`<div class="exercises__rating">
         <span class="exercises__meta-key">${c}</span>
         <span class="exercises__meta-value">
           <svg class="star" width="18" height="18">
             <use href="./img/icons.svg#icon-star"></use>
           </svg>
         </span>
       </div>`;return`
    <li class="exercises__item" data-exercise-id="${a}">
      <div class="exercises__item-top">
        <div class="exercises__item-info">
          <span class="exercises__badge">Workout</span>
          
          ${d} 
          
        </div>

        <button
          type="button"
          class="exercises__start-btn js-open-exercise"
          data-exercise-id="${a}"
        >
          Start
          <svg class="arrow__icon" width="16" height="16">
             <use href="./img/icons.svg#icon-arrow"></use>
          </svg>
        </button>
      </div>

      <div class="exercises__name-container">
        <svg class="exercises__icon" width="24" height="24">
           <use href="./img/icons.svg#icon-running-man"></use>
        </svg>
        <h3 class="exercises__name">${r}</h3>
      </div>

        <div class="exercises__item-bottom">
          <p class="exercises__meta">
            <span class="exercises__meta-label">Burned calories:</span>
            <span class="exercises__meta-value">${n} / ${i}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Body part:</span>
            <span class="exercises__meta-value">${o}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Target:</span>
            <span class="exercises__meta-value">${s}</span>
          </p>
        </div>
      </li>
  `}function qt(e,t){const r=document.querySelector(".js-exercises-pagination");r&&He({container:r,currentPage:e,totalPages:t,mode:"neighbors",classes:{page:"exercises__page",active:"active"},scrollToTop:!0,scrollTarget:".exercises",onPageChange(n){return A({page:n})}})}function Rt(e){e.querySelectorAll(".exercises__start-btn[data-exercise-id]").forEach(r=>{r.hasAttribute("data-click-handler-attached")||(r.addEventListener("click",At),r.setAttribute("data-click-handler-attached","true"))})}async function At(e){const r=e.currentTarget.getAttribute("data-exercise-id");if(!r){console.error("Exercise ID is missing");return}sessionStorage.setItem("exerciseModalExerciseId",r);const n=Je();if(!n){console.error("Failed to get exercise modal content");return}je(n);try{await Ve(U)}catch(o){console.error("Error initializing exercise modal:",o)}}const O=document.querySelector("[data-filters-tabs]"),$=document.querySelector(".filters__search"),K=document.querySelector(".filters__subtitle"),Mt=()=>window.matchMedia("(min-width: 1440px)").matches;function Ze(e,t=""){if(!$||!K)return;const r=Mt();e==="bodypart"?(K.textContent=` / ${t||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),$.classList.add("filters__search--visible")):(K.textContent="",$.classList.remove("filters__search--visible"))}function et(e,t=""){if(!O)return;const r=O.querySelector(`[data-filter="${e}"]`);if(!r)return;const n=document.getElementById("cards-box"),o=document.getElementById("exercises"),s=document.getElementById("equipment-box");n&&n.classList.add("hidden"),o&&o.classList.add("hidden"),s&&s.classList.add("hidden");const i=new URL(window.location.href);e==="muscles"?(n&&n.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="equipment"?(s&&s.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="bodypart"&&(o&&o.classList.remove("hidden"),i.searchParams.set("type","body-parts"),t?i.searchParams.set("filter",t.toLowerCase()):(i.searchParams.delete("filter"),A({page:1}))),window.history.pushState({},"",i),O.querySelectorAll(".filters__tab").forEach(c=>{const a=c===r;c.classList.toggle("filters__tab--active",a),c.setAttribute("aria-selected",a?"true":"false")}),Ze(e,t)}if(O&&$&&K){O.addEventListener("click",t=>{const r=t.target.closest(".filters__tab");r&&et(r.dataset.filter)});const e=O.querySelector(".filters__tab--active");e&&Ze(e.dataset.filter)}const D=document.querySelector(".filters__input"),j=document.querySelector(".filters__clear-btn");if(D&&j){const e=()=>{D.value.trim()?j.classList.add("filters__clear-btn--visible"):j.classList.remove("filters__clear-btn--visible")};D.addEventListener("input",e),j.addEventListener("click",()=>{D.value="",D.focus(),e()}),e()}function Bt(e){return function(t){t.preventDefault();const r={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},n=r[e.filter]||r["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),et("bodypart",e.name),A({page:1,filter:e.name.toLowerCase(),type:n});const i=new URL(window.location.href);i.searchParams.set("type",n),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const kt=new P,ge=window.innerWidth<768?9:12;let V="Muscles",H=1;async function tt(e=V,t=1,r=ge){V=e,H=t;try{const n={filter:e,page:t,limit:r},o=await kt.getFilters(n);if(!o){_("Failed to fetch categories: No response from server"),Y(),Q();return}if(o.error||o.status==="error"){_(o.message||"Failed to fetch categories"),Y(),Q();return}if(!o.results||o.results.length===0){_("Nothing found"),Y(),Q();return}Ot(o.results||[]),Nt(H,o.totalPages||1),typeof Ce=="function"&&Ce(o)}catch(n){console.error("getCategories error:",n),_((n==null?void 0:n.message)||"Something went wrong"),Y(),Q()}}function Ot(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(r=>{const n=document.createElement("div");n.className="card";const o=r.imgURL&&r.imgURL.trim()!==""?r.imgURL:"/img/no-image.jpg",s=r.name||"",i=r.filter||"";n.innerHTML=`
      <img src="${o}" alt="${s}" loading="lazy" />
      <div class="card-body">
        <h3>${s}</h3>
        <span>${i}</span>
      </div>
    `,n.addEventListener("click",Bt(r)),t.appendChild(n),n.querySelector(".card-body").addEventListener("click",()=>{Pt(s)})}))}function Nt(e,t){const r=document.getElementById("pagination");if(r){r.innerHTML="";for(let n=1;n<=t;n++){const o=n,s=document.createElement("button");s.textContent=o,s.className="pagination-page",s.setAttribute("data-page",o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{o!==H&&(H=o,tt(V,o,ge),window.scrollTo({top:0,behavior:"smooth"}))}),r.appendChild(s)}}}function Y(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function Q(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function Pt(e){console.log("Clicked name:",e)}tt(V,H,ge);(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=De;if(!t||!e||!r)return;const n=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",n),r.addEventListener("click",n),window.matchMedia("(min-width: 768px)").addEventListener("change",o=>{o.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const rt=document.querySelector(".footer__form"),Be=rt.querySelector(".footer__input");rt.addEventListener("submit",async e=>{e.preventDefault();const t=Be.value.trim();if(!(!t||!w.EMAIL_REGEX.test(t)))try{const r=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(r.ok)Fe("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),Be.value="";else{const n=await r.json();ct("Subscription already exists")}}catch{_("Server error")}});const z=document.querySelector(".scroll-up-btn");if(z){let e=function(t=1e3){const r=window.scrollY,n=performance.now();function o(s){const i=s-n,c=Math.min(i/t,1),a=1-Math.pow(1-c,3);window.scrollTo(0,r*(1-a)),c<1&&requestAnimationFrame(o)}requestAnimationFrame(o)};window.addEventListener("scroll",()=>{window.scrollY>300?z.classList.add("show"):z.classList.remove("show")}),z.addEventListener("click",t=>{t.preventDefault(),e()})}let g=null,ye=null,Ee=null;function ce(){var t,r,n,o,s,i;if(g)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}g={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=g.backdrop)==null||t.removeEventListener("click",ke,{capture:!0}),(r=g.cancelBtn)==null||r.removeEventListener("click",Z,{capture:!0}),(n=g.confirmBtn)==null||n.removeEventListener("click",Oe,{capture:!0}),(o=g.backdrop)==null||o.addEventListener("click",ke,{capture:!0}),(s=g.cancelBtn)==null||s.addEventListener("click",Z,{capture:!0}),(i=g.confirmBtn)==null||i.addEventListener("click",Oe,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ce):ce();function Dt(e){e.key==="Escape"&&g&&!g.modal.classList.contains("hidden")&&Z()}function ke(e){e.target===g.backdrop&&(e.stopPropagation(),e.preventDefault(),Z(e))}function Z(e){e&&(e.stopPropagation(),e.preventDefault());const t=Ee;nt(),t&&t()}function Oe(e){e&&(e.stopPropagation(),e.preventDefault());const t=ye;nt(),setTimeout(()=>{t&&t()},0)}function Ft(e,t,r=null){if(ce(),!g||!g.modal){console.error("Confirm modal elements not found");return}ye=t,Ee=r,g.message&&(g.message.textContent=e),g.modal.classList.remove("hidden"),document.addEventListener("keydown",Dt,{once:!0})}function nt(){!g||!g.modal||(g.modal.classList.add("hidden"),ye=null,Ee=null)}const $t=new P;let q=null;function Ht(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return Ut(t),t}function Ne(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ne):Ne();function Ut(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(n=>{const o=n.id;n.id=`${o}-${r}`,e.querySelectorAll(`label[for="${o}"]`).forEach(i=>{i.setAttribute("for",n.id)})})}function Pe(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),n=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),c=t.querySelectorAll(".rating-star");r&&r.reset(),n&&(n.value="0"),s&&(s.value=""),i&&(i.value=""),o&&(o.textContent=""),c.forEach(a=>{a.classList.remove("active")})}function se(e){q&&q()?Ft("Are you sure you want to cancel your exercise review?",()=>{Pe(),q=null,e()},()=>{}):(Pe(),q=null,e())}function Gt(e){var Le;q=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let n=sessionStorage.getItem("ratingModalExerciseId")||((Le=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:Le.getAttribute("data-exercise-id"));if(n&&sessionStorage.removeItem("ratingModalExerciseId"),!n){_("Exercise ID is missing");return}const o=r.querySelectorAll(".rating-star"),s=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),c=r.querySelector(".rating-modal__btn--cancel"),a=r.querySelector('.rating-modal__btn[type="submit"]'),d=r.querySelector('input[name="email"]'),f=r.querySelector('textarea[name="comment"]'),y=r.querySelector(".rating-modal__form");let S=0;a&&(a.disabled=!0),s&&(s.value="0"),i&&(i.textContent="0");const L=()=>S>0&&S<=5&&(d==null?void 0:d.value.trim())!==""&&(f==null?void 0:f.value.trim())!=="",l=()=>{a&&(a.disabled=!L())};q=()=>S>0||(d==null?void 0:d.value.trim())!==""||(f==null?void 0:f.value.trim())!=="";const E=m=>{o.forEach((I,b)=>{b+1<=m?I.classList.add("active"):I.classList.remove("active")})};o.forEach((m,I)=>{const b=I+1;m.addEventListener("click",()=>{S=b,E(b),s&&(s.value=b),i&&(i.textContent=b),l()})}),[d,f].forEach(m=>{m&&m.addEventListener("input",l)});const v=document.querySelector("[data-modal-close]"),te=()=>{const m=document.getElementById("modal-confirm");return m&&!m.classList.contains("hidden")},he=m=>{if(m.key==="Escape"){if(te())return;m.stopPropagation(),se(()=>{G(),e()})}},ve=m=>{if(m.target===v){if(te())return;m.stopPropagation(),se(()=>{G(),e()})}},G=()=>{document.removeEventListener("keydown",he,{capture:!0}),v==null||v.removeEventListener("click",ve,{capture:!0}),M==null||M.removeEventListener("click",_e,{capture:!0})},M=document.querySelector(".modal-template__close-btn"),_e=m=>{te()||(m.stopPropagation(),Se())};document.addEventListener("keydown",he,{capture:!0}),v==null||v.addEventListener("click",ve,{capture:!0}),M==null||M.addEventListener("click",_e,{capture:!0});const Se=()=>{se(()=>{G(),e()})};c&&e&&c.addEventListener("click",()=>{Se()}),y&&(y.setAttribute("data-no-auto-close","true"),y.addEventListener("submit",async m=>{if(m.preventDefault(),!L()){_("Please fill in all fields");return}const I=new FormData(y),b=parseInt(I.get("rating"),10),xe=I.get("email").trim(),ot=I.get("comment").trim();a&&(a.disabled=!0,a.textContent="Sending...");try{await $t.rateExercise(n,{rate:b,email:xe,review:ot}),Fe("Thank you for your feedback!"),q=null,setTimeout(()=>{e&&(G(),e())},1e3)}catch(Ie){console.error("Failed to submit rating:",Ie),_(Ie.message||C.API_ERROR),a&&(a.disabled=!1,a.textContent="Send")}}))}function Xt(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var t,r;(t=document.getElementById("categories-section"))==null||t.classList.add("hidden"),(r=document.getElementById("exercises-section"))==null||r.classList.remove("hidden"),A({page:1})}))}function Wt(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),r=document.querySelector(".filters__clear-btn");if(!e||!t)return;const n=()=>{const o=e.value.trim();if(console.log(o),!o){N.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}A({page:1,keyword:o})};t.addEventListener("click",n),e.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),n())}),r&&r.addEventListener("click",()=>{e.value="",e.focus(),A({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>Ke(),300),jt()});function jt(){Re(be.RATING,Ht,Gt),Re(be.EXERCISE,Je,Ve),We()}A();Xt();Wt();
//# sourceMappingURL=main-5KUGk0m7.js.map
