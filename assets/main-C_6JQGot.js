import{a as Le,i as le}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const Se={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},m={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},h={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},Re={EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},T={EMAIL_REGEX:Re.EMAIL,RATING_MIN:1,RATING_MAX:5},p={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},he={RATING:"rating",EXERCISE:"exercise"},g={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Valid email is required",RATING_RANGE:`Rating must be between ${T.RATING_MIN} and ${T.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"};class H{constructor(t=Se.BASE_API_URL){this.baseURL=t,this.axios=Le.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(n=>n,n=>{var o,a;const r=((a=(o=n.response)==null?void 0:o.data)==null?void 0:a.message)||n.message||g.API_ERROR;return console.error("API Error:",r),Promise.reject(n)})}async _request(t,n,r=null,o=null){var a,i;try{const u={method:t,url:n};return r&&(u.data=r),o&&(u.params=o),(await this.axios(u)).data}catch(u){const d=((i=(a=u.response)==null?void 0:a.data)==null?void 0:i.message)||u.message;throw new Error(`${t.toUpperCase()} ${n} failed: ${d}`)}}async getFilters(t={}){return this._request("get",h.FILTERS,null,t)}async getExercises(t={}){return this._request("get",h.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(g.EXERCISE_ID_REQUIRED);return this._request("get",`${h.EXERCISES}/${t}`)}async getQuote(){return this._request("get",h.QUOTE)}async subscribe(t){if(!t.email||!T.EMAIL_REGEX.test(t.email))throw new Error(g.EMAIL_REQUIRED);return this._request("post",h.SUBSCRIPTION,t)}async rateExercise(t,n){if(!t)throw new Error(g.EXERCISE_ID_REQUIRED);if(!n.rate||n.rate<T.RATING_MIN||n.rate>T.RATING_MAX)throw new Error(g.RATING_RANGE);if(!n.email||!T.EMAIL_REGEX.test(n.email))throw new Error(g.EMAIL_REQUIRED);return this._request("patch",`${h.EXERCISES}/${t}/rating`,n)}}const de={position:p.POSITION.TOP_RIGHT,timeout:p.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:m.GRAY_LIGHT,transitionIn:p.TRANSITION.IN,transitionOut:p.TRANSITION.OUT,fontFamily:"inherit",icon:""},Te=e=>{le.show({...de,title:p.TITLE.SUCCESS,message:e,backgroundColor:m.BLACK,titleColor:m.WHITE,messageColor:m.WHITE,icon:p.ICON.SUCCESS,iconColor:m.WHITE})},C=e=>{le.show({...de,title:p.TITLE.ERROR,message:e,backgroundColor:m.BLACK,titleColor:m.WHITE,messageColor:m.GRAY_LIGHT,progressBarColor:m.WHITE,icon:p.ICON.ERROR,iconColor:m.WHITE})},Ce=new H,O={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function ve(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:n,date:r}=JSON.parse(e),o=new Date(r),a=new Date;if(o.getDate()===a.getDate()){ue(t,n);return}}be()}ve();async function be(){try{const e=await Ce.getQuote(),{quote:t,author:n}=e,r={quote:t,author:n,date:new Date};localStorage.setItem("quoteData",JSON.stringify(r)),ue(t,n)}catch(e){C(e.message||g.API_ERROR)}}function ue(e,t){O.content&&(O.content.textContent=e),O.author&&(O.author.textContent=t)}const _e=new H,U=window.innerWidth<768?9:12;let q="Muscles",v=1;async function me(e=q,t=1,n=U){q=e,v=t;try{const r={filter:e,page:t,limit:n},o=await _e.getFilters(r);Ae(o.results),Oe(v,o.totalPages)}catch(r){C(r.message||"Something went wrong")}}function Ae(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(n=>{const r=document.createElement("div");r.className="card",r.innerHTML=`
      <img src="${n.imgURL}" alt="${n.name}" />
      <div class="card-body">
        <h3>${n.name}</h3>
        <span class="card-filter">${n.filter}</span>
      </div>
    `,t.appendChild(r)}))}function Oe(e,t){const n=document.getElementById("pagination");if(n){n.innerHTML="";for(let r=1;r<=t;r++){const o=r,a=document.createElement("button");a.textContent=o,a.className="pagination-page",a.setAttribute("data-page",o),o===e&&a.classList.add("active"),a.addEventListener("click",()=>{o!==v&&(v=o,me(q,o,U),window.scrollTo({top:0,behavior:"smooth"}))}),n.appendChild(a)}}}me(q,v,U);(()=>{const e={openMenuBtn:document.querySelector("[data-menu-open]"),closeMenuBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]")};if(!e.openMenuBtn||!e.menu||!e.closeMenuBtn)return;const t=()=>{e.menu.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};e.openMenuBtn.addEventListener("click",t),e.closeMenuBtn.addEventListener("click",t),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.menu.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const x=document.querySelector("[data-filters-tabs]"),ee=document.querySelector(".filters__search"),te=document.querySelector(".filters__subtitle");x&&x.addEventListener("click",e=>{const t=e.target.closest(".filters__tab");if(!t)return;x.querySelectorAll(".filters__tab").forEach(r=>{const o=r===t;r.classList.toggle("filters__tab--active",o),r.setAttribute("aria-selected",o?"true":"false")}),t.dataset.filter==="bodypart"?(ee.classList.remove("hidden"),te.textContent=" / Waist"):(ee.classList.add("hidden"),te.textContent="")});const M={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function ne(){M.loaderOverlay&&M.loaderOverlay.classList.add("hidden"),M.loaderBg&&M.loaderBg.classList.remove("bg-loader")}let c=null,oe=!1;const P={};function Me(e,t,n){P[e]={getContent:t,init:n}}function w(){oe||(c={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},oe=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{w()}):w();function qe(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const n=t.getAttribute("data-modal");if(!P[n]){console.warn(`Modal type "${n}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:r,init:o}=P[n],a=r();if(!a){console.error(`Failed to get content for modal type "${n}"`);return}we(a),o&&setTimeout(async()=>{try{await o(k)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function we(e){var t,n;if(w(),!c||!c.modal||!c.body){console.error("Modal template elements not found");return}if(typeof e=="string")c.body.innerHTML=e;else if(e instanceof HTMLElement)c.body.innerHTML="",c.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}c.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",fe,{once:!1}),(t=c.backdrop)==null||t.addEventListener("click",Ee),(n=c.closeBtn)==null||n.addEventListener("click",ge)}function k(){var e,t;w(),!(!c||!c.modal)&&(c.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",fe),(e=c.backdrop)==null||e.removeEventListener("click",Ee),(t=c.closeBtn)==null||t.removeEventListener("click",ge),c&&c.body&&(c.body.innerHTML=""))}function $(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function fe(e){if(e.key==="Escape"){if($())return;k()}}function Ee(e){if(e.target===c.backdrop){if($())return;k()}}function ge(){$()||k()}let l=null,F=null,X=null;function G(){var t,n,r,o,a,i;if(l)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}l={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=l.backdrop)==null||t.removeEventListener("click",re,{capture:!0}),(n=l.cancelBtn)==null||n.removeEventListener("click",N,{capture:!0}),(r=l.confirmBtn)==null||r.removeEventListener("click",ae,{capture:!0}),(o=l.backdrop)==null||o.addEventListener("click",re,{capture:!0}),(a=l.cancelBtn)==null||a.addEventListener("click",N,{capture:!0}),(i=l.confirmBtn)==null||i.addEventListener("click",ae,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",G):G();function Ne(e){e.key==="Escape"&&l&&!l.modal.classList.contains("hidden")&&N()}function re(e){e.target===l.backdrop&&(e.stopPropagation(),e.preventDefault(),N(e))}function N(e){e&&(e.stopPropagation(),e.preventDefault());const t=X;pe(),t&&t()}function ae(e){e&&(e.stopPropagation(),e.preventDefault());const t=F;pe(),setTimeout(()=>{t&&t()},0)}function ke(e,t,n=null){if(G(),!l||!l.modal){console.error("Confirm modal elements not found");return}F=t,X=n,l.message&&(l.message.textContent=e),l.modal.classList.remove("hidden"),document.addEventListener("keydown",Ne,{once:!0})}function pe(){!l||!l.modal||(l.modal.classList.add("hidden"),F=null,X=null)}const Be=new H;let S=null;function xe(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return De(t),t}function ie(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const n=t.getAttribute("data-exercise-id");n&&sessionStorage.setItem("ratingModalExerciseId",n)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ie):ie();function De(e){const t=e.querySelectorAll("[id]"),n=Date.now();t.forEach(r=>{const o=r.id;r.id=`${o}-${n}`,e.querySelectorAll(`label[for="${o}"]`).forEach(i=>{i.setAttribute("for",r.id)})})}function se(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const n=t.querySelector(".rating-modal__form"),r=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),a=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),u=t.querySelectorAll(".rating-star");n&&n.reset(),r&&(r.value="0"),a&&(a.value=""),i&&(i.value=""),o&&(o.textContent=""),u.forEach(d=>{d.classList.remove("active")})}function D(e){S&&S()?ke("Are you sure you want to cancel your exercise review?",()=>{se(),S=null,e()},()=>{}):(se(),S=null,e())}function Pe(e){var j;S=null;const t=document.querySelector("[data-modal-body]"),n=t==null?void 0:t.querySelector(".rating-modal");if(!t||!n){console.error("Modal body or rating modal not found");return}let r=sessionStorage.getItem("ratingModalExerciseId")||((j=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:j.getAttribute("data-exercise-id"));if(r&&sessionStorage.removeItem("ratingModalExerciseId"),!r){C("Exercise ID is missing");return}const o=n.querySelectorAll(".rating-star"),a=n.querySelector('input[name="rating"]'),i=n.querySelector(".rating-modal__rating-text"),u=n.querySelector(".rating-modal__btn--cancel"),d=n.querySelector('.rating-modal__btn[type="submit"]'),y=n.querySelector('input[name="email"]'),I=n.querySelector('textarea[name="comment"]'),b=n.querySelector(".rating-modal__form");let _=0;d&&(d.disabled=!0),a&&(a.value="0"),i&&(i.textContent="0");const Q=()=>_>0&&_<=5&&(y==null?void 0:y.value.trim())!==""&&(I==null?void 0:I.value.trim())!=="",W=()=>{d&&(d.disabled=!Q())};S=()=>_>0||(y==null?void 0:y.value.trim())!==""||(I==null?void 0:I.value.trim())!=="";const ye=s=>{o.forEach((f,E)=>{E+1<=s?f.classList.add("active"):f.classList.remove("active")})};o.forEach((s,f)=>{const E=f+1;s.addEventListener("click",()=>{_=E,ye(E),a&&(a.value=E),i&&(i.textContent=E),W()})}),[y,I].forEach(s=>{s&&s.addEventListener("input",W)});const L=document.querySelector("[data-modal-close]"),B=()=>{const s=document.getElementById("modal-confirm");return s&&!s.classList.contains("hidden")},z=s=>{if(s.key==="Escape"){if(B())return;s.stopPropagation(),D(()=>{A(),e()})}},K=s=>{if(s.target===L){if(B())return;s.stopPropagation(),D(()=>{A(),e()})}},A=()=>{document.removeEventListener("keydown",z,{capture:!0}),L==null||L.removeEventListener("click",K,{capture:!0}),R==null||R.removeEventListener("click",V,{capture:!0})},R=document.querySelector(".modal-template__close-btn"),V=s=>{B()||(s.stopPropagation(),Y())};document.addEventListener("keydown",z,{capture:!0}),L==null||L.addEventListener("click",K,{capture:!0}),R==null||R.addEventListener("click",V,{capture:!0});const Y=()=>{D(()=>{A(),e()})};u&&e&&u.addEventListener("click",()=>{Y()}),b&&(b.setAttribute("data-no-auto-close","true"),b.addEventListener("submit",async s=>{if(s.preventDefault(),!Q()){C("Please fill in all fields");return}const f=new FormData(b),E=parseInt(f.get("rating"),10),J=f.get("email").trim(),Ie=f.get("comment").trim();d&&(d.disabled=!0,d.textContent="Sending...");try{await Be.rateExercise(r,{rate:E,email:J,review:Ie}),Te("Thank you for your feedback!"),S=null,setTimeout(()=>{e&&(A(),e())},1e3)}catch(Z){console.error("Failed to submit rating:",Z),C(Z.message||g.API_ERROR),d&&(d.disabled=!1,d.textContent="Send")}}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{ne(),ce()}):(ne(),ce());function ce(){Me(he.RATING,xe,Pe),qe()}
//# sourceMappingURL=main-C_6JQGot.js.map
