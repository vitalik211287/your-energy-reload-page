import{a as Qe,i as oe}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const We={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},v={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},B={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},ze={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},w={EMAIL_REGEX:ze.EMAIL,RATING_MIN:1,RATING_MAX:5},q={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},b={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},Se={RATING:"rating",EXERCISE:"exercise"},L={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${w.RATING_MIN} and ${w.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},D={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class F{constructor(t=We.BASE_API_URL){this.baseURL=t,this.axios=Qe.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var o,s;const n=((s=(o=r.response)==null?void 0:o.data)==null?void 0:s.message)||r.message||L.API_ERROR;return console.error("API Error:",n),Promise.reject(r)})}async _request(t,r,n=null,o=null){var s,i;try{const a={method:t,url:r};return n&&(a.data=n),o&&(a.params=o),(await this.axios(a)).data}catch(a){const c=((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||a.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${c}`)}}async getFilters(t={}){return this._request("get",B.FILTERS,null,t)}async getExercises(t={}){return this._request("get",B.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(L.EXERCISE_ID_REQUIRED);return this._request("get",`${B.EXERCISES}/${t}`)}async getQuote(){return this._request("get",B.QUOTE)}async subscribe(t){if(!t.email||!w.EMAIL_REGEX.test(t.email))throw new Error(L.EMAIL_REQUIRED);return this._request("post",B.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(L.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<w.RATING_MIN||r.rate>w.RATING_MAX)throw new Error(L.RATING_RANGE);if(!r.email||!w.EMAIL_REGEX.test(r.email))throw new Error(L.EMAIL_REQUIRED);return this._request("patch",`${B.EXERCISES}/${t}/rating`,r)}}const Ae={position:q.POSITION.TOP_RIGHT,timeout:q.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:v.GRAY_LIGHT,transitionIn:q.TRANSITION.IN,transitionOut:q.TRANSITION.OUT,fontFamily:"inherit",icon:""},Je=e=>{oe.show({...Ae,title:q.TITLE.SUCCESS,message:e,backgroundColor:v.BLACK,titleColor:v.WHITE,messageColor:v.WHITE,icon:q.ICON.SUCCESS,iconColor:v.WHITE})},S=e=>{oe.show({...Ae,title:q.TITLE.ERROR,message:e,backgroundColor:v.BLACK,titleColor:v.WHITE,messageColor:v.GRAY_LIGHT,progressBarColor:v.WHITE,icon:q.ICON.ERROR,iconColor:v.WHITE})},Ve=new F,$={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function Ze(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:n}=JSON.parse(e),o=new Date(n),s=new Date;if(o.getDate()===s.getDate()){Me(t,r);return}}Ke()}Ze();async function Ke(){try{const e=await Ve.getQuote(),{quote:t,author:r}=e,n={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(n)),Me(t,r)}catch(e){S(e.message||L.API_ERROR)}}function Me(e,t){$.content&&($.content.textContent=e),$.author&&($.author.textContent=t)}function he(e){if(!e||!e.results)return;const t={"@context":b.SCHEMA_CONTEXT,"@type":b.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,n)=>({"@type":b.SCHEMA_TYPES.LIST_ITEM,position:n+1,item:{"@type":b.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};Be("filters",t)}function et(e){if(!e||!e.results||e.results.length===0)return;const t={"@context":b.SCHEMA_CONTEXT,"@type":b.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,n)=>({"@type":b.SCHEMA_TYPES.LIST_ITEM,position:n+1,item:{"@type":b.SCHEMA_TYPES.EXERCISE_PLAN,name:tt(r.name),description:r.description,image:r.gifUrl,audience:{"@type":"PeopleAudience",suggestedGender:"unisex"},category:r.target,keywords:`${r.bodyPart}, ${r.equipment}, fitness`}}))};Be("detailed-exercises",t)}function Be(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=b.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function tt(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function rt({container:e,currentPage:t,totalPages:r,onPageChange:n,mode:o="full",showArrows:s=!1,classes:i={},icons:a={},scrollToTop:c=!0,scrollTarget:u=null}){if(!e)return;e.innerHTML="";const{page:E="",active:h="active",arrow:I=""}=i,x=(l,d,g="")=>{const y=document.createElement("button");return y.className=g,y.textContent=l,y.dataset.page=d,y};if(o==="full")for(let l=1;l<=r;l++){const d=x(l,l,E);l===t&&d.classList.add(h),e.appendChild(d)}else if(o==="neighbors"){let l=[];r<=3?l=Array.from({length:r},(d,g)=>g+1):t===1?l=[1,2,3]:t===r?l=[r-2,r-1,r]:l=[t-1,t,t+1],l.forEach(d=>{const g=x(d,d,`${E} ${d===t?h:""}`.trim());e.appendChild(g)})}e.querySelectorAll("button").forEach(l=>{l.addEventListener("click",()=>{const d=Number(l.dataset.page);if(!(Number.isNaN(d)||d===t)&&(n(d),c))if(u){const g=typeof u=="string"?document.querySelector(u):u;g&&g.scrollIntoView({behavior:"smooth",block:"start"})}else window.scrollTo({top:0,behavior:"smooth"})})})}let f=null,ve=!1;const re={};function Le(e,t,r){re[e]={getContent:t,init:r}}function z(){ve||(f={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},ve=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{z()}):z();function Oe(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!re[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:n,init:o}=re[r],s=n();if(!s){console.error(`Failed to get content for modal type "${r}"`);return}ke(s),o&&setTimeout(async()=>{try{await o(H)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function ke(e){var t,r;if(z(),!f||!f.modal||!f.body){console.error("Modal template elements not found");return}if(typeof e=="string")f.body.innerHTML=e;else if(e instanceof HTMLElement)f.body.innerHTML="",f.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}f.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",Ne,{once:!1}),(t=f.backdrop)==null||t.addEventListener("click",Pe),(r=f.closeBtn)==null||r.addEventListener("click",De)}function H(){var e,t;z(),!(!f||!f.modal)&&(f.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Ne),(e=f.backdrop)==null||e.removeEventListener("click",Pe),(t=f.closeBtn)==null||t.removeEventListener("click",De),f&&f.body&&(f.body.innerHTML=""))}function se(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function Ne(e){if(e.key==="Escape"){if(se())return;H()}}function Pe(e){if(e.target===f.backdrop){if(se())return;H()}}function De(){se()||H()}const Fe="favorites";function ie(){const e=localStorage.getItem(Fe);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(n=>n.id||n._id).filter(Boolean);return ae(r),r}return t}function ae(e){localStorage.setItem(Fe,JSON.stringify(e))}function be(e){return ie().includes(e)}function nt(e){const t=ie(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),ae(t))}function ot(e){const r=ie().filter(n=>n!==e);ae(r)}const st={};function it(e,t=null){const r=t||D.favoriteBtn;if(!r)return;Object.assign(st,e);const n=e.id||e._id,o=be(n);K(r,o);const s=r.cloneNode(!0);r.parentNode.replaceChild(s,r),s.onclick=()=>{const i=e.id||e._id;be(i)?(ot(i),K(s,!1)):(nt(e),K(s,!0))}}function K(e,t){const r=Array.from(e.childNodes).filter(n=>n.nodeType===Node.TEXT_NODE&&n.textContent.trim());if(r.length>0)r[0].textContent=t?"Remove from favorites":"Add to favorites";else{const n=e.querySelector("svg"),o=document.createTextNode(t?"Remove from favorites":"Add to favorites");n?e.insertBefore(o,n):e.appendChild(o)}}const at=new F;function He(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function Ue(e){var c;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const n=r.querySelector(".exercise-modal__loader");n&&n.classList.remove("hidden");let o=sessionStorage.getItem("exerciseModalExerciseId")||((c=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:c.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("exerciseModalExerciseId"),!o){n&&n.classList.add("hidden"),S("Exercise ID is missing");return}let s;try{s=await at.getExerciseById(o),s.id=s.id||s._id}catch(u){console.error("Failed to load exercise:",u),n&&n.classList.add("hidden"),S(u.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}ct(r,s),n&&n.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&it(s,i);const a=r.querySelector(".exercise-modal__btn--rating");a&&!a.hasAttribute("data-modal-initialized")&&Oe()}function ct(e,t){const r=e.querySelector(".exercise-modal__title"),n=e.querySelector(".exercise-modal__rating-value"),o=e.querySelector(".exercise-modal__stars"),s=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),a=e.querySelector(".exercise-modal__bodypart"),c=e.querySelector(".exercise-modal__equipment"),u=e.querySelector(".exercise-modal__popular"),E=e.querySelector(".exercise-modal__calories"),h=e.querySelector(".exercise-modal__description"),I=e.querySelector(".favorites-btn"),x=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const l=t.rating||0;if(n&&(n.textContent=l.toFixed(1)),o&&(o.innerHTML=lt(l)),s&&(s.src=t.gifUrl||"",s.alt=t.name||"Exercise GIF"),i&&(i.textContent=ee(t.target||"")),a&&(a.textContent=ee(t.bodyPart||"")),c&&(c.textContent=ee(t.equipment||"")),u){const d=t.popularity||0;d>=1e3?u.textContent=(d/1e3).toFixed(1).replace(/\.0$/,"")+"k":u.textContent=d.toString()}if(E){const d=t.burnedCalories,g=E.closest("p");if(d&&d>0){const y=t.time||3;E.textContent=`${d}/${y} min`,g&&(g.style.display="")}else g&&(g.style.display="none")}h&&(h.textContent=t.description||t.instructions||""),I&&I.setAttribute("data-id",t.id||t._id||""),x&&x.setAttribute("data-exercise-id",t.id||t._id||"")}function lt(e){const r=Math.round(e),n=5-r;let o="";const s="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)o+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<n;i++)o+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return o}function ee(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}const dt=new F;function ut(){return window.innerWidth<768?8:10}let Ie=1,xe=1;async function A({page:e=1,keyword:t=""}={}){const r=D.exercisesList;if(!r)return;const n=ut(),{type:o,filter:s}=mt(),i=pt({page:e,limit:n,type:o,filter:s,keyword:t});try{const a=await dt.getExercises(i),c=a.results||[];et(a),Ie=a.page||e,xe=a.totalPages||1,gt(r,c),St(Ie,xe)}catch(a){console.error("Failed to load exercises:",a),S(a.message||"Failed to load exercises. Try again later."),r.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}}function mt(){var s;const e=new URLSearchParams(window.location.search),t=e.get("type")||e.get("tab"),r=((s=D.exercisesActiveTab)==null?void 0:s.dataset.tab)||t||"body-parts",n=e.get("filter"),o=ft(r);return{type:r,filter:n||o}}function ft(e){switch(e){case"muscles":return"abs";case"equipment":return"body weight";case"body-parts":default:return"waist"}}function pt({page:e,limit:t,type:r,filter:n,keyword:o}){const s={page:e,limit:t};switch(o&&(s.keyword=o),r){case"body-parts":s.bodypart=n;break;case"muscles":s.muscles=n;break;case"equipment":s.equipment=n;break;default:s.bodypart=n}return s}function gt(e,t){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const r=t.map(Et).join("");e.innerHTML=r,yt(e)}function Et(e){const{name:t,burnedCalories:r,bodyPart:n,target:o,rating:s}=e;return`
    <li class="exercises__item" data-exercise-id="${e._id}">
      <div class="exercises__item-top">
        <div class="exercises__item-info">
          <span class="exercises__badge">Workout</span>
          <div class="exercises__rating">
            <span class="exercises__meta-key">${s}</span>
            <span class="exercises__meta-value">
              <svg class="star"></svg>
            </span>
          </div>
        </div>

        <button
          type="button"
          class="exercises__start-btn js-open-exercise"
          data-exercise-id="${e._id}"
        >
          Start
          <svg class="arrow__icon"></svg>
        </button>
      </div>

      <div class="exercises__name-container">
        <svg class="exercises__icon"></svg>
        <h3 class="exercises__name">${t}</h3>
      </div>

      <div class="exercises__item-bottom">
        <p class="exercises__meta">
          <span class="exercises__meta-label">Burned calories:</span>
          <span class="exercises__meta-value">${r}</span>
        </p>
        <p class="exercises__meta">
          <span class="exercises__meta-label">Body part:</span>
          <span class="exercises__meta-value">${n}</span>
        </p>
        <p class="exercises__meta">
          <span class="exercises__meta-label">Target:</span>
          <span class="exercises__meta-value">${o}</span>
        </p>
      </div>
    </li>
  `}function yt(e){e.querySelectorAll(".exercises__start-btn[data-exercise-id]").forEach(r=>{r.hasAttribute("data-click-handler-attached")||(r.addEventListener("click",_t),r.setAttribute("data-click-handler-attached","true"))})}async function _t(e){const r=e.currentTarget.getAttribute("data-exercise-id");if(!r){console.error("Exercise ID is missing");return}sessionStorage.setItem("exerciseModalExerciseId",r);const n=He();if(!n){console.error("Failed to get exercise modal content");return}ke(n);try{await Ue(H)}catch(o){console.error("Error initializing exercise modal:",o)}}function St(e,t){const r=D.exercisesPagination;rt({container:r,currentPage:e,totalPages:t,mode:"neighbors",classes:{page:"exercises__page",active:"active"},onPageChange(n){A({page:n})}})}const O=document.querySelector("[data-filters-tabs]"),N=document.querySelector(".filters__search"),W=document.querySelector(".filters__subtitle"),ht=()=>window.matchMedia("(min-width: 1440px)").matches;function $e(e,t=""){if(!N||!W)return;const r=ht();e==="bodypart"?(W.textContent=` / ${t||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),N.classList.add("filters__search--visible")):(W.textContent="",N.classList.remove("filters__search--visible"))}function Ge(e,t=""){if(!O)return;const r=O.querySelector(`[data-filter="${e}"]`);if(!r)return;const n=document.getElementById("cards-box"),o=document.getElementById("exercises");if(e==="muscles"||e==="equipment"){n.classList.remove("hidden"),o.classList.add("hidden");const s=document.querySelector(".filters__subtitle");s.textContent="";const i=new URL(window.location.href);i.searchParams.delete("filter"),window.history.pushState({},"",i)}else if(e==="bodypart"){n.classList.add("hidden"),o.classList.remove("hidden");const s=new URL(window.location.href);s.searchParams.set("type","body-parts"),t?s.searchParams.set("filter",t.toLowerCase()):(s.searchParams.delete("filter"),A({page:1}))}O.querySelectorAll(".filters__tab").forEach(s=>{const i=s===r;s.classList.toggle("filters__tab--active",i),s.setAttribute("aria-selected",i?"true":"false")}),$e(e,t)}if(O&&N&&W){O.addEventListener("click",t=>{const r=t.target.closest(".filters__tab");r&&Ge(r.dataset.filter)});const e=O.querySelector(".filters__tab--active");e&&$e(e.dataset.filter)}const k=document.querySelector(".filters__input"),G=document.querySelector(".filters__clear-btn");if(k&&G){const e=()=>{k.value.trim()?G.classList.add("filters__clear-btn--visible"):G.classList.remove("filters__clear-btn--visible")};k.addEventListener("input",e),G.addEventListener("click",()=>{k.value="",k.focus(),e()}),e()}function vt(e){return function(t){t.preventDefault();const r={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},n=r[e.filter]||r["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),Ge("bodypart",e.name),A({page:1,filter:e.name.toLowerCase(),type:n});const i=new URL(window.location.href);i.searchParams.set("type",n),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const Lt=new F,ce=window.innerWidth<768?9:12;let J="Muscles",P=1;async function Xe(e=J,t=1,r=ce){J=e,P=t;try{const n={filter:e,page:t,limit:r},o=await Lt.getFilters(n);if(!o){S("Failed to fetch categories: No response from server"),X(),Y();return}if(o.error||o.status==="error"){S(o.message||"Failed to fetch categories"),X(),Y();return}if(!o.results||o.results.length===0){S("Nothing found"),X(),Y();return}bt(o.results||[]),It(P,o.totalPages||1),typeof he=="function"&&he(o)}catch(n){console.error("getCategories error:",n),S((n==null?void 0:n.message)||"Something went wrong"),X(),Y()}}function bt(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(r=>{const n=document.createElement("div");n.className="card";const o=r.imgURL&&r.imgURL.trim()!==""?r.imgURL:"/img/no-image.jpg",s=r.name||"",i=r.filter||"";n.innerHTML=`
      <img src="${o}" alt="${s}" loading="lazy" />
      <div class="card-body">
        <h3>${s}</h3>
        <span>${i}</span>
      </div>
    `,n.addEventListener("click",vt(r)),t.appendChild(n),n.querySelector(".card-body").addEventListener("click",()=>{xt(s)})}))}function It(e,t){const r=document.getElementById("pagination");if(r){r.innerHTML="";for(let n=1;n<=t;n++){const o=n,s=document.createElement("button");s.textContent=o,s.className="pagination-page",s.setAttribute("data-page",o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{o!==P&&(P=o,Xe(J,o,ce),window.scrollTo({top:0,behavior:"smooth"}))}),r.appendChild(s)}}}function X(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function Y(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function xt(e){console.log("Clicked name:",e)}Xe(J,P,ce);(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=D;if(!t||!e||!r)return;const n=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",n),r.addEventListener("click",n),window.matchMedia("(min-width: 768px)").addEventListener("change",o=>{o.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const le=document.querySelector(".footer__form"),Ce=le.querySelector(".footer__input"),_=le.querySelector(".footer__message");le.addEventListener("submit",async e=>{e.preventDefault();const t=Ce.value.trim();if(!t||!w.EMAIL_REGEX.test(t)){_.textContent=L.EMAIL_REQUIRED,_.classList.remove("footer__message--success"),_.classList.add("footer__message--error");return}try{const r=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(r.ok)_.textContent="Subscription successful!",_.classList.remove("footer__message--error"),_.classList.add("footer__message--success"),Ce.value="";else{const n=await r.json();_.textContent=n.message||"Subscription failed.",_.classList.remove("footer__message--success"),_.classList.add("footer__message--error")}}catch{_.textContent="Network error. Try again later.",_.classList.remove("footer__message--success"),_.classList.add("footer__message--error")}});const j=document.querySelector(".scroll-up-btn");if(j){let e=function(t=1e3){const r=window.scrollY,n=performance.now();function o(s){const i=s-n,a=Math.min(i/t,1),c=1-Math.pow(1-a,3);window.scrollTo(0,r*(1-c)),a<1&&requestAnimationFrame(o)}requestAnimationFrame(o)};window.addEventListener("scroll",()=>{window.scrollY>300?j.classList.add("show"):j.classList.remove("show")}),j.addEventListener("click",t=>{t.preventDefault(),e()})}const Q={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function Ct(){Q.loaderOverlay&&Q.loaderOverlay.classList.add("hidden"),Q.loaderBg&&Q.loaderBg.classList.remove("bg-loader")}let p=null,de=null,ue=null;function ne(){var t,r,n,o,s,i;if(p)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}p={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=p.backdrop)==null||t.removeEventListener("click",Te,{capture:!0}),(r=p.cancelBtn)==null||r.removeEventListener("click",V,{capture:!0}),(n=p.confirmBtn)==null||n.removeEventListener("click",qe,{capture:!0}),(o=p.backdrop)==null||o.addEventListener("click",Te,{capture:!0}),(s=p.cancelBtn)==null||s.addEventListener("click",V,{capture:!0}),(i=p.confirmBtn)==null||i.addEventListener("click",qe,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ne):ne();function Tt(e){e.key==="Escape"&&p&&!p.modal.classList.contains("hidden")&&V()}function Te(e){e.target===p.backdrop&&(e.stopPropagation(),e.preventDefault(),V(e))}function V(e){e&&(e.stopPropagation(),e.preventDefault());const t=ue;Ye(),t&&t()}function qe(e){e&&(e.stopPropagation(),e.preventDefault());const t=de;Ye(),setTimeout(()=>{t&&t()},0)}function qt(e,t,r=null){if(ne(),!p||!p.modal){console.error("Confirm modal elements not found");return}de=t,ue=r,p.message&&(p.message.textContent=e),p.modal.classList.remove("hidden"),document.addEventListener("keydown",Tt,{once:!0})}function Ye(){!p||!p.modal||(p.modal.classList.add("hidden"),de=null,ue=null)}const wt=new F;let R=null;function Rt(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return At(t),t}function we(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",we):we();function At(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(n=>{const o=n.id;n.id=`${o}-${r}`,e.querySelectorAll(`label[for="${o}"]`).forEach(i=>{i.setAttribute("for",n.id)})})}function Re(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),n=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),a=t.querySelectorAll(".rating-star");r&&r.reset(),n&&(n.value="0"),s&&(s.value=""),i&&(i.value=""),o&&(o.textContent=""),a.forEach(c=>{c.classList.remove("active")})}function te(e){R&&R()?qt("Are you sure you want to cancel your exercise review?",()=>{Re(),R=null,e()},()=>{}):(Re(),R=null,e())}function Mt(e){var Ee;R=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let n=sessionStorage.getItem("ratingModalExerciseId")||((Ee=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:Ee.getAttribute("data-exercise-id"));if(n&&sessionStorage.removeItem("ratingModalExerciseId"),!n){S("Exercise ID is missing");return}const o=r.querySelectorAll(".rating-star"),s=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),a=r.querySelector(".rating-modal__btn--cancel"),c=r.querySelector('.rating-modal__btn[type="submit"]'),u=r.querySelector('input[name="email"]'),E=r.querySelector('textarea[name="comment"]'),h=r.querySelector(".rating-modal__form");let I=0;c&&(c.disabled=!0),s&&(s.value="0"),i&&(i.textContent="0");const x=()=>I>0&&I<=5&&(u==null?void 0:u.value.trim())!==""&&(E==null?void 0:E.value.trim())!=="",l=()=>{c&&(c.disabled=!x())};R=()=>I>0||(u==null?void 0:u.value.trim())!==""||(E==null?void 0:E.value.trim())!=="";const g=m=>{o.forEach((C,T)=>{T+1<=m?C.classList.add("active"):C.classList.remove("active")})};o.forEach((m,C)=>{const T=C+1;m.addEventListener("click",()=>{I=T,g(T),s&&(s.value=T),i&&(i.textContent=T),l()})}),[u,E].forEach(m=>{m&&m.addEventListener("input",l)});const y=document.querySelector("[data-modal-close]"),Z=()=>{const m=document.getElementById("modal-confirm");return m&&!m.classList.contains("hidden")},me=m=>{if(m.key==="Escape"){if(Z())return;m.stopPropagation(),te(()=>{U(),e()})}},fe=m=>{if(m.target===y){if(Z())return;m.stopPropagation(),te(()=>{U(),e()})}},U=()=>{document.removeEventListener("keydown",me,{capture:!0}),y==null||y.removeEventListener("click",fe,{capture:!0}),M==null||M.removeEventListener("click",pe,{capture:!0})},M=document.querySelector(".modal-template__close-btn"),pe=m=>{Z()||(m.stopPropagation(),ge())};document.addEventListener("keydown",me,{capture:!0}),y==null||y.addEventListener("click",fe,{capture:!0}),M==null||M.addEventListener("click",pe,{capture:!0});const ge=()=>{te(()=>{U(),e()})};a&&e&&a.addEventListener("click",()=>{ge()}),h&&(h.setAttribute("data-no-auto-close","true"),h.addEventListener("submit",async m=>{if(m.preventDefault(),!x()){S("Please fill in all fields");return}const C=new FormData(h),T=parseInt(C.get("rating"),10),ye=C.get("email").trim(),je=C.get("comment").trim();c&&(c.disabled=!0,c.textContent="Sending...");try{await wt.rateExercise(n,{rate:T,email:ye,review:je}),Je("Thank you for your feedback!"),R=null,setTimeout(()=>{e&&(U(),e())},1e3)}catch(_e){console.error("Failed to submit rating:",_e),S(_e.message||L.API_ERROR),c&&(c.disabled=!1,c.textContent="Send")}}))}function Bt(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var t,r;(t=document.getElementById("categories-section"))==null||t.classList.add("hidden"),(r=document.getElementById("exercises-section"))==null||r.classList.remove("hidden"),A({page:1})}))}function Ot(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),r=document.querySelector(".filters__clear-btn");if(!e||!t)return;const n=()=>{const o=e.value.trim();if(!o){oe.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}A({page:1,keyword:o})};t.addEventListener("click",n),e.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),n())}),r&&r.addEventListener("click",()=>{e.value="",e.focus(),A({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>Ct(),200),kt()});function kt(){Le(Se.RATING,Rt,Mt),Le(Se.EXERCISE,He,Ue),Oe()}Bt();Ot();document.addEventListener("DOMContentLoaded",()=>{A()});export{D as R,F as Y,ie as g,A as l,ot as r};
//# sourceMappingURL=main-Yd5jSjS5.js.map
