import{a as Fe,i as H}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const He={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},v={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},N={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},$e={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},D={EMAIL_REGEX:$e.EMAIL,RATING_MIN:1,RATING_MAX:5},C={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},b={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},St={RATING:"rating",EXERCISE:"exercise"},A={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${D.RATING_MIN} and ${D.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},Te={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class ${constructor(t=He.BASE_API_URL){this.baseURL=t,this.axios=Fe.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var n,s;const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||r.message||A.API_ERROR;return console.error("API Error:",o),Promise.reject(r)})}async _request(t,r,o=null,n=null){var s,i;try{const c={method:t,url:r};return o&&(c.data=o),n&&(c.params=n),(await this.axios(c)).data}catch(c){const a=((i=(s=c.response)==null?void 0:s.data)==null?void 0:i.message)||c.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${a}`)}}async getFilters(t={}){return this._request("get",N.FILTERS,null,t)}async getExercises(t={}){return this._request("get",N.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(A.EXERCISE_ID_REQUIRED);return this._request("get",`${N.EXERCISES}/${t}`)}async getQuote(){return this._request("get",N.QUOTE)}async subscribe(t){if(!t.email||!D.EMAIL_REGEX.test(t.email))throw new Error(A.EMAIL_REQUIRED);return this._request("post",N.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(A.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<D.RATING_MIN||r.rate>D.RATING_MAX)throw new Error(A.RATING_RANGE);if(!r.email||!D.EMAIL_REGEX.test(r.email))throw new Error(A.EMAIL_REQUIRED);return this._request("patch",`${N.EXERCISES}/${t}/rating`,r)}}const se={position:C.POSITION.TOP_RIGHT,timeout:C.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:v.GRAY_LIGHT,transitionIn:C.TRANSITION.IN,transitionOut:C.TRANSITION.OUT,fontFamily:"inherit",icon:""},Ue=e=>{H.show({...se,title:C.TITLE.SUCCESS,message:e,backgroundColor:v.BLACK,titleColor:v.WHITE,messageColor:v.WHITE,icon:C.ICON.SUCCESS,iconColor:v.WHITE})},k=e=>{H.show({...se,title:C.TITLE.ERROR,message:e,backgroundColor:v.BLACK,titleColor:v.WHITE,messageColor:v.GRAY_LIGHT,progressBarColor:v.WHITE,icon:C.ICON.ERROR,iconColor:v.WHITE})},xt=e=>{H.show({...se,title:C.TITLE.INFO,message:e,backgroundColor:v.WHITE,titleColor:v.BLACK,messageColor:v.BLACK,progressBarColor:v.BLACK,borderBottom:`2px solid ${v.BLACK}`})},Ge=new $,G={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function Xe(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:o}=JSON.parse(e),n=new Date(o),s=new Date;if(n.getDate()===s.getDate()){Ce(t,r);return}}Ye()}Xe();async function Ye(){try{const e=await Ge.getQuote(),{quote:t,author:r}=e,o={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(o)),Ce(t,r)}catch(e){k(e.message||A.API_ERROR)}}function Ce(e,t){G.content&&(G.content.textContent=e),G.author&&(G.author.textContent=t)}function It(e){if(!e||!e.results)return;const t={"@context":b.SCHEMA_CONTEXT,"@type":b.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,o)=>({"@type":b.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":b.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};be("filters",t)}function We(e){if(!e||!e.results||e.results.length===0)return;const t={"@context":b.SCHEMA_CONTEXT,"@type":b.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,o)=>({"@type":b.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":b.SCHEMA_TYPES.EXERCISE_PLAN,name:je(r.name),description:r.description,image:r.gifUrl,audience:{"@type":"PeopleAudience",suggestedGender:"unisex"},category:r.target,keywords:`${r.bodyPart}, ${r.equipment}, fitness`}}))};be("detailed-exercises",t)}function be(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=b.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function je(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function te({container:e,currentPage:t,totalPages:r,onPageChange:o,mode:n="full",showArrows:s=!1,showPrevNext:i=!1,classes:c={},icons:a={},scrollToTop:l=!0,scrollTarget:d=null}){if(!e)return;e.innerHTML="";const{page:u="",active:h="active",arrow:T="",prev:E="",next:x=""}=c,{prev:I="Prev",next:L="Next"}=a,w=(m,y,_="")=>{const S=document.createElement("button");return S.className=_,S.textContent=m,S.dataset.page=y,S};if(i&&t>1){const m=w(I,t-1,E);e.appendChild(m)}if(n==="full")for(let m=1;m<=r;m++){const y=w(m,m,u);m===t&&y.classList.add(h),e.appendChild(y)}else if(n==="neighbors"){let m=[];r<=3?m=Array.from({length:r},(y,_)=>_+1):t===1?m=[1,2,3]:t===r?m=[r-2,r-1,r]:m=[t-1,t,t+1],m.forEach(y=>{const _=w(y,y,`${u} ${y===t?h:""}`.trim());e.appendChild(_)})}if(i&&t<r){const m=w(L,t+1,x);e.appendChild(m)}e.querySelectorAll("button").forEach(m=>{m.addEventListener("click",()=>{const y=Number(m.dataset.page);if(!(Number.isNaN(y)||y===t)&&(o(y),l))if(d){const _=typeof d=="string"?document.querySelector(d):d;if(_){const S=_.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:S-200,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})})})}const we="favorites";function K(){const e=localStorage.getItem(we);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(o=>o.id||o._id).filter(Boolean);return ie(r),r}return t}function ie(e){localStorage.setItem(we,JSON.stringify(e))}function Ee(e){return K().includes(e)}function Qe(e){const t=K(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),ie(t))}function qe(e){const r=K().filter(o=>o!==e);ie(r)}const ze={};function Ke(e,t=null){const r=t||Te.favoriteBtn;if(!r)return;Object.assign(ze,e);const o=e.id||e._id,n=Ee(o);V(r,n),r.onclick=()=>{const s=e.id||e._id;Ee(s)?(qe(s),V(r,!1)):(Qe(e),V(r,!0))}}function V(e,t){const r=e.querySelector(".exercise-modal__btn-text"),o=e.querySelector(".exercise-modal__btn-icon--heart"),n=e.querySelector(".exercise-modal__btn-icon--trash");r&&(r.textContent=t?"Remove from favorites":"Add to favorites"),o&&n&&(t?(o.classList.add("exercise-modal__btn-icon--hidden"),n.classList.remove("exercise-modal__btn-icon--hidden")):(o.classList.remove("exercise-modal__btn-icon--hidden"),n.classList.add("exercise-modal__btn-icon--hidden")))}const M={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function Re(){M.loaderOverlay&&M.loaderOverlay.classList.remove("hidden"),M.loaderBg&&M.loaderBg.classList.add("bg-loader")}function Ae(){M.loaderOverlay&&M.loaderOverlay.classList.add("hidden"),M.loaderBg&&M.loaderBg.classList.remove("bg-loader")}const Ve=new $;let W=1,O=[];function Je(){return window.innerWidth>=1440}function Ze(){return window.innerWidth>=768?10:8}function Me(){const e=document.querySelector(".favorites-wrapper");if(!e)return;const t=e.querySelector(".favorites-content");t&&t.remove();const r=e.querySelector(".favorites-empty");r&&r.remove();const o=document.createElement("div");o.className="favorites-empty",o.innerHTML=`
    <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
  `,e.appendChild(o)}async function et(e){try{const t=await Ve.getExerciseById(e);if(t)return t}catch(t){console.error(`Failed to load exercise ${e}`,t)}}function j(e=1){const t=document.querySelector(".main-container");if(!t)return;let r=t.querySelector(".favorites-content");r||(r=document.createElement("div"),r.className="favorites-content",t.appendChild(r));let o=r.querySelector(".favorites-list");o||(o=document.createElement("ul"),o.className="favorites favorites-list",r.appendChild(o));let n=r.querySelector(".js-favorites-pagination");if(n||(n=document.createElement("div"),n.className="favorites-pagination js-favorites-pagination",r.appendChild(n)),Je()){const u=Math.ceil(O.length/12),h=u>1,T=(e-1)*12,E=T+12,x=O.slice(T,E);oe(o,x,!0),h?te({container:n,currentPage:e,totalPages:u,mode:"neighbors",showPrevNext:u>2,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next"},icons:{prev:"<",next:">"},scrollToTop:!0,scrollTarget:".favorites-wrapper",onPageChange(I){W=I,j(I)}}):n.innerHTML="";return}const s=Ze(),i=(e-1)*s,c=i+s,a=O.slice(i,c);oe(o,a,!0);const l=Math.ceil(O.length/s);l>1?te({container:n,currentPage:e,totalPages:l,mode:"neighbors",showPrevNext:l>2,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next"},icons:{prev:"<",next:">"},scrollToTop:!0,scrollTarget:".favorites-wrapper",onPageChange(d){W=d,j(d)}}):n.innerHTML=""}async function tt(e){const t=document.querySelector(".favorites-wrapper");if(!t)return;const r=t.querySelector(".favorites-empty");if(r&&r.remove(),O=[],Array.isArray(e)&&e.length>0)try{const o=e.map(s=>et(s.trim()));(await Promise.all(o)).forEach(s=>{s&&O.push(s)})}catch(o){console.error("Error loading:",o)}if(O.length===0){Me();return}W=1,j(1)}function ae(){const e=K();e.length?tt(e):Me()}let ye;window.addEventListener("resize",()=>{clearTimeout(ye),ye=setTimeout(()=>{O.length>0&&j(W)},250)});const F=document.querySelector(".favorites-wrapper");F&&F.addEventListener("click",e=>{const t=e.target.closest(".favorites-delete-btn");if(t){const r=t.dataset.id;if(r){if(F.style.pointerEvents==="none")return;F.style.pointerEvents="none",Re(),qe(r),ae(),Ae(),setTimeout(()=>{F.style.pointerEvents="auto"},500)}}});ae();let p=null,he=!1;const re={};function Lt(e,t,r){re[e]={getContent:t,init:r}}function Q(){he||(p={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},he=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Q()}):Q();function rt(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!re[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:o,init:n}=re[r],s=o();if(!s){console.error(`Failed to get content for modal type "${r}"`);return}Oe(s),n&&setTimeout(async()=>{try{await n(U)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function Oe(e){var t,r;if(Q(),!p||!p.modal||!p.body){console.error("Modal template elements not found");return}if(typeof e=="string")p.body.innerHTML=e;else if(e instanceof HTMLElement)p.body.innerHTML="",p.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}p.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",ke,{once:!1}),(t=p.backdrop)==null||t.addEventListener("click",Be),(r=p.closeBtn)==null||r.addEventListener("click",Ne)}function U(){var t,r;if(Q(),!p||!p.modal)return;p.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",ke),(t=p.backdrop)==null||t.removeEventListener("click",Be),(r=p.closeBtn)==null||r.removeEventListener("click",Ne),p&&p.body&&(p.body.innerHTML=""),document.querySelector(".favorites-list")&&ae()}function ce(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function ke(e){if(e.key==="Escape"){if(ce())return;U()}}function Be(e){if(e.target===p.backdrop){if(ce())return;U()}}function Ne(){ce()||U()}const ot=new $;function nt(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function st(e){var a;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const o=r.querySelector(".exercise-modal__loader");o&&o.classList.remove("hidden");let n=sessionStorage.getItem("exerciseModalExerciseId")||((a=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:a.getAttribute("data-exercise-id"));if(n&&sessionStorage.removeItem("exerciseModalExerciseId"),!n){o&&o.classList.add("hidden"),k("Exercise ID is missing");return}let s;try{s=await ot.getExerciseById(n),s.id=s.id||s._id}catch(l){console.error("Failed to load exercise:",l),o&&o.classList.add("hidden"),k(l.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}it(r,s),o&&o.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&Ke(s,i);const c=r.querySelector(".exercise-modal__btn--rating");c&&!c.hasAttribute("data-modal-initialized")&&rt()}function it(e,t){const r=e.querySelector(".exercise-modal__title"),o=e.querySelector(".exercise-modal__rating-value"),n=e.querySelector(".exercise-modal__stars"),s=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),c=e.querySelector(".exercise-modal__bodypart"),a=e.querySelector(".exercise-modal__equipment"),l=e.querySelector(".exercise-modal__popular"),d=e.querySelector(".exercise-modal__calories"),u=e.querySelector(".exercise-modal__description"),h=e.querySelector(".favorites-btn"),T=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const E=t.rating||0;if(o&&(o.textContent=E.toFixed(1)),n&&(n.innerHTML=at(E)),s&&(s.src=t.gifUrl||"",s.alt=t.name||"Exercise GIF"),i&&(i.textContent=J(t.target||"")),c&&(c.textContent=J(t.bodyPart||"")),a&&(a.textContent=J(t.equipment||"")),l){const x=t.popularity||0;x>=1e3?l.textContent=(x/1e3).toFixed(1).replace(/\.0$/,"")+"k":l.textContent=x.toString()}if(d){const x=t.burnedCalories,I=d.closest("p");if(x&&x>0){const L=t.time||3;d.textContent=`${x}/${L} min`,I&&(I.style.display="")}else I&&(I.style.display="none")}u&&(u.textContent=t.description||t.instructions||""),h&&h.setAttribute("data-id",t.id||t._id||""),T&&T.setAttribute("data-exercise-id",t.id||t._id||"")}function at(e){const r=Math.round(e),o=5-r;let n="";const s="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)n+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<o;i++)n+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return n}function J(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}const ct=new $;function lt(){return window.innerWidth<768?8:10}let P={type:"body-parts",filter:"waist",keyword:""},ve=1,_e=1,X=0,Z="";async function dt({page:e=1,type:t,filter:r,keyword:o}={}){const n=document.querySelector(".js-exercises-list");if(!n)return;const s=lt();t!==void 0&&(P.type=t),r!==void 0&&(P.filter=r),o!==void 0&&(P.keyword=o);const i=P.type,c=P.filter,a=P.keyword||"",l=ut({page:e,limit:s,type:i,filter:c,keyword:a}),d=++X;Re();try{const u=await ct.getExercises(l);if(d!==X)return;const h=u.results||[];if(ve=u.page||e,_e=u.totalPages||1,We(u),oe(n,h),ft(ve,_e),h.length)Z="";else{const E=`${i}:${c}:${a||""}`;E!==Z&&(Z=E,(a||t!==void 0||r!==void 0)&&H.warning({title:"No results",message:a?`Nothing found for “${a}”. Try another search.`:"No exercises found for this category.",position:"topRight"}))}if(t!==void 0||r!==void 0||o!==void 0){const E=new URL(window.location.href);E.searchParams.set("type",i),E.searchParams.set("filter",c),a?E.searchParams.set("keyword",a):E.searchParams.delete("keyword"),window.history.pushState({},"",E)}}catch(u){if(console.error("Failed to load exercises:",u),d!==X)return;typeof k=="function"?k(u.message||"Failed to load exercises. Try again later."):H.error({title:"Error",message:u.message||"Failed to load exercises. Try again later.",position:"topRight"}),n.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}finally{d===X&&Ae()}}function ut({page:e,limit:t,type:r,filter:o,keyword:n}){const s={page:e,limit:t};switch(n&&(s.keyword=n),r){case"body-parts":s.bodypart=o;break;case"muscles":s.muscles=o;break;case"equipment":s.equipment=o;break;default:s.bodypart=o}return s}function oe(e,t,r=!1){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const o=t.map(n=>mt(n,r)).join("");e.innerHTML=o,pt(e)}function mt(e,t=!1){const{name:r,burnedCalories:o,bodyPart:n,target:s,time:i,rating:c,_id:a}=e,l=t?`<button type="button" class="favorites-delete-btn" data-id="${a}">
         <svg class="favorites-icon-trash" width="16" height="16" aria-label="Remove from favorites">
            <use href="./img/icons.svg#icon-trash"></use> 
         </svg>
       </button>`:`<div class="exercises__rating">
         <span class="exercises__meta-key">${c}</span>
         <span class="exercises__meta-value">
           <svg class="star" width="18" height="18">
             <use href="./img/icons.svg#icon-star"></use>
           </svg>
         </span>
       </div>`;return`
    <li class="exercises__item" data-exercise-id="${a}">
      <div class="exercises__item-top">
        <div class="exercises__item-info">
          <span class="exercises__badge">Workout</span>
          
          ${l} 
          
        </div>

        <button
          type="button"
          class="exercises__start-btn js-open-exercise"
          data-exercise-id="${a}"
        >
          Start
          <svg class="arrow__icon" width="16" height="16">
             <use href="./img/icons.svg#icon-arrow"></use>
          </svg>
        </button>
      </div>

      <div class="exercises__name-container">
        <svg class="exercises__icon" width="24" height="24">
           <use href="./img/icons.svg#icon-running-man"></use>
        </svg>
        <h3 class="exercises__name">${r}</h3>
      </div>

        <div class="exercises__item-bottom">
          <p class="exercises__meta">
            <span class="exercises__meta-label">Burned calories:</span>
            <span class="exercises__meta-value">${o} / ${i}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Body part:</span>
            <span class="exercises__meta-value">${n}</span>
          </p>
          <p class="exercises__meta">
            <span class="exercises__meta-label">Target:</span>
            <span class="exercises__meta-value">${s}</span>
          </p>
        </div>
      </li>
  `}function ft(e,t){const r=document.querySelector(".js-exercises-pagination");if(!r)return;te({container:r,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next"},icons:{prev:"<",next:">"},scrollToTop:!0,scrollTarget:".exercises",onPageChange(n){return dt({page:n})}});const o=document.querySelector(".filters__controls");o&&o.scrollIntoView({behavior:"smooth"})}function pt(e){e.querySelectorAll(".exercises__start-btn[data-exercise-id]").forEach(r=>{r.hasAttribute("data-click-handler-attached")||(r.addEventListener("click",gt),r.setAttribute("data-click-handler-attached","true"))})}async function gt(e){const r=e.currentTarget.getAttribute("data-exercise-id");if(!r){console.error("Exercise ID is missing");return}sessionStorage.setItem("exerciseModalExerciseId",r);const o=nt();if(!o){console.error("Failed to get exercise modal content");return}Oe(o);try{await st(U)}catch(n){console.error("Error initializing exercise modal:",n)}}(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=Te;if(!t||!e||!r)return;const o=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",o),r.addEventListener("click",o),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const Y=document.querySelector(".scroll-up-btn");if(Y){let e=function(t=1e3){const r=window.scrollY,o=performance.now();function n(s){const i=s-o,c=Math.min(i/t,1),a=1-Math.pow(1-c,3);window.scrollTo(0,r*(1-a)),c<1&&requestAnimationFrame(n)}requestAnimationFrame(n)};window.addEventListener("scroll",()=>{window.scrollY>300?Y.classList.add("show"):Y.classList.remove("show")}),Y.addEventListener("click",t=>{t.preventDefault(),e()})}let g=null,le=null,de=null;function ne(){var t,r,o,n,s,i;if(g)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}g={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=g.backdrop)==null||t.removeEventListener("click",Se,{capture:!0}),(r=g.cancelBtn)==null||r.removeEventListener("click",z,{capture:!0}),(o=g.confirmBtn)==null||o.removeEventListener("click",xe,{capture:!0}),(n=g.backdrop)==null||n.addEventListener("click",Se,{capture:!0}),(s=g.cancelBtn)==null||s.addEventListener("click",z,{capture:!0}),(i=g.confirmBtn)==null||i.addEventListener("click",xe,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ne):ne();function Et(e){e.key==="Escape"&&g&&!g.modal.classList.contains("hidden")&&z()}function Se(e){e.target===g.backdrop&&(e.stopPropagation(),e.preventDefault(),z(e))}function z(e){e&&(e.stopPropagation(),e.preventDefault());const t=de;Pe(),t&&t()}function xe(e){e&&(e.stopPropagation(),e.preventDefault());const t=le;Pe(),setTimeout(()=>{t&&t()},0)}function yt(e,t,r=null){if(ne(),!g||!g.modal){console.error("Confirm modal elements not found");return}le=t,de=r,g.message&&(g.message.textContent=e),g.modal.classList.remove("hidden"),document.addEventListener("keydown",Et,{once:!0})}function Pe(){!g||!g.modal||(g.modal.classList.add("hidden"),le=null,de=null)}const ht=new $;let B=null;function Tt(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return vt(t),t}function Ie(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ie):Ie();function vt(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(o=>{const n=o.id;o.id=`${n}-${r}`,e.querySelectorAll(`label[for="${n}"]`).forEach(i=>{i.setAttribute("for",o.id)})})}function Le(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),o=t.querySelector('input[name="rating"]'),n=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),c=t.querySelectorAll(".rating-star");r&&r.reset(),o&&(o.value="0"),s&&(s.value=""),i&&(i.value=""),n&&(n.textContent=""),c.forEach(a=>{a.classList.remove("active")})}function ee(e){B&&B()?yt("Are you sure you want to cancel your exercise review?",()=>{Le(),B=null,e()},()=>{}):(Le(),B=null,e())}function Ct(e){var fe;B=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let o=sessionStorage.getItem("ratingModalExerciseId")||((fe=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:fe.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("ratingModalExerciseId"),!o){k("Exercise ID is missing");return}const n=r.querySelectorAll(".rating-star"),s=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),c=r.querySelector(".rating-modal__btn--cancel"),a=r.querySelector('.rating-modal__btn[type="submit"]'),l=r.querySelector('input[name="email"]'),d=r.querySelector('textarea[name="comment"]'),u=r.querySelector(".rating-modal__form");let h=0;a&&(a.disabled=!0),s&&(s.value="0"),i&&(i.textContent="0");const T=()=>h>0&&h<=5&&(l==null?void 0:l.value.trim())!==""&&(d==null?void 0:d.value.trim())!=="",E=()=>{a&&(a.disabled=!T())};B=()=>h>0||(l==null?void 0:l.value.trim())!==""||(d==null?void 0:d.value.trim())!=="";const I=f=>{n.forEach((q,R)=>{R+1<=f?q.classList.add("active"):q.classList.remove("active")})};n.forEach((f,q)=>{const R=q+1;f.addEventListener("click",()=>{h=R,I(R),s&&(s.value=R),i&&(i.textContent=R),E()})}),[l,d].forEach(f=>{f&&f.addEventListener("input",E)});const L=document.querySelector("[data-modal-close]"),w=()=>{const f=document.getElementById("modal-confirm");return f&&!f.classList.contains("hidden")},m=f=>{if(f.key==="Escape"){if(w())return;f.stopPropagation(),ee(()=>{_(),e()})}},y=f=>{if(f.target===L){if(w())return;f.stopPropagation(),ee(()=>{_(),e()})}},_=()=>{document.removeEventListener("keydown",m,{capture:!0}),L==null||L.removeEventListener("click",y,{capture:!0}),S==null||S.removeEventListener("click",ue,{capture:!0})},S=document.querySelector(".modal-template__close-btn"),ue=f=>{w()||(f.stopPropagation(),me())};document.addEventListener("keydown",m,{capture:!0}),L==null||L.addEventListener("click",y,{capture:!0}),S==null||S.addEventListener("click",ue,{capture:!0});const me=()=>{ee(()=>{_(),e()})};c&&e&&c.addEventListener("click",()=>{me()}),u&&(u.setAttribute("data-no-auto-close","true"),u.addEventListener("submit",async f=>{if(f.preventDefault(),!T()){k("Please fill in all fields");return}const q=new FormData(u),R=parseInt(q.get("rating"),10),pe=q.get("email").trim(),De=q.get("comment").trim();a&&(a.disabled=!0,a.textContent="Sending...");try{await ht.rateExercise(o,{rate:R,email:pe,review:De}),Ue("Thank you for your feedback!"),B=null,setTimeout(()=>{e&&(_(),e())},1e3)}catch(ge){console.error("Failed to submit rating:",ge),k(ge.message||A.API_ERROR),a&&(a.disabled=!1,a.textContent="Send")}}))}export{St as M,D as V,$ as Y,k as a,Ue as b,Ae as c,xt as d,Lt as e,rt as f,Ct as g,Tt as h,It as i,st as j,nt as k,dt as l,te as r,Re as s};
//# sourceMappingURL=modal-rating-content-WV6nwhUN.js.map
