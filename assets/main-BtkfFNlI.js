import{a as Ae,i as pe}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Oe={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},f={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},h={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},Me={EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},C={EMAIL_REGEX:Me.EMAIL,RATING_MIN:1,RATING_MAX:5},y={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},R={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},qe={RATING:"rating",EXERCISE:"exercise"},p={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Valid email is required",RATING_RANGE:`Rating must be between ${C.RATING_MIN} and ${C.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"};class Y{constructor(t=Oe.BASE_API_URL){this.baseURL=t,this.axios=Ae.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(n=>n,n=>{var o,s;const r=((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||n.message||p.API_ERROR;return console.error("API Error:",r),Promise.reject(n)})}async _request(t,n,r=null,o=null){var s,a;try{const m={method:t,url:n};return r&&(m.data=r),o&&(m.params=o),(await this.axios(m)).data}catch(m){const d=((a=(s=m.response)==null?void 0:s.data)==null?void 0:a.message)||m.message;throw new Error(`${t.toUpperCase()} ${n} failed: ${d}`)}}async getFilters(t={}){return this._request("get",h.FILTERS,null,t)}async getExercises(t={}){return this._request("get",h.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(p.EXERCISE_ID_REQUIRED);return this._request("get",`${h.EXERCISES}/${t}`)}async getQuote(){return this._request("get",h.QUOTE)}async subscribe(t){if(!t.email||!C.EMAIL_REGEX.test(t.email))throw new Error(p.EMAIL_REQUIRED);return this._request("post",h.SUBSCRIPTION,t)}async rateExercise(t,n){if(!t)throw new Error(p.EXERCISE_ID_REQUIRED);if(!n.rate||n.rate<C.RATING_MIN||n.rate>C.RATING_MAX)throw new Error(p.RATING_RANGE);if(!n.email||!C.EMAIL_REGEX.test(n.email))throw new Error(p.EMAIL_REQUIRED);return this._request("patch",`${h.EXERCISES}/${t}/rating`,n)}}const ye={position:y.POSITION.TOP_RIGHT,timeout:y.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:f.GRAY_LIGHT,transitionIn:y.TRANSITION.IN,transitionOut:y.TRANSITION.OUT,fontFamily:"inherit",icon:""},Ne=e=>{pe.show({...ye,title:y.TITLE.SUCCESS,message:e,backgroundColor:f.BLACK,titleColor:f.WHITE,messageColor:f.WHITE,icon:y.ICON.SUCCESS,iconColor:f.WHITE})},b=e=>{pe.show({...ye,title:y.TITLE.ERROR,message:e,backgroundColor:f.BLACK,titleColor:f.WHITE,messageColor:f.GRAY_LIGHT,progressBarColor:f.WHITE,icon:y.ICON.ERROR,iconColor:f.WHITE})},we=new Y,k={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function ke(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:n,date:r}=JSON.parse(e),o=new Date(r),s=new Date;if(o.getDate()===s.getDate()){Ie(t,n);return}}xe()}ke();async function xe(){try{const e=await we.getQuote(),{quote:t,author:n}=e,r={quote:t,author:n,date:new Date};localStorage.setItem("quoteData",JSON.stringify(r)),Ie(t,n)}catch(e){b(e.message||p.API_ERROR)}}function Ie(e,t){k.content&&(k.content.textContent=e),k.author&&(k.author.textContent=t)}const Se="favorites";function z(){const e=localStorage.getItem(Se);return e?JSON.parse(e):[]}function Be(e){localStorage.setItem(Se,JSON.stringify(e))}function Pe(e){const n=z().filter(r=>r.id!==e);Be(n)}const O={quoteContainer:document.querySelector(".favorites-wrapper .quote"),listContainer:document.querySelector(".favorites-list")},x=z();x&&O.listContainer&&x.length===0?O.listContainer.innerHTML=`
    <div class="favorites-empty">
      <p>It appears that you havenâ€™t added any exercises to your favorites yet.</p>
      <p>To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
    </div>`:Array.isArray(x)&&O.listContainer&&Le(x);function Le(e){O.listContainer.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.classList.add("favorite-card"),n.setAttribute("data-id",t.id),n.innerHTML=`
      <img src="${t.gifUrl}" alt="${t.name}" class="favorite-img">
      <h3 class="favorite-title">${t.name}</h3>
      <p class="favorite-info"><b>Target:</b> ${t.target}</p>
      <p class="favorite-info"><b>Body part:</b> ${t.bodyPart}</p>
      <p class="favorite-info"><b>Equipment:</b> ${t.equipment}</p>

      <button class="delete-btn" data-id="${t.id}">ðŸ—‘</button>
    `,O.listContainer.appendChild(n),n.querySelector(".delete-btn").addEventListener("click",()=>{Pe(t.id);const o=z();Le(o)})})}function le(e){const t={"@context":R.SCHEMA_CONTEXT,"@type":R.SCHEMA_TYPES.ITEM_LIST,itemListElement:e==null?void 0:e.results.map((r,o)=>({"@type":R.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":R.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};let n=document.querySelector('script[data-schema="exercises"]');n||(n=document.createElement("script"),n.type=R.JSON_LD_TYPE,n.setAttribute("data-schema","exercises"),document.head.appendChild(n)),n&&(n.textContent=JSON.stringify(t))}const De=new Y,J=window.innerWidth<768?9:12;let D="Muscles",M=1;async function _e(e=D,t=1,n=J){D=e,M=t;try{const r={filter:e,page:t,limit:n},o=await De.getFilters(r);if(!o)return b("Data is empty");He(o.results||[]),Ge(M,o.totalPages||1),typeof le=="function"&&le(o)}catch(r){console.error("getCategories error:",r),b((r==null?void 0:r.message)||"Something went wrong")}}function He(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(n=>{const r=document.createElement("div");r.className="card",r.innerHTML=`
      <img src="${n.imgURL}" alt="${n.name}" />
      <div class="card-body">
        <h3>${n.name}</h3>
        <span class="card-filter">${n.filter}</span>
      </div>
    `,t.appendChild(r)}))}function Ge(e,t){const n=document.getElementById("pagination");if(n){n.innerHTML="";for(let r=1;r<=t;r++){const o=r,s=document.createElement("button");s.textContent=o,s.className="pagination-page",s.setAttribute("data-page",o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{o!==M&&(M=o,_e(D,o,J),window.scrollTo({top:0,behavior:"smooth"}))}),n.appendChild(s)}}}_e(D,M,J);(()=>{const e={openMenuBtn:document.querySelector("[data-menu-open]"),closeMenuBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]")};if(!e.openMenuBtn||!e.menu||!e.closeMenuBtn)return;const t=()=>{e.menu.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};e.openMenuBtn.addEventListener("click",t),e.closeMenuBtn.addEventListener("click",t),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.menu.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const B=document.querySelector("[data-filters-tabs]"),T=document.querySelector(".filters__search"),F=document.querySelector(".filters__subtitle"),$e=()=>window.matchMedia("(min-width: 1440px)").matches;if(B&&T&&F){const e=n=>{const r=$e();n==="bodypart"?(F.textContent=" / Waist",r?(T.classList.add("filters__search--visible"),T.classList.remove("filters__search--visible-mobile")):(T.classList.add("filters__search--visible-mobile"),T.classList.remove("filters__search--visible"))):(F.textContent="",T.classList.remove("filters__search--visible","filters__search--visible-mobile"))};B.addEventListener("click",n=>{const r=n.target.closest(".filters__tab");r&&(B.querySelectorAll(".filters__tab").forEach(o=>{const s=o===r;o.classList.toggle("filters__tab--active",s),o.setAttribute("aria-selected",s?"true":"false")}),e(r.dataset.filter))});const t=B.querySelector(".filters__tab--active");t&&e(t.dataset.filter)}const A=document.querySelector(".filters__input"),P=document.querySelector(".filters__clear-btn");if(A&&P){const e=()=>{A.value.trim()?P.classList.add("filters__clear-btn--visible"):P.classList.remove("filters__clear-btn--visible")};A.addEventListener("input",e),P.addEventListener("click",()=>{A.value="",A.focus(),e()}),e()}const j=document.querySelector(".footer__form"),de=j.querySelector(".footer__input"),u=j.querySelector(".footer__message"),Ue=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/;j.addEventListener("submit",async e=>{e.preventDefault();const t=de.value.trim();if(!Ue.test(t)){u.textContent="Please enter a valid email.",u.classList.remove("footer__message--success"),u.classList.add("footer__message--error");return}try{const n=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(n.ok)u.textContent="Subscription successful!",u.classList.remove("footer__message--error"),u.classList.add("footer__message--success"),de.value="";else{const r=await n.json();u.textContent=r.message||"Subscription failed.",u.classList.remove("footer__message--success"),u.classList.add("footer__message--error")}}catch{u.textContent="Network error. Try again later.",u.classList.remove("footer__message--success"),u.classList.add("footer__message--error")}});document.getElementById("loader-overlay"),document.getElementById("bg-loader");let c=null,ue=!1;const Q={};function Fe(e,t,n){Q[e]={getContent:t,init:n}}function H(){ue||(c={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},ue=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{H()}):H();function Xe(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const n=t.getAttribute("data-modal");if(!Q[n]){console.warn(`Modal type "${n}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:r,init:o}=Q[n],s=r();if(!s){console.error(`Failed to get content for modal type "${n}"`);return}Qe(s),o&&setTimeout(async()=>{try{await o($)}catch(a){console.error("Error initializing modal:",a)}},100)}),t.setAttribute("data-modal-initialized","true")})}function Qe(e){var t,n;if(H(),!c||!c.modal||!c.body){console.error("Modal template elements not found");return}if(typeof e=="string")c.body.innerHTML=e;else if(e instanceof HTMLElement)c.body.innerHTML="",c.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}c.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",ve,{once:!1}),(t=c.backdrop)==null||t.addEventListener("click",he),(n=c.closeBtn)==null||n.addEventListener("click",Te)}function $(){var e,t;H(),!(!c||!c.modal)&&(c.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",ve),(e=c.backdrop)==null||e.removeEventListener("click",he),(t=c.closeBtn)==null||t.removeEventListener("click",Te),c&&c.body&&(c.body.innerHTML=""))}function K(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function ve(e){if(e.key==="Escape"){if(K())return;$()}}function he(e){if(e.target===c.backdrop){if(K())return;$()}}function Te(){K()||$()}let l=null,V=null,Z=null;function W(){var t,n,r,o,s,a;if(l)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}l={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=l.backdrop)==null||t.removeEventListener("click",me,{capture:!0}),(n=l.cancelBtn)==null||n.removeEventListener("click",G,{capture:!0}),(r=l.confirmBtn)==null||r.removeEventListener("click",fe,{capture:!0}),(o=l.backdrop)==null||o.addEventListener("click",me,{capture:!0}),(s=l.cancelBtn)==null||s.addEventListener("click",G,{capture:!0}),(a=l.confirmBtn)==null||a.addEventListener("click",fe,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",W):W();function We(e){e.key==="Escape"&&l&&!l.modal.classList.contains("hidden")&&G()}function me(e){e.target===l.backdrop&&(e.stopPropagation(),e.preventDefault(),G(e))}function G(e){e&&(e.stopPropagation(),e.preventDefault());const t=Z;Ce(),t&&t()}function fe(e){e&&(e.stopPropagation(),e.preventDefault());const t=V;Ce(),setTimeout(()=>{t&&t()},0)}function Ye(e,t,n=null){if(W(),!l||!l.modal){console.error("Confirm modal elements not found");return}V=t,Z=n,l.message&&(l.message.textContent=e),l.modal.classList.remove("hidden"),document.addEventListener("keydown",We,{once:!0})}function Ce(){!l||!l.modal||(l.modal.classList.add("hidden"),V=null,Z=null)}const ze=new Y;let _=null;function Je(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return je(t),t}function Ee(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const n=t.getAttribute("data-exercise-id");n&&sessionStorage.setItem("ratingModalExerciseId",n)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ee):Ee();function je(e){const t=e.querySelectorAll("[id]"),n=Date.now();t.forEach(r=>{const o=r.id;r.id=`${o}-${n}`,e.querySelectorAll(`label[for="${o}"]`).forEach(a=>{a.setAttribute("for",r.id)})})}function ge(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const n=t.querySelector(".rating-modal__form"),r=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),a=t.querySelector('textarea[name="comment"]'),m=t.querySelectorAll(".rating-star");n&&n.reset(),r&&(r.value="0"),s&&(s.value=""),a&&(a.value=""),o&&(o.textContent=""),m.forEach(d=>{d.classList.remove("active")})}function X(e){_&&_()?Ye("Are you sure you want to cancel your exercise review?",()=>{ge(),_=null,e()},()=>{}):(ge(),_=null,e())}function Ke(e){var ae;_=null;const t=document.querySelector("[data-modal-body]"),n=t==null?void 0:t.querySelector(".rating-modal");if(!t||!n){console.error("Modal body or rating modal not found");return}let r=sessionStorage.getItem("ratingModalExerciseId")||((ae=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:ae.getAttribute("data-exercise-id"));if(r&&sessionStorage.removeItem("ratingModalExerciseId"),!r){b("Exercise ID is missing");return}const o=n.querySelectorAll(".rating-star"),s=n.querySelector('input[name="rating"]'),a=n.querySelector(".rating-modal__rating-text"),m=n.querySelector(".rating-modal__btn--cancel"),d=n.querySelector('.rating-modal__btn[type="submit"]'),I=n.querySelector('input[name="email"]'),S=n.querySelector('textarea[name="comment"]'),q=n.querySelector(".rating-modal__form");let N=0;d&&(d.disabled=!0),s&&(s.value="0"),a&&(a.textContent="0");const ee=()=>N>0&&N<=5&&(I==null?void 0:I.value.trim())!==""&&(S==null?void 0:S.value.trim())!=="",te=()=>{d&&(d.disabled=!ee())};_=()=>N>0||(I==null?void 0:I.value.trim())!==""||(S==null?void 0:S.value.trim())!=="";const be=i=>{o.forEach((E,g)=>{g+1<=i?E.classList.add("active"):E.classList.remove("active")})};o.forEach((i,E)=>{const g=E+1;i.addEventListener("click",()=>{N=g,be(g),s&&(s.value=g),a&&(a.textContent=g),te()})}),[I,S].forEach(i=>{i&&i.addEventListener("input",te)});const L=document.querySelector("[data-modal-close]"),U=()=>{const i=document.getElementById("modal-confirm");return i&&!i.classList.contains("hidden")},ne=i=>{if(i.key==="Escape"){if(U())return;i.stopPropagation(),X(()=>{w(),e()})}},oe=i=>{if(i.target===L){if(U())return;i.stopPropagation(),X(()=>{w(),e()})}},w=()=>{document.removeEventListener("keydown",ne,{capture:!0}),L==null||L.removeEventListener("click",oe,{capture:!0}),v==null||v.removeEventListener("click",re,{capture:!0})},v=document.querySelector(".modal-template__close-btn"),re=i=>{U()||(i.stopPropagation(),se())};document.addEventListener("keydown",ne,{capture:!0}),L==null||L.addEventListener("click",oe,{capture:!0}),v==null||v.addEventListener("click",re,{capture:!0});const se=()=>{X(()=>{w(),e()})};m&&e&&m.addEventListener("click",()=>{se()}),q&&(q.setAttribute("data-no-auto-close","true"),q.addEventListener("submit",async i=>{if(i.preventDefault(),!ee()){b("Please fill in all fields");return}const E=new FormData(q),g=parseInt(E.get("rating"),10),ie=E.get("email").trim(),Re=E.get("comment").trim();d&&(d.disabled=!0,d.textContent="Sending...");try{await ze.rateExercise(r,{rate:g,email:ie,review:Re}),Ne("Thank you for your feedback!"),_=null,setTimeout(()=>{e&&(w(),e())},1e3)}catch(ce){console.error("Failed to submit rating:",ce),b(ce.message||p.API_ERROR),d&&(d.disabled=!1,d.textContent="Send")}}))}document.addEventListener("DOMContentLoaded",()=>{Ve()});function Ve(){Fe(qe.RATING,Je,Ke),Xe()}
//# sourceMappingURL=main-BtkfFNlI.js.map
