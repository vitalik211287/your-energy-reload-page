import{a as Ye,i as ne}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const Qe={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},h={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},O={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},We={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},A={EMAIL_REGEX:We.EMAIL,RATING_MIN:1,RATING_MAX:5},R={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},b={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},ye={RATING:"rating",EXERCISE:"exercise"},L={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${A.RATING_MIN} and ${A.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},v={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class P{constructor(t=Qe.BASE_API_URL){this.baseURL=t,this.axios=Ye.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var o,s;const n=((s=(o=r.response)==null?void 0:o.data)==null?void 0:s.message)||r.message||L.API_ERROR;return console.error("API Error:",n),Promise.reject(r)})}async _request(t,r,n=null,o=null){var s,i;try{const a={method:t,url:r};return n&&(a.data=n),o&&(a.params=o),(await this.axios(a)).data}catch(a){const c=((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||a.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${c}`)}}async getFilters(t={}){return this._request("get",O.FILTERS,null,t)}async getExercises(t={}){return this._request("get",O.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(L.EXERCISE_ID_REQUIRED);return this._request("get",`${O.EXERCISES}/${t}`)}async getQuote(){return this._request("get",O.QUOTE)}async subscribe(t){if(!t.email||!A.EMAIL_REGEX.test(t.email))throw new Error(L.EMAIL_REQUIRED);return this._request("post",O.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(L.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<A.RATING_MIN||r.rate>A.RATING_MAX)throw new Error(L.RATING_RANGE);if(!r.email||!A.EMAIL_REGEX.test(r.email))throw new Error(L.EMAIL_REQUIRED);return this._request("patch",`${O.EXERCISES}/${t}/rating`,r)}}const Ae={position:R.POSITION.TOP_RIGHT,timeout:R.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:h.GRAY_LIGHT,transitionIn:R.TRANSITION.IN,transitionOut:R.TRANSITION.OUT,fontFamily:"inherit",icon:""},je=e=>{ne.show({...Ae,title:R.TITLE.SUCCESS,message:e,backgroundColor:h.BLACK,titleColor:h.WHITE,messageColor:h.WHITE,icon:R.ICON.SUCCESS,iconColor:h.WHITE})},I=e=>{ne.show({...Ae,title:R.TITLE.ERROR,message:e,backgroundColor:h.BLACK,titleColor:h.WHITE,messageColor:h.GRAY_LIGHT,progressBarColor:h.WHITE,icon:R.ICON.ERROR,iconColor:h.WHITE})},ze=new P,$={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function Je(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:n}=JSON.parse(e),o=new Date(n),s=new Date;if(o.getDate()===s.getDate()){Me(t,r);return}}Ve()}Je();async function Ve(){try{const e=await ze.getQuote(),{quote:t,author:r}=e,n={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(n)),Me(t,r)}catch(e){I(e.message||L.API_ERROR)}}function Me(e,t){$.content&&($.content.textContent=e),$.author&&($.author.textContent=t)}const we="favorites";function D(){const e=localStorage.getItem(we);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(n=>n.id||n._id).filter(Boolean);return oe(r),r}return t}function oe(e){localStorage.setItem(we,JSON.stringify(e))}function _e(e){return D().includes(e)}function Ke(e){const t=D(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),oe(t))}function Oe(e){const r=D().filter(n=>n!==e);oe(r)}const Ze={};function et(e,t=null){const r=t||v.favoriteBtn;if(!r)return;Object.assign(Ze,e);const n=e.id||e._id,o=_e(n);V(r,o);const s=r.cloneNode(!0);r.parentNode.replaceChild(s,r),s.onclick=()=>{const i=e.id||e._id;_e(i)?(Oe(i),V(s,!1)):(Ke(e),V(s,!0))}}function V(e,t){const r=Array.from(e.childNodes).filter(n=>n.nodeType===Node.TEXT_NODE&&n.textContent.trim());if(r.length>0)r[0].textContent=t?"Remove from favorites":"Add to favorites";else{const n=e.querySelector("svg"),o=document.createTextNode(t?"Remove from favorites":"Add to favorites");n?e.insertBefore(o,n):e.appendChild(o)}}function ke(){v.favoritesList.innerHTML=`
    <div class="favorites-empty">
      <p>It appears that you havenâ€™t added any exercises to your favorites yet.</p>
      <p>To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
    </div>`}function Be(e){v.favoritesList.innerHTML="",e.forEach(t=>{const r=document.createElement("div");r.classList.add("favorite-card"),r.dataset.id=t.id,r.innerHTML=`
      <img src="${t.gifUrl}" alt="${t.name}" class="favorite-img">
      <h3 class="favorite-title">${t.name}</h3>
      <p class="favorite-info"><b>Target:</b> ${t.target}</p>
      <p class="favorite-info"><b>Body part:</b> ${t.bodyPart}</p>
      <p class="favorite-info"><b>Equipment:</b> ${t.equipment}</p>

      <button class="delete-btn" data-id="${t.id}">ðŸ—‘</button>
    `,v.favoritesList.appendChild(r),r.querySelector(".delete-btn").addEventListener("click",()=>{Oe(t.id);const o=D();o.length?Be(o):ke()})})}const ve=D();v.favoritesList&&(ve.length?Be(ve):ke());function Se(e){if(!e||!e.results)return;const t={"@context":b.SCHEMA_CONTEXT,"@type":b.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,n)=>({"@type":b.SCHEMA_TYPES.LIST_ITEM,position:n+1,item:{"@type":b.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};Ne("filters",t)}function tt(e){if(!e||!e.results||e.results.length===0)return;const t={"@context":b.SCHEMA_CONTEXT,"@type":b.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,n)=>({"@type":b.SCHEMA_TYPES.LIST_ITEM,position:n+1,item:{"@type":b.SCHEMA_TYPES.EXERCISE_PLAN,name:rt(r.name),description:r.description,image:r.gifUrl,audience:{"@type":"PeopleAudience",suggestedGender:"unisex"},category:r.target,keywords:`${r.bodyPart}, ${r.equipment}, fitness`}}))};Ne("detailed-exercises",t)}function Ne(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=b.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function rt(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}const nt=new P,se=window.innerWidth<768?9:12;let W="Muscles",B=1;async function Pe(e=W,t=1,r=se){W=e,B=t;try{const n={filter:e,page:t,limit:r},o=await nt.getFilters(n);if(!o)return I("Data is empty");ot(o.results||[]),st(B,o.totalPages||1),typeof Se=="function"&&Se(o)}catch(n){console.error("getCategories error:",n),I((n==null?void 0:n.message)||"Something went wrong")}}function ot(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(r=>{const n=document.createElement("div");n.className="card",n.innerHTML=`
      <img src="${r.imgURL}" alt="${r.name}" />
      <div class="card-body">
        <h3>${r.name}</h3>
        <span class="card-filter">${r.filter}</span>
      </div>
    `,t.appendChild(n)}))}function st(e,t){const r=document.getElementById("pagination");if(r){r.innerHTML="";for(let n=1;n<=t;n++){const o=n,s=document.createElement("button");s.textContent=o,s.className="pagination-page",s.setAttribute("data-page",o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{o!==B&&(B=o,Pe(W,o,se),window.scrollTo({top:0,behavior:"smooth"}))}),r.appendChild(s)}}}Pe(W,B,se);(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=v;if(!t||!e||!r)return;const n=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",n),r.addEventListener("click",n),window.matchMedia("(min-width: 768px)").addEventListener("change",o=>{o.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const{filtersTabs:U,filtersSearchBox:G,filtersSubtitle:K}=v,it=()=>window.matchMedia("(min-width: 1440px)").matches;if(U&&G&&K){const e=r=>{const n=it();r==="bodypart"?(K.textContent=" / Waist",G.classList.add("filters__search--visible")):(K.textContent="",G.classList.remove("filters__search--visible"))};U.addEventListener("click",r=>{const n=r.target.closest(".filters__tab");n&&(U.querySelectorAll(".filters__tab").forEach(o=>{const s=o===n;o.classList.toggle("filters__tab--active",s),o.setAttribute("aria-selected",s?"true":"false")}),e(n.dataset.filter))});const t=U.querySelector(".filters__tab--active");t&&e(t.dataset.filter)}const k=document.querySelector(".filters__input"),X=document.querySelector(".filters__clear-btn");if(k&&X){const e=()=>{k.value.trim()?X.classList.add("filters__clear-btn--visible"):X.classList.remove("filters__clear-btn--visible")};k.addEventListener("input",e),X.addEventListener("click",()=>{k.value="",k.focus(),e()}),e()}const ie=document.querySelector(".footer__form"),he=ie.querySelector(".footer__input"),_=ie.querySelector(".footer__message");ie.addEventListener("submit",async e=>{e.preventDefault();const t=he.value.trim();if(!t||!A.EMAIL_REGEX.test(t)){_.textContent=L.EMAIL_REQUIRED,_.classList.remove("footer__message--success"),_.classList.add("footer__message--error");return}try{const r=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(r.ok)_.textContent="Subscription successful!",_.classList.remove("footer__message--error"),_.classList.add("footer__message--success"),he.value="";else{const n=await r.json();_.textContent=n.message||"Subscription failed.",_.classList.remove("footer__message--success"),_.classList.add("footer__message--error")}}catch{_.textContent="Network error. Try again later.",_.classList.remove("footer__message--success"),_.classList.add("footer__message--error")}});const Y=document.querySelector(".scroll-up-btn");if(Y){let e=function(t=1e3){const r=window.scrollY,n=performance.now();function o(s){const i=s-n,a=Math.min(i/t,1),c=1-Math.pow(1-a,3);window.scrollTo(0,r*(1-c)),a<1&&requestAnimationFrame(o)}requestAnimationFrame(o)};window.addEventListener("scroll",()=>{window.scrollY>300?Y.classList.add("show"):Y.classList.remove("show")}),Y.addEventListener("click",t=>{t.preventDefault(),e()})}const Q={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function at(){Q.loaderOverlay&&Q.loaderOverlay.classList.add("hidden"),Q.loaderBg&&Q.loaderBg.classList.remove("bg-loader")}let f=null,Le=!1;const te={};function be(e,t,r){te[e]={getContent:t,init:r}}function j(){Le||(f={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},Le=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{j()}):j();function De(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!te[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:n,init:o}=te[r],s=n();if(!s){console.error(`Failed to get content for modal type "${r}"`);return}Fe(s),o&&setTimeout(async()=>{try{await o(F)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function Fe(e){var t,r;if(j(),!f||!f.modal||!f.body){console.error("Modal template elements not found");return}if(typeof e=="string")f.body.innerHTML=e;else if(e instanceof HTMLElement)f.body.innerHTML="",f.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}f.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",He,{once:!1}),(t=f.backdrop)==null||t.addEventListener("click",$e),(r=f.closeBtn)==null||r.addEventListener("click",Ue)}function F(){var e,t;j(),!(!f||!f.modal)&&(f.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",He),(e=f.backdrop)==null||e.removeEventListener("click",$e),(t=f.closeBtn)==null||t.removeEventListener("click",Ue),f&&f.body&&(f.body.innerHTML=""))}function ae(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function He(e){if(e.key==="Escape"){if(ae())return;F()}}function $e(e){if(e.target===f.backdrop){if(ae())return;F()}}function Ue(){ae()||F()}let p=null,ce=null,le=null;function re(){var t,r,n,o,s,i;if(p)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}p={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=p.backdrop)==null||t.removeEventListener("click",Ie,{capture:!0}),(r=p.cancelBtn)==null||r.removeEventListener("click",z,{capture:!0}),(n=p.confirmBtn)==null||n.removeEventListener("click",xe,{capture:!0}),(o=p.backdrop)==null||o.addEventListener("click",Ie,{capture:!0}),(s=p.cancelBtn)==null||s.addEventListener("click",z,{capture:!0}),(i=p.confirmBtn)==null||i.addEventListener("click",xe,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",re):re();function ct(e){e.key==="Escape"&&p&&!p.modal.classList.contains("hidden")&&z()}function Ie(e){e.target===p.backdrop&&(e.stopPropagation(),e.preventDefault(),z(e))}function z(e){e&&(e.stopPropagation(),e.preventDefault());const t=le;Ge(),t&&t()}function xe(e){e&&(e.stopPropagation(),e.preventDefault());const t=ce;Ge(),setTimeout(()=>{t&&t()},0)}function lt(e,t,r=null){if(re(),!p||!p.modal){console.error("Confirm modal elements not found");return}ce=t,le=r,p.message&&(p.message.textContent=e),p.modal.classList.remove("hidden"),document.addEventListener("keydown",ct,{once:!0})}function Ge(){!p||!p.modal||(p.modal.classList.add("hidden"),ce=null,le=null)}const dt=new P;let M=null;function ut(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return mt(t),t}function Te(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Te):Te();function mt(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(n=>{const o=n.id;n.id=`${o}-${r}`,e.querySelectorAll(`label[for="${o}"]`).forEach(i=>{i.setAttribute("for",n.id)})})}function Ce(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),n=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),a=t.querySelectorAll(".rating-star");r&&r.reset(),n&&(n.value="0"),s&&(s.value=""),i&&(i.value=""),o&&(o.textContent=""),a.forEach(c=>{c.classList.remove("active")})}function Z(e){M&&M()?lt("Are you sure you want to cancel your exercise review?",()=>{Ce(),M=null,e()},()=>{}):(Ce(),M=null,e())}function ft(e){var pe;M=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let n=sessionStorage.getItem("ratingModalExerciseId")||((pe=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:pe.getAttribute("data-exercise-id"));if(n&&sessionStorage.removeItem("ratingModalExerciseId"),!n){I("Exercise ID is missing");return}const o=r.querySelectorAll(".rating-star"),s=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),a=r.querySelector(".rating-modal__btn--cancel"),c=r.querySelector('.rating-modal__btn[type="submit"]'),u=r.querySelector('input[name="email"]'),E=r.querySelector('textarea[name="comment"]'),S=r.querySelector(".rating-modal__form");let x=0;c&&(c.disabled=!0),s&&(s.value="0"),i&&(i.textContent="0");const T=()=>x>0&&x<=5&&(u==null?void 0:u.value.trim())!==""&&(E==null?void 0:E.value.trim())!=="",l=()=>{c&&(c.disabled=!T())};M=()=>x>0||(u==null?void 0:u.value.trim())!==""||(E==null?void 0:E.value.trim())!=="";const g=m=>{o.forEach((C,q)=>{q+1<=m?C.classList.add("active"):C.classList.remove("active")})};o.forEach((m,C)=>{const q=C+1;m.addEventListener("click",()=>{x=q,g(q),s&&(s.value=q),i&&(i.textContent=q),l()})}),[u,E].forEach(m=>{m&&m.addEventListener("input",l)});const y=document.querySelector("[data-modal-close]"),J=()=>{const m=document.getElementById("modal-confirm");return m&&!m.classList.contains("hidden")},de=m=>{if(m.key==="Escape"){if(J())return;m.stopPropagation(),Z(()=>{H(),e()})}},ue=m=>{if(m.target===y){if(J())return;m.stopPropagation(),Z(()=>{H(),e()})}},H=()=>{document.removeEventListener("keydown",de,{capture:!0}),y==null||y.removeEventListener("click",ue,{capture:!0}),w==null||w.removeEventListener("click",me,{capture:!0})},w=document.querySelector(".modal-template__close-btn"),me=m=>{J()||(m.stopPropagation(),fe())};document.addEventListener("keydown",de,{capture:!0}),y==null||y.addEventListener("click",ue,{capture:!0}),w==null||w.addEventListener("click",me,{capture:!0});const fe=()=>{Z(()=>{H(),e()})};a&&e&&a.addEventListener("click",()=>{fe()}),S&&(S.setAttribute("data-no-auto-close","true"),S.addEventListener("submit",async m=>{if(m.preventDefault(),!T()){I("Please fill in all fields");return}const C=new FormData(S),q=parseInt(C.get("rating"),10),ge=C.get("email").trim(),Xe=C.get("comment").trim();c&&(c.disabled=!0,c.textContent="Sending...");try{await dt.rateExercise(n,{rate:q,email:ge,review:Xe}),je("Thank you for your feedback!"),M=null,setTimeout(()=>{e&&(H(),e())},1e3)}catch(Ee){console.error("Failed to submit rating:",Ee),I(Ee.message||L.API_ERROR),c&&(c.disabled=!1,c.textContent="Send")}}))}function pt({container:e,currentPage:t,totalPages:r,onPageChange:n,mode:o="full",showArrows:s=!1,classes:i={},icons:a={},scrollToTop:c=!0,scrollTarget:u=null}){if(!e)return;e.innerHTML="";const{page:E="",active:S="active",arrow:x=""}=i,T=(l,d,g="")=>{const y=document.createElement("button");return y.className=g,y.textContent=l,y.dataset.page=d,y};if(o==="full")for(let l=1;l<=r;l++){const d=T(l,l,E);l===t&&d.classList.add(S),e.appendChild(d)}else if(o==="neighbors"){let l=[];r<=3?l=Array.from({length:r},(d,g)=>g+1):t===1?l=[1,2,3]:t===r?l=[r-2,r-1,r]:l=[t-1,t,t+1],l.forEach(d=>{const g=T(d,d,`${E} ${d===t?S:""}`.trim());e.appendChild(g)})}e.querySelectorAll("button").forEach(l=>{l.addEventListener("click",()=>{const d=Number(l.dataset.page);if(!(Number.isNaN(d)||d===t)&&(n(d),c))if(u){const g=typeof u=="string"?document.querySelector(u):u;g&&g.scrollIntoView({behavior:"smooth",block:"start"})}else window.scrollTo({top:0,behavior:"smooth"})})})}const gt=new P;function Et(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function yt(e){var c;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const n=r.querySelector(".exercise-modal__loader");n&&n.classList.remove("hidden");let o=sessionStorage.getItem("exerciseModalExerciseId")||((c=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:c.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("exerciseModalExerciseId"),!o){n&&n.classList.add("hidden"),I("Exercise ID is missing");return}let s;try{s=await gt.getExerciseById(o),s.id=s.id||s._id}catch(u){console.error("Failed to load exercise:",u),n&&n.classList.add("hidden"),I(u.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}_t(r,s),n&&n.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&et(s,i);const a=r.querySelector(".exercise-modal__btn--rating");a&&!a.hasAttribute("data-modal-initialized")&&De()}function _t(e,t){const r=e.querySelector(".exercise-modal__title"),n=e.querySelector(".exercise-modal__rating-value"),o=e.querySelector(".exercise-modal__stars"),s=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),a=e.querySelector(".exercise-modal__bodypart"),c=e.querySelector(".exercise-modal__equipment"),u=e.querySelector(".exercise-modal__popular"),E=e.querySelector(".exercise-modal__calories"),S=e.querySelector(".exercise-modal__description"),x=e.querySelector(".favorites-btn"),T=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const l=t.rating||0;if(n&&(n.textContent=l.toFixed(1)),o&&(o.innerHTML=vt(l)),s&&(s.src=t.gifUrl||"",s.alt=t.name||"Exercise GIF"),i&&(i.textContent=ee(t.target||"")),a&&(a.textContent=ee(t.bodyPart||"")),c&&(c.textContent=ee(t.equipment||"")),u){const d=t.popularity||0;d>=1e3?u.textContent=(d/1e3).toFixed(1).replace(/\.0$/,"")+"k":u.textContent=d.toString()}if(E){const d=t.burnedCalories,g=E.closest("p");if(d&&d>0){const y=t.time||3;E.textContent=`${d}/${y} min`,g&&(g.style.display="")}else g&&(g.style.display="none")}S&&(S.textContent=t.description||t.instructions||""),x&&x.setAttribute("data-id",t.id||t._id||""),T&&T.setAttribute("data-exercise-id",t.id||t._id||"")}function vt(e){const r=Math.round(e),n=5-r;let o="";const s="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)o+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<n;i++)o+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return o}function ee(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}const St=new P;function ht(){return window.innerWidth<768?8:10}let qe=1,Re=1;async function Lt(){v.exercisesList&&await N({page:1})}async function N({page:e=1,keyword:t=""}={}){const r=v.exercisesList;if(!r)return;const n=ht(),{type:o,filter:s}=bt(),i=xt({page:e,limit:n,type:o,filter:s,keyword:t});try{const a=await St.getExercises(i),c=a.results||[];tt(a),qe=a.page||e,Re=a.totalPages||1,Tt(r,c),At(qe,Re)}catch(a){console.error("Failed to load exercises:",a),I(a.message||"Failed to load exercises. Try again later."),r.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}}function bt(){var s;const e=new URLSearchParams(window.location.search),t=e.get("type")||e.get("tab"),r=((s=v.exercisesActiveTab)==null?void 0:s.dataset.tab)||t||"body-parts",n=e.get("filter"),o=It(r);return{type:r,filter:n||o}}function It(e){switch(e){case"muscles":return"abs";case"equipment":return"body weight";case"body-parts":default:return"waist"}}function xt({page:e,limit:t,type:r,filter:n,keyword:o}){const s={page:e,limit:t};switch(o&&(s.keyword=o),r){case"body-parts":s.bodypart=n;break;case"muscles":s.muscles=n;break;case"equipment":s.equipment=n;break;default:s.bodypart=n}return s}function Tt(e,t){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const r=t.map(Ct).join("");e.innerHTML=r,qt(e)}function Ct(e){const{name:t,burnedCalories:r,bodyPart:n,target:o,rating:s}=e;return`
    <li class="exercises__item" data-exercise-id="${e._id}">
      <div class="exercises__item-top">
        <div class="exercises__item-info">
          <span class="exercises__badge">Workout</span>
          <div class="exercises__rating">
            <span class="exercises__meta-key">${s}</span>
            <span class="exercises__meta-value">
              <svg class="star"></svg>
            </span>
          </div>
        </div>

        <button
          type="button"
          class="exercises__start-btn js-open-exercise"
          data-exercise-id="${e._id}"
        >
          Start
          <svg class="arrow__icon"></svg>
        </button>
      </div>

      <div class="exercises__name-container">
        <svg class="exercises__icon"></svg>
        <h3 class="exercises__name">${t}</h3>
      </div>

      <div class="exercises__item-bottom">
        <p class="exercises__meta">
          <span class="exercises__meta-label">Burned calories:</span>
          <span class="exercises__meta-value">${r}</span>
        </p>
        <p class="exercises__meta">
          <span class="exercises__meta-label">Body part:</span>
          <span class="exercises__meta-value">${n}</span>
        </p>
        <p class="exercises__meta">
          <span class="exercises__meta-label">Target:</span>
          <span class="exercises__meta-value">${o}</span>
        </p>
      </div>
    </li>
  `}function qt(e){e.querySelectorAll(".exercises__start-btn[data-exercise-id]").forEach(r=>{r.hasAttribute("data-click-handler-attached")||(r.addEventListener("click",Rt),r.setAttribute("data-click-handler-attached","true"))})}async function Rt(e){const r=e.currentTarget.getAttribute("data-exercise-id");if(!r){console.error("Exercise ID is missing");return}sessionStorage.setItem("exerciseModalExerciseId",r);const n=Et();if(!n){console.error("Failed to get exercise modal content");return}Fe(n);try{await yt(F)}catch(o){console.error("Error initializing exercise modal:",o)}}function At(e,t){const r=v.exercisesPagination;pt({container:r,currentPage:e,totalPages:t,mode:"neighbors",classes:{page:"exercises__page",active:"active"},onPageChange(n){N({page:n})}})}function Mt(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var t,r;(t=document.getElementById("categories-section"))==null||t.classList.add("hidden"),(r=document.getElementById("exercises-section"))==null||r.classList.remove("hidden"),N({page:1})}))}function wt(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),r=document.querySelector(".filters__clear-btn");if(!e||!t)return;const n=()=>{const o=e.value.trim();if(!o){ne.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}N({page:1,keyword:o})};t.addEventListener("click",n),e.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),n())}),r&&r.addEventListener("click",()=>{e.value="",e.focus(),N({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>at(),200),Ot()});function Ot(){be(ye.RATING,ut,ft),be(ye.EXERCISE,getExerciseModalContent,initExerciseModal),De()}Mt();wt();document.addEventListener("DOMContentLoaded",()=>{Lt()});
//# sourceMappingURL=main-CBu9k-Vo.js.map
