import{a as Fe,i as z}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const Ue={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},T={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},$={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},Ge={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/},D={EMAIL_REGEX:Ge.EMAIL,RATING_MIN:1,RATING_MAX:5},M={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},R={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},bt={RATING:"rating",EXERCISE:"exercise"},q={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Please enter a valid email.",RATING_RANGE:`Rating must be between ${D.RATING_MIN} and ${D.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},be={modalBody:document.querySelector("[data-modal-body]"),favoritesBtn:document.querySelector(".favorites-btn"),favoritesList:document.querySelector(".favorites-list"),exercisesList:document.querySelector(".js-exercises-list"),exercisesActiveTab:document.querySelector(".exercises__tab--active"),exercisesPagination:document.querySelector(".js-exercises-pagination"),modalTemplate:document.getElementById("modal-template"),modalCloseBtn:document.querySelector(".modal-template__close-btn"),modalBackdrop:document.querySelector(".modal-template__backdrop"),exerciseModal:document.querySelector(".exercise-modal"),exerciseTrigger:document.querySelector('[data-modal="exercise"]'),filtersTabs:document.querySelector("[data-filters-tabs]"),filtersSearchBox:document.querySelector(".filters__search"),filtersSubtitle:document.querySelector(".filters__subtitle"),filtersInput:document.querySelector(".filters__input"),filtersClearBtn:document.querySelector(".filters__clear-btn"),mobileMenu:document.querySelector("[data-menu]"),mobileMenuOpenBtn:document.querySelector("[data-menu-open]"),mobileMenuCloseBtn:document.querySelector("[data-menu-close]")};class U{constructor(t=Ue.BASE_API_URL){this.baseURL=t,this.axios=Fe.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(r=>r,r=>{var n,s;const o=((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||r.message||q.API_ERROR;return console.error("API Error:",o),Promise.reject(r)})}async _request(t,r,o=null,n=null){var s,i;try{const c={method:t,url:r};return o&&(c.data=o),n&&(c.params=n),(await this.axios(c)).data}catch(c){const a=((i=(s=c.response)==null?void 0:s.data)==null?void 0:i.message)||c.message;throw new Error(`${t.toUpperCase()} ${r} failed: ${a}`)}}async getFilters(t={}){return this._request("get",$.FILTERS,null,t)}async getExercises(t={}){return this._request("get",$.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(q.EXERCISE_ID_REQUIRED);return this._request("get",`${$.EXERCISES}/${t}`)}async getQuote(){return this._request("get",$.QUOTE)}async subscribe(t){if(!t.email||!D.EMAIL_REGEX.test(t.email))throw new Error(q.EMAIL_REQUIRED);return this._request("post",$.SUBSCRIPTION,t)}async rateExercise(t,r){if(!t)throw new Error(q.EXERCISE_ID_REQUIRED);if(!r.rate||r.rate<D.RATING_MIN||r.rate>D.RATING_MAX)throw new Error(q.RATING_RANGE);if(!r.email||!D.EMAIL_REGEX.test(r.email))throw new Error(q.EMAIL_REQUIRED);return this._request("patch",`${$.EXERCISES}/${t}/rating`,r)}}const Te={position:M.POSITION.TOP_RIGHT,timeout:M.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:T.GRAY_LIGHT,transitionIn:M.TRANSITION.IN,transitionOut:M.TRANSITION.OUT,fontFamily:"inherit",icon:""},Xe=e=>{z.show({...Te,title:M.TITLE.SUCCESS,message:e,backgroundColor:T.BLACK,titleColor:T.WHITE,messageColor:T.WHITE,icon:M.ICON.SUCCESS,iconColor:T.WHITE})},O=e=>{z.show({...Te,title:M.TITLE.ERROR,message:e,backgroundColor:T.BLACK,titleColor:T.WHITE,messageColor:T.GRAY_LIGHT,progressBarColor:T.WHITE,icon:M.ICON.ERROR,iconColor:T.WHITE})},Ye=new U,Y={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function je(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:r,date:o}=JSON.parse(e),n=new Date(o),s=new Date;if(n.getDate()===s.getDate()){we(t,r);return}}We()}je();async function We(){try{const e=await Ye.getQuote(),{quote:t,author:r}=e,o={quote:t,author:r,date:new Date};localStorage.setItem("quoteData",JSON.stringify(o)),we(t,r)}catch(e){O(e.message||q.API_ERROR)}}function we(e,t){Y.content&&(Y.content.textContent=e),Y.author&&(Y.author.textContent=t)}function Tt(e){if(!e||!e.results)return;const t={"@context":R.SCHEMA_CONTEXT,"@type":R.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,o)=>({"@type":R.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":R.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};Re("filters",t)}function Qe(e){if(!e||!e.results||e.results.length===0)return;const t={"@context":R.SCHEMA_CONTEXT,"@type":R.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((r,o)=>({"@type":R.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":R.SCHEMA_TYPES.EXERCISE_PLAN,name:ze(r.name),description:r.description,image:r.gifUrl,audience:{"@type":"PeopleAudience",suggestedGender:"unisex"},category:r.target,keywords:`${r.bodyPart}, ${r.equipment}, fitness`}}))};Re("detailed-exercises",t)}function Re(e,t){let r=document.querySelector(`script[data-schema="${e}"]`);r||(r=document.createElement("script"),r.type=R.JSON_LD_TYPE,r.setAttribute("data-schema",e),document.head.appendChild(r)),r.textContent=JSON.stringify(t)}function ze(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function ie({container:e,currentPage:t,totalPages:r,onPageChange:o,mode:n="full",showArrows:s=!1,showPrevNext:i=!1,classes:c={},icons:a={},scrollToTop:d=!0,scrollTarget:m=null}){if(!e)return;if(r<=1){e.innerHTML="";return}e.innerHTML="";const{page:f="",active:E="active",arrow:x="",prev:v="",next:_="",first:L="",last:C=""}=c,{prev:N="<",next:H=">",first:X="<<",last:P=">>"}=a,h=(p,S,w="")=>{const l=document.createElement("button");return l.className=w,l.textContent=p,l.dataset.page=S,l};if(n!=="neighbors"&&i&&t>1){const p=h(N,t-1,v);e.appendChild(p)}if(n==="full")for(let p=1;p<=r;p++){const S=h(p,p,f);p===t&&S.classList.add(E),e.appendChild(S)}else if(n==="neighbors"){let p=[];r<=3?p=Array.from({length:r},(u,I)=>I+1):t===1?p=[1,2,3]:t===r?p=[r-2,r-1,r]:p=[t-1,t,t+1];const S=t===1,w=t<=2,l=t===r;if(s){const u=h(X,1,`${x} ${v} ${L}`.trim());w&&(u.disabled=!0),e.appendChild(u)}if(i){const u=h(N,Math.max(1,t-1),`${v}`.trim());S&&(u.disabled=!0),e.appendChild(u)}if(p.forEach(u=>{const I=h(u,u,`${f} ${u===t?E:""}`.trim());e.appendChild(I)}),i){const u=h(H,Math.min(r,t+1),`${_}`.trim());l&&(u.disabled=!0),e.appendChild(u)}if(s){const u=h(P,r,`${x} ${_} ${C}`.trim());l&&(u.disabled=!0),e.appendChild(u)}}if(n!=="neighbors"&&i&&t<r){const p=h(H,t+1,_);e.appendChild(p)}e.querySelectorAll("button").forEach(p=>{p.addEventListener("click",()=>{if(p.disabled)return;const S=Number(p.dataset.page);if(!(Number.isNaN(S)||S===t)&&(o(S),d))if(m){const w=typeof m=="string"?document.querySelector(m):m;if(w){const l=w.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:l-200,behavior:"smooth"})}}else window.scrollTo({top:0,behavior:"smooth"})})})}const qe="favorites";function ee(){const e=localStorage.getItem(qe);if(!e)return[];const t=JSON.parse(e);if(t.length>0&&typeof t[0]=="object"&&t[0].id){const r=t.map(o=>o.id||o._id).filter(Boolean);return ue(r),r}return t}function ue(e){localStorage.setItem(qe,JSON.stringify(e))}function he(e){return ee().includes(e)}function Ve(e){const t=ee(),r=e.id||e._id;r&&!t.includes(r)&&(t.push(r),ue(t))}function Me(e){const r=ee().filter(o=>o!==e);ue(r)}const Ke={};function Je(e,t=null,r=null){const o=t||be.favoriteBtn;if(!o)return;Object.assign(Ke,e);const n=e.id||e._id,s=he(n);te(o,s),o.onclick=()=>{const i=e.id||e._id;he(i)?(Me(i),te(o,!1),r&&typeof r=="function"&&r()):(Ve(e),te(o,!0))}}function te(e,t){const r=e.querySelector(".exercise-modal__btn-text"),o=e.querySelector(".exercise-modal__btn-icon--heart"),n=e.querySelector(".exercise-modal__btn-icon--trash");r&&(r.textContent=t?"Remove from favorites":"Add to favorites"),t?e.classList.add("exercise-modal__btn--remove"):e.classList.remove("exercise-modal__btn--remove"),o&&n&&(t?(o.classList.add("exercise-modal__btn-icon--hidden"),n.classList.remove("exercise-modal__btn-icon--hidden")):(o.classList.remove("exercise-modal__btn-icon--hidden"),n.classList.add("exercise-modal__btn-icon--hidden")))}const A={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function Ae(){A.loaderOverlay&&A.loaderOverlay.classList.remove("hidden"),A.loaderBg&&A.loaderBg.classList.add("bg-loader")}function ke(){setTimeout(()=>{A.loaderOverlay&&A.loaderOverlay.classList.add("hidden"),A.loaderBg&&A.loaderBg.classList.remove("bg-loader")},250)}const Ze=new U;let V=1,k=[];function et(){return window.innerWidth>=1440}function tt(){return window.innerWidth>=768?10:8}function Oe(){const e=document.querySelector(".favorites-wrapper");if(!e)return;const t=e.querySelector(".favorites-content");t&&t.remove();const r=e.querySelector(".favorites-empty");r&&r.remove();let o=e.querySelector(".main-container");o||(o=document.createElement("div"),o.className="main-container container",e.appendChild(o));const n=document.createElement("div");n.className="favorites-empty",n.innerHTML=`
    <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
  `,o.appendChild(n)}async function rt(e){try{const t=await Ze.getExerciseById(e);if(t)return t}catch(t){console.error(`Failed to load exercise ${e}`,t)}}function K(e=1){const t=document.querySelector(".main-container");if(!t)return;let r=t.querySelector(".favorites-content");r||(r=document.createElement("div"),r.className="favorites-content",t.appendChild(r));let o=r.querySelector(".favorites-list");o||(o=document.createElement("ul"),o.className="favorites favorites-list",r.appendChild(o));let n=r.querySelector(".js-favorites-pagination");if(n||(n=document.createElement("div"),n.className="favorites-pagination js-favorites-pagination",r.appendChild(n)),et()){const f=Math.ceil(k.length/12),E=f>1,x=(e-1)*12,v=x+12,_=k.slice(x,v);le(o,_,!0),E?ie({container:n,currentPage:e,totalPages:f,mode:"neighbors",showPrevNext:f>2,showArrows:f>3,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next"},icons:{prev:"<",next:">"},scrollToTop:!0,scrollTarget:".favorites-wrapper",onPageChange(L){V=L,K(L)}}):n.innerHTML="";return}const s=tt(),i=(e-1)*s,c=i+s,a=k.slice(i,c);le(o,a,!0);const d=Math.ceil(k.length/s);d>1?ie({container:n,currentPage:e,totalPages:d,mode:"neighbors",showPrevNext:d>2,showArrows:d>3,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next",first:"exercises__page-first",last:"exercises__page-last",arrow:"exercises__page-arrow"},icons:{prev:"<",next:">",first:"<<",last:">>"},scrollToTop:!0,scrollTarget:".favorites-wrapper",onPageChange(m){V=m,K(m)}}):n.innerHTML=""}async function ot(e){const t=document.querySelector(".favorites-wrapper");if(!t)return;const r=t.querySelector(".favorites-empty");if(r&&r.remove(),k=[],Array.isArray(e)&&e.length>0)try{const o=e.map(s=>rt(s.trim()));(await Promise.all(o)).forEach(s=>{s&&k.push(s)})}catch(o){console.error("Error loading:",o)}if(k.length===0){Oe();return}V=1,K(1)}function me(){const e=ee();e.length?ot(e):Oe()}let ve;window.addEventListener("resize",()=>{clearTimeout(ve),ve=setTimeout(()=>{k.length>0&&K(V)},250)});const F=document.querySelector(".favorites-wrapper");F&&F.addEventListener("click",e=>{const t=e.target.closest(".favorites-delete-btn");if(t){const r=t.dataset.id;if(r){if(F.style.pointerEvents==="none")return;F.style.pointerEvents="none",Ae(),Me(r),me(),ke(),setTimeout(()=>{F.style.pointerEvents="auto"},500)}}});me();let g=null,_e=!1;const ae={};function wt(e,t,r){ae[e]={getContent:t,init:r}}function J(){_e||(g={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},_e=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{J()}):J();function nt(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const r=t.getAttribute("data-modal");if(!ae[r]){console.warn(`Modal type "${r}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:o,init:n}=ae[r],s=o();if(!s){console.error(`Failed to get content for modal type "${r}"`);return}Be(s),n&&setTimeout(async()=>{try{await n(G)}catch(i){console.error("Error initializing modal:",i)}},100)}),t.setAttribute("data-modal-initialized","true")})}function Be(e){var t,r;if(J(),!g||!g.modal||!g.body){console.error("Modal template elements not found");return}if(typeof e=="string")g.body.innerHTML=e;else if(e instanceof HTMLElement)g.body.innerHTML="",g.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}g.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",Ne,{once:!1}),(t=g.backdrop)==null||t.addEventListener("click",Pe),(r=g.closeBtn)==null||r.addEventListener("click",$e)}function G(){var t,r;if(J(),!g||!g.modal)return;g.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",Ne),(t=g.backdrop)==null||t.removeEventListener("click",Pe),(r=g.closeBtn)==null||r.removeEventListener("click",$e),g&&g.body&&(g.body.innerHTML=""),document.querySelector(".favorites-list")&&me()}function fe(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function Ne(e){if(e.key==="Escape"){if(fe())return;G()}}function Pe(e){if(e.target===g.backdrop){if(fe())return;G()}}function $e(){fe()||G()}const st=new U;function it(){const e=document.getElementById("exercise-modal-template");if(!e)return console.error("Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag."),null;const t=e.content.cloneNode(!0),r=t.firstElementChild||t.firstChild;return r||(console.error("Failed to extract content from template fragment"),null)}async function at(e){var a;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".exercise-modal");if(!t||!r){console.error("Modal body or exercise modal not found");return}const o=r.querySelector(".exercise-modal__loader");o&&o.classList.remove("hidden");let n=sessionStorage.getItem("exerciseModalExerciseId")||((a=document.querySelector('[data-modal="exercise"][data-exercise-id]'))==null?void 0:a.getAttribute("data-exercise-id"));if(n&&sessionStorage.removeItem("exerciseModalExerciseId"),!n){o&&o.classList.add("hidden"),O("Exercise ID is missing");return}let s;try{s=await st.getExerciseById(n),s.id=s.id||s._id}catch(d){console.error("Failed to load exercise:",d),o&&o.classList.add("hidden"),O(d.message||"Failed to load exercise. Try later."),r.innerHTML="<p>Failed to load exercise. Try later.</p>";return}ct(r,s),o&&o.classList.add("hidden");const i=r.querySelector(".favorites-btn");i&&Je(s,i,e);const c=r.querySelector(".exercise-modal__btn--rating");c&&!c.hasAttribute("data-modal-initialized")&&nt()}function ct(e,t){const r=e.querySelector(".exercise-modal__title"),o=e.querySelector(".exercise-modal__rating-value"),n=e.querySelector(".exercise-modal__stars"),s=e.querySelector(".exercise-modal__gif"),i=e.querySelector(".exercise-modal__target"),c=e.querySelector(".exercise-modal__bodypart"),a=e.querySelector(".exercise-modal__equipment"),d=e.querySelector(".exercise-modal__popular"),m=e.querySelector(".exercise-modal__calories"),f=e.querySelector(".exercise-modal__description"),E=e.querySelector(".favorites-btn"),x=e.querySelector(".exercise-modal__btn--rating");r&&(r.textContent=t.name||"");const v=t.rating||0;if(o&&(o.textContent=v.toFixed(1)),n&&(n.innerHTML=lt(v)),s&&(s.src=t.gifUrl||"",s.alt=t.name||"Exercise GIF"),i&&(i.textContent=re(t.target||"")),c&&(c.textContent=re(t.bodyPart||"")),a&&(a.textContent=re(t.equipment||"")),d){const _=t.popularity||0;_>=1e3?d.textContent=(_/1e3).toFixed(1).replace(/\.0$/,"")+"k":d.textContent=_.toString()}if(m){const _=t.burnedCalories,L=m.closest("p");if(_&&_>0){const C=t.time||3;m.textContent=`${_}/${C} min`,L&&(L.style.display="")}else L&&(L.style.display="none")}f&&(f.textContent=t.description||t.instructions||""),E&&E.setAttribute("data-id",t.id||t._id||""),x&&x.setAttribute("data-exercise-id",t.id||t._id||"")}function lt(e){const r=Math.round(e),o=5-r;let n="";const s="M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z";for(let i=0;i<r;i++)n+=`
      <div class="rating-star active">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;for(let i=0;i<o;i++)n+=`
      <div class="rating-star">
        <svg
          width="18"
          height="18"
          viewBox="0 0 13 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          class="rating-star__svg"
        >
          <path
            d="${s}"
            class="rating-star__path"
          />
        </svg>
      </div>
    `;return n}function re(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}const dt=()=>{var e;(e=document.querySelector(".filters"))==null||e.scrollIntoView({behavior:"smooth"})};function ut({type:e,filter:t,keyword:r,page:o}){const n=new URL(location.href),s=location.href;e&&n.searchParams.set("type",e),t&&n.searchParams.set("filter",t),r?n.searchParams.set("keyword",r):n.searchParams.delete("keyword"),n.searchParams.set("page",o);const i=n.toString();i!==s&&history.pushState({type:e,filter:t,keyword:r,page:o},"",i)}function mt(){const e=new URL(location.href);return{type:e.searchParams.get("type")||"body-parts",filter:e.searchParams.get("filter")||"waist",keyword:e.searchParams.get("keyword")||"",page:Number(e.searchParams.get("page"))||1}}function ft(e){window.addEventListener("popstate",t=>{const r=t.state;if(!r||!r.type&&!r.filter&&!r.keyword&&!r.page)return;const o=Number(r.page)||1;e({type:r.type,filter:r.filter,keyword:r.keyword,page:o})})}const pt=new U,oe="/your-energy-reload-page/";function gt(){return window.innerWidth<768?8:10}let b={type:"body-parts",filter:"waist",keyword:""},Q=1,Se=1,j=0,ne="";async function ce({page:e=1,type:t,filter:r,keyword:o}={}){const n=document.querySelector(".js-exercises-list");if(!n)return;const s=gt();t!==void 0&&(b.type=t),r!==void 0&&(b.filter=r),o!==void 0&&(b.keyword=o);const i=b.type,c=b.filter,a=b.keyword||"",d=yt({page:e,limit:s,type:i,filter:c,keyword:a}),m=++j;Ae();try{const f=await pt.getExercises(d);if(m!==j)return;const E=f.results||[];if(Q=f.page||e,Se=f.totalPages||1,Qe(f),le(n,E),ht(Q,Se),E.length)ne="";else{const v=`${i}:${c}:${a||""}`;v!==ne&&(ne=v,(a||t!==void 0||r!==void 0)&&z.warning({title:"No results",message:a?`Nothing found for "${a}". Try another search.`:"No exercises found for this category.",position:"topRight"}))}(t!==void 0||r!==void 0||o!==void 0||e!==void 0)&&ut({type:i,filter:c,keyword:a,page:Q})}catch(f){if(console.error("Failed to load exercises:",f),m!==j)return;typeof O=="function"?O(f.message||"Failed to load exercises. Try again later."):z.error({title:"Error",message:f.message||"Failed to load exercises. Try again later.",position:"topRight"}),n.innerHTML=`
      <li class="exercises__item">
        <p>Failed to load exercises. Try again later.</p>
      </li>
    `}finally{m===j&&ke()}}function yt({page:e,limit:t,type:r,filter:o,keyword:n}){const s={page:e,limit:t};switch(n&&(s.keyword=n),r){case"body-parts":s.bodypart=o;break;case"muscles":s.muscles=o;break;case"equipment":s.equipment=o;break;default:s.bodypart=o}return s}function le(e,t,r=!1){if(!t.length){e.innerHTML=`
      <li class="exercises__item">
        <p>No exercises found.</p>
      </li>
    `;return}const o=t.map(n=>Et(n,r)).join("");e.innerHTML=o,vt(e)}function Et(e,t=!1){const{name:r,burnedCalories:o,bodyPart:n,target:s,time:i,rating:c,_id:a}=e,d=t?`<button type="button" class="favorites-delete-btn" data-id="${a}">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="13"
            height="14"
            viewBox="0 0 17 19"
            fill="none"
            class="exercise-modal__btn-icon exercise-modal__btn-icon--trash"
          >
            <path
              d="M11.5833 4.08333V3.41667C11.5833 2.48325 11.5833 2.01654 11.4017 1.66002C11.2419 1.34641 10.9869 1.09144 10.6733 0.931656C10.3168 0.75 9.85009 0.75 8.91667 0.75H7.58333C6.64991 0.75 6.1832 0.75 5.82668 0.931656C5.51308 1.09144 5.25811 1.34641 5.09832 1.66002C4.91667 2.01654 4.91667 2.48325 4.91667 3.41667V4.08333M6.58333 8.66667V12.8333M9.91667 8.66667V12.8333M0.75 4.08333H15.75M14.0833 4.08333V13.4167C14.0833 14.8168 14.0833 15.5169 13.8108 16.0516C13.5712 16.522 13.1887 16.9045 12.7183 17.1442C12.1835 17.4167 11.4835 17.4167 10.0833 17.4167H6.41667C5.01654 17.4167 4.31647 17.4167 3.78169 17.1442C3.31129 16.9045 2.92883 16.522 2.68915 16.0516C2.41667 15.5169 2.41667 14.8168 2.41667 13.4167V4.08333"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
       </button>`:`<div class="exercises__rating">
         <span class="exercises__meta-key">${c}</span>
         <span class="exercises__meta-value">
           <svg class="star" width="18" height="18">
             <use href="${oe}img/icons.svg#icon-star"></use>
           </svg>
         </span>
       </div>`;return`
    <li class="exercises__item" data-exercise-id="${a}">
      <div class="exercises__item-top">
        <div class="exercises__item-info">
          <span class="exercises__badge">Workout</span>
          
          ${d} 
          
        </div>

        <button
          type="button"
          class="exercises__start-btn js-open-exercise"
          data-exercise-id="${a}"
        >
          Start
          <svg class="arrow__icon" width="16" height="16">
             <use href="${oe}img/icons.svg#icon-arrow"></use>
          </svg>
        </button>
      </div>

      <div class="exercises__name-container">
        <svg class="exercises__icon" width="24" height="24">
           <use href="${oe}img/icons.svg#icon-running-man"></use>
        </svg>
        <h3 class="exercises__name">${r}</h3>
      </div>

      <div class="exercises__item-bottom">
        <p class="exercises__meta">
          <span class="exercises__meta-label">Burned calories:</span>
          <span class="exercises__meta-value">${o} / ${i}</span>
        </p>
        <p class="exercises__meta">
          <span class="exercises__meta-label">Body part:</span>
          <span class="exercises__meta-value">${n}</span>
        </p>
        <p class="exercises__meta">
          <span class="exercises__meta-label">Target:</span>
          <span class="exercises__meta-value">${s}</span>
        </p>
      </div>
    </li>
  `}function ht(e,t){const r=document.querySelector(".js-exercises-pagination");r&&ie({container:r,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>=3,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next"},scrollToTop:!1,onPageChange:o=>{dt(),ce({page:o,type:b.type,filter:b.filter,keyword:b.keyword})}})}function vt(e){e.querySelectorAll(".exercises__start-btn[data-exercise-id]").forEach(r=>{r.hasAttribute("data-click-handler-attached")||(r.addEventListener("click",_t),r.setAttribute("data-click-handler-attached","true"))})}async function _t(e){const r=e.currentTarget.getAttribute("data-exercise-id");if(!r){console.error("Exercise ID is missing");return}sessionStorage.setItem("exerciseModalExerciseId",r);const o=it();if(!o){console.error("Failed to get exercise modal content");return}Be(o);try{await at(G)}catch(n){console.error("Error initializing exercise modal:",n)}}document.addEventListener("DOMContentLoaded",()=>{const e=mt();b={type:e.type,filter:e.filter,keyword:e.keyword},Q=e.page||1,ce(e),ft(ce)});(()=>{const{mobileMenu:e,mobileMenuOpenBtn:t,mobileMenuCloseBtn:r}=be;if(!t||!e||!r)return;const o=()=>{e.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};t.addEventListener("click",o),r.addEventListener("click",o),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const W=document.querySelector(".scroll-up-btn");if(W){let e=function(t=1e3){const r=window.scrollY,o=performance.now();function n(s){const i=s-o,c=Math.min(i/t,1),a=1-Math.pow(1-c,3);window.scrollTo(0,r*(1-a)),c<1&&requestAnimationFrame(n)}requestAnimationFrame(n)};window.addEventListener("scroll",()=>{window.scrollY>300?W.classList.add("show"):W.classList.remove("show")}),W.addEventListener("click",t=>{t.preventDefault(),e()})}let y=null,pe=null,ge=null;function de(){var t,r,o,n,s,i;if(y)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}y={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=y.backdrop)==null||t.removeEventListener("click",xe,{capture:!0}),(r=y.cancelBtn)==null||r.removeEventListener("click",Z,{capture:!0}),(o=y.confirmBtn)==null||o.removeEventListener("click",Ie,{capture:!0}),(n=y.backdrop)==null||n.addEventListener("click",xe,{capture:!0}),(s=y.cancelBtn)==null||s.addEventListener("click",Z,{capture:!0}),(i=y.confirmBtn)==null||i.addEventListener("click",Ie,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",de):de();function St(e){e.key==="Escape"&&y&&!y.modal.classList.contains("hidden")&&Z()}function xe(e){e.target===y.backdrop&&(e.stopPropagation(),e.preventDefault(),Z(e))}function Z(e){e&&(e.stopPropagation(),e.preventDefault());const t=ge;De(),t&&t()}function Ie(e){e&&(e.stopPropagation(),e.preventDefault());const t=pe;De(),setTimeout(()=>{t&&t()},0)}function xt(e,t,r=null){if(de(),!y||!y.modal){console.error("Confirm modal elements not found");return}pe=t,ge=r,y.message&&(y.message.textContent=e),y.modal.classList.remove("hidden"),document.addEventListener("keydown",St,{once:!0})}function De(){!y||!y.modal||(y.modal.classList.add("hidden"),pe=null,ge=null)}const It=new U;let B=null;function Rt(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return Lt(t),t}function Le(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const r=t.getAttribute("data-exercise-id");r&&sessionStorage.setItem("ratingModalExerciseId",r)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Le):Le();function Lt(e){const t=e.querySelectorAll("[id]"),r=Date.now();t.forEach(o=>{const n=o.id;o.id=`${n}-${r}`,e.querySelectorAll(`label[for="${n}"]`).forEach(i=>{i.setAttribute("for",o.id)})})}function Ce(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const r=t.querySelector(".rating-modal__form"),o=t.querySelector('input[name="rating"]'),n=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),i=t.querySelector('textarea[name="comment"]'),c=t.querySelectorAll(".rating-star");r&&r.reset(),o&&(o.value="0"),s&&(s.value=""),i&&(i.value=""),n&&(n.textContent=""),c.forEach(a=>{a.classList.remove("active")})}function se(e){B&&B()?xt("Are you sure you want to cancel your exercise review?",()=>{Ce(),B=null,e()},()=>{}):(Ce(),B=null,e())}function qt(e){var w;B=null;const t=document.querySelector("[data-modal-body]"),r=t==null?void 0:t.querySelector(".rating-modal");if(!t||!r){console.error("Modal body or rating modal not found");return}let o=sessionStorage.getItem("ratingModalExerciseId")||((w=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:w.getAttribute("data-exercise-id"));if(o&&sessionStorage.removeItem("ratingModalExerciseId"),!o){O("Exercise ID is missing");return}const n=r.querySelectorAll(".rating-star"),s=r.querySelector('input[name="rating"]'),i=r.querySelector(".rating-modal__rating-text"),c=r.querySelector(".rating-modal__btn--cancel"),a=r.querySelector('.rating-modal__btn[type="submit"]'),d=r.querySelector('input[name="email"]'),m=r.querySelector('textarea[name="comment"]'),f=r.querySelector(".rating-modal__form");let E=0;a&&(a.disabled=!0),s&&(s.value="0"),i&&(i.textContent="0");const x=()=>E>0&&E<=5&&(d==null?void 0:d.value.trim())!==""&&(m==null?void 0:m.value.trim())!=="",v=()=>{a&&(a.disabled=!x())};B=()=>E>0||(d==null?void 0:d.value.trim())!==""||(m==null?void 0:m.value.trim())!=="";const L=l=>{n.forEach((u,I)=>{I+1<=l?u.classList.add("active"):u.classList.remove("active")})};n.forEach((l,u)=>{const I=u+1;l.addEventListener("click",()=>{E=I,L(I),s&&(s.value=I),i&&(i.textContent=I),v()})}),[d,m].forEach(l=>{l&&l.addEventListener("input",v)});const C=document.querySelector("[data-modal-close]"),N=()=>{const l=document.getElementById("modal-confirm");return l&&!l.classList.contains("hidden")},H=l=>{if(l.key==="Escape"){if(N())return;l.stopPropagation(),se(()=>{P(),e()})}},X=l=>{if(l.target===C){if(N())return;l.stopPropagation(),se(()=>{P(),e()})}},P=()=>{document.removeEventListener("keydown",H,{capture:!0}),C==null||C.removeEventListener("click",X,{capture:!0}),h==null||h.removeEventListener("click",p,{capture:!0})},h=document.querySelector(".modal-template__close-btn"),p=l=>{N()||(l.stopPropagation(),S())};document.addEventListener("keydown",H,{capture:!0}),C==null||C.addEventListener("click",X,{capture:!0}),h==null||h.addEventListener("click",p,{capture:!0});const S=()=>{se(()=>{P(),e()})};c&&e&&c.addEventListener("click",()=>{S()}),f&&(f.setAttribute("data-no-auto-close","true"),f.addEventListener("submit",async l=>{if(l.preventDefault(),!x()){O("Please fill in all fields");return}const u=new FormData(f),I=parseInt(u.get("rating"),10),ye=u.get("email").trim(),He=u.get("comment").trim();a&&(a.disabled=!0,a.textContent="Sending...");try{await It.rateExercise(o,{rate:I,email:ye,review:He}),Xe("Thank you for your feedback!"),B=null,setTimeout(()=>{e&&(P(),e())},1e3)}catch(Ee){console.error("Failed to submit rating:",Ee),O(Ee.message||q.API_ERROR),a&&(a.disabled=!1,a.textContent="Send")}}))}export{q as E,bt as M,D as V,U as Y,Ae as a,O as b,ke as c,Xe as d,wt as e,nt as f,qt as g,Rt as h,Tt as i,at as j,it as k,ce as l,ie as r,dt as s};
//# sourceMappingURL=modal-rating-content-B83OKtR0.js.map
