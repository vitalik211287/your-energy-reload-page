{"version":3,"file":"main-Yd5jSjS5.js","sources":["../../src/js/config.js","../../src/js/constants.js","../../src/js/api.js","../../src/js/iziToast-helper.js","../../src/js/quote-of-the-day.js","../../src/js/seo-function.js","../../src/js/pagination.js","../../src/js/modal-template.js","../../src/js/favorites-btn.js","../../src/js/modal-exercise-content.js","../../src/js/exercises-list.js","../../src/js/filters.js","../../src/js/categories-card-click.js","../../src/js/categories.js","../../src/js/mobile-menu.js","../../src/js/footer.js","../../src/js/scroll-up.js","../../src/js/loader.js","../../src/js/confirm-modal.js","../../src/js/modal-rating-content.js","../../src/js/exercises-tabs.js","../../src/js/exercises-search.js","../../src/main.js"],"sourcesContent":["export const CONFIG = {\n  BASE_API_URL:\n    import.meta.env.VITE_API_BASE_URL || 'https://your-energy.b.goit.study/api',\n  DEV_HOST: import.meta.env.VITE_DEV_HOST || '127.0.0.1',\n  DEV_PORT: import.meta.env.VITE_DEV_PORT || '3000',\n  BASE_PATH: import.meta.env.VITE_BASE_PATH || '/your-energy/',\n};\n","// Local Storage Keys\nexport const STORAGE_KEYS = {};\n\nexport const COLORS = {\n  WHITE: '#fff',\n  BLACK: '#000',\n  GRAY_LIGHT: '#808080',\n};\n\n// API Endpoints\nexport const API_ENDPOINTS = {\n  FILTERS: '/filters',\n  EXERCISES: '/exercises',\n  QUOTE: '/quote',\n  SUBSCRIPTION: '/subscription',\n};\n\n// ========== REGULAR EXPRESSIONS ==========\nexport const REGEX = {\n  EMAIL: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z]{2,}$/,\n};\n\n// ========== VALIDATION CONSTANTS ==========\nexport const VALIDATION = {\n  EMAIL_REGEX: REGEX.EMAIL,\n  RATING_MIN: 1,\n  RATING_MAX: 5,\n};\n\n// ========== PAGINATION CONSTANTS ==========\nexport const PAGINATION = {\n  DEFAULT_PAGE: 1,\n  DEFAULT_LIMIT: 12,\n  MIN_LIMIT: 1,\n  MAX_LIMIT: 100,\n};\n\n// ========== TOAST NOTIFICATION CONSTANTS ==========\nexport const TOAST = {\n  POSITION: {\n    TOP_RIGHT: 'topRight',\n    TOP_LEFT: 'topLeft',\n    TOP_CENTER: 'topCenter',\n    BOTTOM_RIGHT: 'bottomRight',\n    BOTTOM_LEFT: 'bottomLeft',\n    BOTTOM_CENTER: 'bottomCenter',\n  },\n\n  TIMEOUT: {\n    SHORT: 2000,\n    DEFAULT: 4000,\n    LONG: 6000,\n  },\n\n  TRANSITION: {\n    IN: 'fadeInLeft',\n    OUT: 'fadeOutRight',\n  },\n\n  TITLE: {\n    SUCCESS: 'OK',\n    ERROR: 'Error',\n    INFO: 'Info',\n    WARNING: 'Warning',\n  },\n\n  ICON: {\n    SUCCESS: 'icon-check',\n    ERROR: 'icon-error',\n    INFO: 'icon-info',\n    WARNING: 'icon-warning',\n  },\n};\n\n// ========== SEO CONSTANTS ==========\nexport const SEO = {\n  SCHEMA_CONTEXT: 'https://schema.org',\n  SCHEMA_TYPES: {\n    ITEM_LIST: 'ItemList',\n    LIST_ITEM: 'ListItem',\n    EXERCISE_PLAN: 'ExercisePlan',\n  },\n  JSON_LD_TYPE: 'application/ld+json',\n};\n\n// ========== MODAL TYPES ==========\nexport const MODAL_TYPES = {\n  RATING: 'rating',\n  EXERCISE: 'exercise',\n};\n\n// ========== ERROR MESSAGES ==========\nexport const ERROR_MESSAGES = {\n  API_ERROR: 'Something went wrong',\n  EMAIL_REQUIRED: 'Please enter a valid email.',\n  RATING_RANGE: `Rating must be between ${VALIDATION.RATING_MIN} and ${VALIDATION.RATING_MAX}`,\n  EXERCISE_ID_REQUIRED: 'Exercise ID is required',\n};\n\nexport const REFS = {\n  modalBody: document.querySelector('[data-modal-body]'),\n\n  favoritesBtn: document.querySelector('.favorites-btn'),\n  favoritesList: document.querySelector('.favorites-list'),\n\n  exercisesList: document.querySelector('.js-exercises-list'),\n  exercisesActiveTab: document.querySelector('.exercises__tab--active'),\n  exercisesPagination: document.querySelector('.js-exercises-pagination'),\n\n  modalTemplate: document.getElementById('modal-template'),\n  modalCloseBtn: document.querySelector('.modal-template__close-btn'),\n  modalBackdrop: document.querySelector('.modal-template__backdrop'),\n\n  exerciseModal: document.querySelector('.exercise-modal'), // from modal-exercise.html\n  exerciseTrigger: document.querySelector('[data-modal=\"exercise\"]'),\n\n\n  // Filters\n  filtersTabs: document.querySelector('[data-filters-tabs]'),\n  filtersSearchBox: document.querySelector('.filters__search'),\n  filtersSubtitle: document.querySelector('.filters__subtitle'),\n  filtersInput: document.querySelector('.filters__input'),\n  filtersClearBtn: document.querySelector('.filters__clear-btn'),\n\n  // Mobile menu\n  mobileMenu: document.querySelector('[data-menu]'),\n  mobileMenuOpenBtn: document.querySelector('[data-menu-open]'),\n  mobileMenuCloseBtn: document.querySelector('[data-menu-close]'),\n};\n","import axios from 'axios';\nimport { CONFIG } from './config.js';\nimport { VALIDATION, ERROR_MESSAGES, API_ENDPOINTS } from './constants.js';\n\nexport class YourEnergyAPI {\n  constructor(baseURL = CONFIG.BASE_API_URL) {\n    this.baseURL = baseURL;\n    this.axios = axios.create({\n      baseURL: this.baseURL,\n    });\n\n    // Response interceptor for error handling\n    this.axios.interceptors.response.use(\n      response => response,\n      error => {\n        const errorMessage =\n          error.response?.data?.message ||\n          error.message ||\n          ERROR_MESSAGES.API_ERROR;\n        console.error('API Error:', errorMessage);\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  /**\n   * Generic request handler\n   * @private\n   * @param {string} method - HTTP method\n   * @param {string} url - Endpoint URL\n   * @param {Object|null} data - Request body\n   * @param {Object|null} params - Query parameters\n   * @returns {Promise<Object>}\n   */\n  async _request(method, url, data = null, params = null) {\n    try {\n      const config = { method, url };\n      if (data) config.data = data;\n      if (params) config.params = params;\n\n      const response = await this.axios(config);\n      return response.data;\n    } catch (error) {\n      const message = error.response?.data?.message || error.message;\n      throw new Error(`${method.toUpperCase()} ${url} failed: ${message}`);\n    }\n  }\n\n  /**\n   * Get filters\n   * @param {Object} params - Query parameters (filter, page, limit)\n   * @returns {Promise<Object>}\n   */\n  async getFilters(params = {}) {\n    return this._request('get', API_ENDPOINTS.FILTERS, null, params);\n  }\n\n  /**\n   * Get exercises\n   * @param {Object} params - Query parameters (bodypart, muscles, equipment, keyword, page, limit)\n   * @returns {Promise<Object>}\n   */\n  async getExercises(params = {}) {\n    return this._request('get', API_ENDPOINTS.EXERCISES, null, params);\n  }\n\n  async getExerciseById(id) {\n    if (!id) {\n      throw new Error(ERROR_MESSAGES.EXERCISE_ID_REQUIRED);\n    }\n    return this._request('get', `${API_ENDPOINTS.EXERCISES}/${id}`);\n  }\n\n  /**\n   * Get quote of the day\n   * @returns {Promise<Object>}\n   */\n  async getQuote() {\n    return this._request('get', API_ENDPOINTS.QUOTE);\n  }\n\n  /**\n   * Subscribe to new exercises\n   * @param {Object} data - { email: string }\n   * @returns {Promise<Object>}\n   */\n  async subscribe(data) {\n    if (!data.email || !VALIDATION.EMAIL_REGEX.test(data.email)) {\n      throw new Error(ERROR_MESSAGES.EMAIL_REQUIRED);\n    }\n    return this._request('post', API_ENDPOINTS.SUBSCRIPTION, data);\n  }\n\n  /**\n   * Add rating to exercise\n   * @param {string} id - Exercise ID\n   * @param {Object} data - { rate: number, email: string, review: string }\n   * @returns {Promise<Object>}\n   */\n  async rateExercise(id, data) {\n    if (!id) {\n      throw new Error(ERROR_MESSAGES.EXERCISE_ID_REQUIRED);\n    }\n    if (\n      !data.rate ||\n      data.rate < VALIDATION.RATING_MIN ||\n      data.rate > VALIDATION.RATING_MAX\n    ) {\n      throw new Error(ERROR_MESSAGES.RATING_RANGE);\n    }\n    if (!data.email || !VALIDATION.EMAIL_REGEX.test(data.email)) {\n      throw new Error(ERROR_MESSAGES.EMAIL_REQUIRED);\n    }\n    return this._request(\n      'patch',\n      `${API_ENDPOINTS.EXERCISES}/${id}/rating`,\n      data\n    );\n  }\n}\n","import iziToast from 'izitoast';\nimport { COLORS, TOAST } from './constants.js';\n\n// --- –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è ---\nconst defaultOptions = {\n  position: TOAST.POSITION.TOP_RIGHT,\n  timeout: TOAST.TIMEOUT.DEFAULT,\n  close: true,\n  closeOnEscape: true,\n  pauseOnHover: true,\n  progressBar: true,\n  progressBarColor: COLORS.GRAY_LIGHT,\n  transitionIn: TOAST.TRANSITION.IN,\n  transitionOut: TOAST.TRANSITION.OUT,\n  fontFamily: 'inherit',\n  icon: '',\n};\n\n// 1. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –£–°–ü–Ü–• (Success)\nexport const showSuccess = message => {\n  iziToast.show({\n    ...defaultOptions,\n    title: TOAST.TITLE.SUCCESS,\n    message: message,\n    backgroundColor: COLORS.BLACK,\n    titleColor: COLORS.WHITE,\n    messageColor: COLORS.WHITE,\n    icon: TOAST.ICON.SUCCESS,\n    iconColor: COLORS.WHITE,\n  });\n};\n\n// 2. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ü–û–ú–ò–õ–ö–£ (Error)\nexport const showError = message => {\n  iziToast.show({\n    ...defaultOptions,\n    title: TOAST.TITLE.ERROR,\n    message: message,\n    backgroundColor: COLORS.BLACK,\n    titleColor: COLORS.WHITE,\n    messageColor: COLORS.GRAY_LIGHT,\n    progressBarColor: COLORS.WHITE,\n    icon: TOAST.ICON.ERROR,\n    iconColor: COLORS.WHITE,\n  });\n};\n\n// 3. –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (Info)\nexport const showInfo = message => {\n  iziToast.show({\n    ...defaultOptions,\n    title: TOAST.TITLE.INFO,\n    message: message,\n    backgroundColor: COLORS.WHITE,\n    titleColor: COLORS.BLACK,\n    messageColor: COLORS.BLACK,\n    progressBarColor: COLORS.BLACK,\n    borderBottom: `2px solid ${COLORS.BLACK}`,\n  });\n};\n","import { YourEnergyAPI } from './api';\nimport { showError } from './iziToast-helper';\nimport { ERROR_MESSAGES } from './constants.js';\n\nexport const fetchApi = new YourEnergyAPI();\n\nconst quote = {\n  content: document.querySelector('.js-quote-content'),\n  author: document.querySelector('.js-quote-author'),\n};\n\nfunction getQuoteData() {\n  const storedQuote = localStorage.getItem('quoteData');\n  if (storedQuote) {\n    const { quote: quoteContent, author, date } = JSON.parse(storedQuote);\n    const savedDate = new Date(date);\n    const currentDate = new Date();\n\n    if (savedDate.getDate() === currentDate.getDate()) {\n      addTextContent(quoteContent, author);\n      return;\n    }\n  }\n  fetchGetExercisesQuote();\n}\n\ngetQuoteData();\n\nasync function fetchGetExercisesQuote() {\n  try {\n    const resp = await fetchApi.getQuote();\n\n    const { quote: newQuote, author } = resp;\n    const quoteData = { quote: newQuote, author, date: new Date() };\n    localStorage.setItem('quoteData', JSON.stringify(quoteData));\n    addTextContent(newQuote, author);\n  } catch (err) {\n    showError(err.message || ERROR_MESSAGES.API_ERROR);\n  }\n}\n\nfunction addTextContent(content, author) {\n  if (quote.content) {\n    quote.content.textContent = content;\n  }\n  if (quote.author) {\n    quote.author.textContent = author;\n  }\n}\n","import { SEO } from './constants.js';\n\nexport function injectSchema(data) {\n  if (!data || !data.results) return;\n\n  const schemaData = {\n    '@context': SEO.SCHEMA_CONTEXT,\n    '@type': SEO.SCHEMA_TYPES.ITEM_LIST,\n    itemListElement: data.results.map((item, index) => ({\n      '@type': SEO.SCHEMA_TYPES.LIST_ITEM,\n      position: index + 1,\n      item: {\n        '@type': SEO.SCHEMA_TYPES.EXERCISE_PLAN,\n        name: item.name,\n        filter: item.filter,\n        image: item.imgURL,\n      },\n    })),\n  };\n  updateSchemaScript('filters', schemaData);\n}\n\nexport function injectSchemaExercises(data) {\n  if (!data || !data.results || data.results.length === 0) return;\n\n  const schemaData = {\n    '@context': SEO.SCHEMA_CONTEXT,\n    '@type': SEO.SCHEMA_TYPES.ITEM_LIST,\n    itemListElement: data.results.map((ex, index) => ({\n      '@type': SEO.SCHEMA_TYPES.LIST_ITEM,\n      position: index + 1,\n      item: {\n        '@type': SEO.SCHEMA_TYPES.EXERCISE_PLAN,\n        name: capitalize(ex.name),\n        description: ex.description,\n        image: ex.gifUrl,\n        audience: {\n          '@type': 'PeopleAudience',\n          suggestedGender: 'unisex',\n        },\n        category: ex.target,\n        keywords: `${ex.bodyPart}, ${ex.equipment}, fitness`,\n      },\n    })),\n  };\n\n  updateSchemaScript('detailed-exercises', schemaData);\n}\n\nfunction updateSchemaScript(schemaId, data) {\n  let script = document.querySelector(`script[data-schema=\"${schemaId}\"]`);\n\n  if (!script) {\n    script = document.createElement('script');\n    script.type = SEO.JSON_LD_TYPE;\n    script.setAttribute('data-schema', schemaId);\n    document.head.appendChild(script);\n  }\n\n  script.textContent = JSON.stringify(data);\n  // console.log(`Schema updated for: ${schemaId}`);\n}\n\nfunction capitalize(str) {\n  if (!str) return '';\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","export function renderPaginationUniversal({\n  container,\n  currentPage,\n  totalPages,\n  onPageChange,\n  mode = 'full',\n  showArrows = false,\n  classes = {},\n  icons = {},\n  scrollToTop = true,\n  scrollTarget = null, // <-- –Ω–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä\n}) {\n  if (!container) return;\n  container.innerHTML = '';\n\n  const {\n    page: pageClass = '',\n    active: activeClass = 'active',\n    arrow: arrowClass = '',\n  } = classes;\n\n  const { prev: prevIcon = 'Prev', next: nextIcon = 'Next' } = icons;\n\n  const createBtn = (label, page, className = '') => {\n    const btn = document.createElement('button');\n    btn.className = className;\n    btn.textContent = label;\n    btn.dataset.page = page;\n    return btn;\n  };\n\n  if (mode === 'full') {\n    for (let i = 1; i <= totalPages; i++) {\n      const btn = createBtn(i, i, pageClass);\n      if (i === currentPage) btn.classList.add(activeClass);\n      container.appendChild(btn);\n    }\n  } else if (mode === 'neighbors') {\n    let pages = [];\n\n    if (totalPages <= 3) {\n      pages = Array.from({ length: totalPages }, (_, i) => i + 1);\n    } else if (currentPage === 1) {\n      pages = [1, 2, 3];\n    } else if (currentPage === totalPages) {\n      pages = [totalPages - 2, totalPages - 1, totalPages];\n    } else {\n      pages = [currentPage - 1, currentPage, currentPage + 1];\n    }\n\n    pages.forEach(p => {\n      const btn = createBtn(\n        p,\n        p,\n        `${pageClass} ${p === currentPage ? activeClass : ''}`.trim()\n      );\n      container.appendChild(btn);\n    });\n  }\n\n  container.querySelectorAll('button').forEach(btn => {\n    btn.addEventListener('click', () => {\n      const page = Number(btn.dataset.page);\n      if (Number.isNaN(page) || page === currentPage) return;\n\n      onPageChange(page);\n\n      if (scrollToTop) {\n        if (scrollTarget) {\n          const el =\n            typeof scrollTarget === 'string'\n              ? document.querySelector(scrollTarget)\n              : scrollTarget;\n\n          if (el) {\n            el.scrollIntoView({ behavior: 'smooth', block: 'start' });\n          }\n        } else {\n          window.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n      }\n    });\n  });\n}\n","/**\n * Universal module for working with a modal window template\n * Allows opening a modal with any content,\n * blocks the page scroll, closes on Escape\n */\n\nlet refs = null;\nlet isInitialized = false;\nconst modalTypes = {};\n\nexport function registerModalType(type, getContentFn, initFn) {\n  modalTypes[type] = {\n    getContent: getContentFn,\n    init: initFn,\n  };\n}\n\nfunction initRefs() {\n  if (isInitialized) return;\n\n  refs = {\n    modal: document.getElementById('modal-template'),\n    backdrop: document.querySelector('[data-modal-close]'),\n    closeBtn: document.querySelector('.modal-template__close-btn'),\n    body: document.querySelector('[data-modal-body]'),\n  };\n\n  isInitialized = true;\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    initRefs();\n  });\n} else {\n  initRefs();\n}\n\nexport function initModalButtons() {\n  const modalButtons = document.querySelectorAll('[data-modal]');\n\n  modalButtons.forEach(button => {\n    if (button.hasAttribute('data-modal-initialized')) {\n      return;\n    }\n\n    const modalType = button.getAttribute('data-modal');\n\n    if (!modalTypes[modalType]) {\n      console.warn(`Modal type \"${modalType}\" is not registered`);\n      return;\n    }\n\n    button.addEventListener('click', () => {\n      const { getContent, init } = modalTypes[modalType];\n\n      const content = getContent();\n      if (!content) {\n        console.error(`Failed to get content for modal type \"${modalType}\"`);\n        return;\n      }\n\n      openModal(content);\n\n      if (init) {\n        setTimeout(async () => {\n          try {\n            await init(closeModal);\n          } catch (error) {\n            console.error('Error initializing modal:', error);\n          }\n        }, 100);\n      }\n    });\n\n    button.setAttribute('data-modal-initialized', 'true');\n  });\n}\n\nexport function openModal(content) {\n  initRefs();\n\n  if (!refs || !refs.modal || !refs.body) {\n    console.error('Modal template elements not found');\n    return;\n  }\n\n  if (typeof content === 'string') {\n    refs.body.innerHTML = content;\n  } else if (content instanceof HTMLElement) {\n    refs.body.innerHTML = '';\n    refs.body.appendChild(content);\n  } else {\n    console.error('Invalid content type. Expected string or HTMLElement');\n    return;\n  }\n\n  refs.modal.classList.remove('hidden');\n  document.body.classList.add('modal-open');\n\n  document.addEventListener('keydown', handleEscape, { once: false });\n  refs.backdrop?.addEventListener('click', handleBackdropClick);\n  refs.closeBtn?.addEventListener('click', handleCloseButtonClick);\n}\n\nexport function closeModal() {\n  initRefs();\n\n  if (!refs || !refs.modal) return;\n\n  refs.modal.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n\n  document.removeEventListener('keydown', handleEscape);\n  refs.backdrop?.removeEventListener('click', handleBackdropClick);\n  refs.closeBtn?.removeEventListener('click', handleCloseButtonClick);\n\n  if (refs && refs.body) {\n    refs.body.innerHTML = '';\n  }\n}\n\nfunction isConfirmModalOpen() {\n  const confirmModal = document.getElementById('modal-confirm');\n  return confirmModal && !confirmModal.classList.contains('hidden');\n}\n\nfunction handleEscape(event) {\n  if (event.key === 'Escape') {\n    if (isConfirmModalOpen()) {\n      return;\n    }\n    closeModal();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === refs.backdrop) {\n    if (isConfirmModalOpen()) {\n      return;\n    }\n    closeModal();\n  }\n}\n\nfunction handleCloseButtonClick() {\n  if (isConfirmModalOpen()) {\n    return;\n  }\n  closeModal();\n}\n\nexport function isModalOpen() {\n  initRefs();\n  return refs && refs.modal && !refs.modal.classList.contains('hidden');\n}\n","import { REFS } from './constants.js';\n\nconst FAVORITES_KEY = 'favorites';\n\n// Get favorites from LocalStorage\nfunction getFavorites() {\n  const data = localStorage.getItem(FAVORITES_KEY);\n  if (!data) return [];\n\n  const parsed = JSON.parse(data);\n\n  if (parsed.length > 0 && typeof parsed[0] === 'object' && parsed[0].id) {\n    const ids = parsed.map(item => item.id || item._id).filter(Boolean);\n    saveFavorites(ids);\n    return ids;\n  }\n\n  return parsed;\n}\n\n// Save favorites to LocalStorage\nfunction saveFavorites(favoritesArray) {\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favoritesArray));\n}\n\n// Check if an exercise is in favorites\nfunction isFavorite(id) {\n  const favorites = getFavorites();\n  return favorites.includes(id);\n}\n\n// Add exercise to favorites (–∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ ID)\nfunction addFavorite(exerciseObj) {\n  const favorites = getFavorites();\n  const exerciseId = exerciseObj.id || exerciseObj._id;\n  if (exerciseId && !favorites.includes(exerciseId)) {\n    favorites.push(exerciseId);\n    saveFavorites(favorites);\n  }\n}\n\n// Remove exercise from favorites\nfunction removeFavorite(id) {\n  const favorites = getFavorites();\n  const updated = favorites.filter(itemId => itemId !== id);\n  saveFavorites(updated);\n}\n\nconst currentExercise = {};\n\nfunction initFavoritesBtn(exercise, buttonElement = null) {\n  const favoriteBtnElement = buttonElement || REFS.favoriteBtn;\n\n  if (!favoriteBtnElement) return;\n\n  Object.assign(currentExercise, exercise);\n\n  const exerciseId = exercise.id || exercise._id;\n  const isInFavorites = isFavorite(exerciseId);\n\n  updateButtonText(favoriteBtnElement, isInFavorites);\n  const newBtn = favoriteBtnElement.cloneNode(true);\n  favoriteBtnElement.parentNode.replaceChild(newBtn, favoriteBtnElement);\n\n  newBtn.onclick = () => {\n    const currentId = exercise.id || exercise._id;\n    if (isFavorite(currentId)) {\n      removeFavorite(currentId);\n      updateButtonText(newBtn, false);\n    } else {\n      addFavorite(exercise);\n      updateButtonText(newBtn, true);\n    }\n  };\n}\n\nfunction updateButtonText(button, isInFavorites) {\n  const textNodes = Array.from(button.childNodes).filter(\n    node => node.nodeType === Node.TEXT_NODE && node.textContent.trim()\n  );\n\n  if (textNodes.length > 0) {\n    textNodes[0].textContent = isInFavorites\n      ? 'Remove from favorites'\n      : 'Add to favorites';\n  } else {\n    const svg = button.querySelector('svg');\n    const text = document.createTextNode(\n      isInFavorites ? 'Remove from favorites' : 'Add to favorites'\n    );\n    if (svg) {\n      button.insertBefore(text, svg);\n    } else {\n      button.appendChild(text);\n    }\n  }\n}\n\nexport {\n  getFavorites,\n  saveFavorites,\n  isFavorite,\n  addFavorite,\n  removeFavorite,\n  currentExercise,\n  initFavoritesBtn,\n};\n","import { YourEnergyAPI } from './api.js';\nimport { initFavoritesBtn } from './favorites-btn.js';\nimport { showError } from './iziToast-helper.js';\nimport { initModalButtons } from './modal-template.js';\n\nconst api = new YourEnergyAPI();\n\nexport function getExerciseModalContent() {\n  const modalTemplate = document.getElementById('exercise-modal-template');\n\n  if (!modalTemplate) {\n    console.error(\n      'Exercise modal template not found. Ensure modal-exercise.html is loaded via <load> tag.'\n    );\n    return null;\n  }\n\n  const fragment = modalTemplate.content.cloneNode(true);\n  const content = fragment.firstElementChild || fragment.firstChild;\n\n  if (!content) {\n    console.error('Failed to extract content from template fragment');\n    return null;\n  }\n\n  return content;\n}\n\nexport async function initExerciseModal(closeModalFn) {\n  const modalBody = document.querySelector('[data-modal-body]');\n  const modal = modalBody?.querySelector('.exercise-modal');\n\n  if (!modalBody || !modal) {\n    console.error('Modal body or exercise modal not found');\n    return;\n  }\n\n  const loader = modal.querySelector('.exercise-modal__loader');\n  if (loader) {\n    loader.classList.remove('hidden');\n  }\n\n  let exerciseId =\n    sessionStorage.getItem('exerciseModalExerciseId') ||\n    document\n      .querySelector('[data-modal=\"exercise\"][data-exercise-id]')\n      ?.getAttribute('data-exercise-id');\n\n  if (exerciseId) {\n    sessionStorage.removeItem('exerciseModalExerciseId');\n  }\n\n  if (!exerciseId) {\n    if (loader) loader.classList.add('hidden');\n    showError('Exercise ID is missing');\n    return;\n  }\n\n  let exercise;\n  try {\n    exercise = await api.getExerciseById(exerciseId);\n    exercise.id = exercise.id || exercise._id;\n  } catch (err) {\n    console.error('Failed to load exercise:', err);\n    if (loader) loader.classList.add('hidden');\n    showError(err.message || 'Failed to load exercise. Try later.');\n    modal.innerHTML = `<p>Failed to load exercise. Try later.</p>`;\n    return;\n  }\n\n  renderExerciseData(modal, exercise);\n\n  if (loader) {\n    loader.classList.add('hidden');\n  }\n\n  const favoritesBtn = modal.querySelector('.favorites-btn');\n  if (favoritesBtn) {\n    initFavoritesBtn(exercise, favoritesBtn);\n  }\n\n  const ratingBtn = modal.querySelector('.exercise-modal__btn--rating');\n  if (ratingBtn && !ratingBtn.hasAttribute('data-modal-initialized')) {\n    initModalButtons();\n  }\n}\n\nfunction renderExerciseData(container, exercise) {\n  const titleEl = container.querySelector('.exercise-modal__title');\n  const ratingValueEl = container.querySelector(\n    '.exercise-modal__rating-value'\n  );\n  const starsContainer = container.querySelector('.exercise-modal__stars');\n  const gifEl = container.querySelector('.exercise-modal__gif');\n  const targetEl = container.querySelector('.exercise-modal__target');\n  const bodypartEl = container.querySelector('.exercise-modal__bodypart');\n  const equipmentEl = container.querySelector('.exercise-modal__equipment');\n  const popularEl = container.querySelector('.exercise-modal__popular');\n  const caloriesEl = container.querySelector('.exercise-modal__calories');\n  const descriptionEl = container.querySelector('.exercise-modal__description');\n  const favoritesBtn = container.querySelector('.favorites-btn');\n  const ratingBtn = container.querySelector('.exercise-modal__btn--rating');\n\n  // Title\n  if (titleEl) titleEl.textContent = exercise.name || '';\n\n  // Rating\n  const rating = exercise.rating || 0;\n  if (ratingValueEl) {\n    ratingValueEl.textContent = rating.toFixed(1);\n  }\n  if (starsContainer) {\n    starsContainer.innerHTML = renderStars(rating);\n  }\n\n  // GIF\n  if (gifEl) {\n    gifEl.src = exercise.gifUrl || '';\n    gifEl.alt = exercise.name || 'Exercise GIF';\n  }\n\n  // Info\n  if (targetEl) targetEl.textContent = capitalizeFirst(exercise.target || '');\n  if (bodypartEl)\n    bodypartEl.textContent = capitalizeFirst(exercise.bodyPart || '');\n  if (equipmentEl)\n    equipmentEl.textContent = capitalizeFirst(exercise.equipment || '');\n\n  // Popular\n  if (popularEl) {\n    const popularity = exercise.popularity || 0;\n    if (popularity >= 1000) {\n      popularEl.textContent =\n        (popularity / 1000).toFixed(1).replace(/\\.0$/, '') + 'k';\n    } else {\n      popularEl.textContent = popularity.toString();\n    }\n  }\n\n  // Calories\n  if (caloriesEl) {\n    const calories = exercise.burnedCalories;\n    const caloriesContainer = caloriesEl.closest('p');\n\n    if (calories && calories > 0) {\n      const time = exercise.time || 3;\n      caloriesEl.textContent = `${calories}/${time} min`;\n      if (caloriesContainer) {\n        caloriesContainer.style.display = '';\n      }\n    } else {\n      if (caloriesContainer) {\n        caloriesContainer.style.display = 'none';\n      }\n    }\n  }\n\n  // Description\n  if (descriptionEl) {\n    descriptionEl.textContent =\n      exercise.description || exercise.instructions || '';\n  }\n\n  // Buttons\n  if (favoritesBtn) {\n    favoritesBtn.setAttribute('data-id', exercise.id || exercise._id || '');\n  }\n\n  if (ratingBtn) {\n    ratingBtn.setAttribute(\n      'data-exercise-id',\n      exercise.id || exercise._id || ''\n    );\n  }\n}\n\nfunction renderStars(rating) {\n  const roundedRating = Math.round(rating);\n  const fullStars = roundedRating;\n  const emptyStars = 5 - fullStars;\n\n  let starsHTML = '';\n\n  const starPath =\n    'M5.53234 0.690968C5.83169 -0.230342 7.1351 -0.230343 7.43445 0.690968L8.27951 3.29178C8.41338 3.7038 8.79734 3.98276 9.23057 3.98276H11.9652C12.9339 3.98276 13.3367 5.22238 12.553 5.79178L10.3406 7.39917C9.99014 7.65381 9.84348 8.10518 9.97735 8.5172L10.8224 11.118C11.1218 12.0393 10.0673 12.8055 9.28357 12.2361L7.07118 10.6287C6.7207 10.374 6.2461 10.374 5.89561 10.6287L3.68323 12.2361C2.89952 12.8055 1.84504 12.0393 2.14439 11.118L2.98944 8.51721C3.12332 8.10518 2.97666 7.65381 2.62617 7.39917L0.41379 5.79178C-0.369924 5.22238 0.0328507 3.98276 1.00157 3.98276H3.73623C4.16946 3.98276 4.55341 3.7038 4.68729 3.29178L5.53234 0.690968Z';\n\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML += `\n      <div class=\"rating-star active\">\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 13 13\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"rating-star__svg\"\n        >\n          <path\n            d=\"${starPath}\"\n            class=\"rating-star__path\"\n          />\n        </svg>\n      </div>\n    `;\n  }\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML += `\n      <div class=\"rating-star\">\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 13 13\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"rating-star__svg\"\n        >\n          <path\n            d=\"${starPath}\"\n            class=\"rating-star__path\"\n          />\n        </svg>\n      </div>\n    `;\n  }\n\n  return starsHTML;\n}\n\nfunction capitalizeFirst(str) {\n  if (!str) return '';\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","import { YourEnergyAPI } from './api';\nimport { showError } from './iziToast-helper';\nimport { renderPaginationUniversal } from './pagination.js';\nimport { REFS } from './constants.js';\nimport { injectSchemaExercises } from './seo-function.js';\nimport { openModal, closeModal } from './modal-template.js';\nimport {\n  getExerciseModalContent,\n  initExerciseModal,\n} from './modal-exercise-content.js';\nimport { MODAL_TYPES } from './constants.js';\n\nconst api = new YourEnergyAPI();\n\nfunction getPageLimit() {\n  return window.innerWidth < 768 ? 8 : 10;\n}\n\nlet currentPage = 1;\nlet currentTotalPages = 1;\n\nexport async function initExercisesList() {\n  const listEl = REFS.exercisesList;\n  if (!listEl) return;\n\n  await loadExercisesList({ page: 1 });\n}\n\nexport async function loadExercisesList({ page = 1, keyword = '' } = {}) {\n  const listEl = REFS.exercisesList;\n  if (!listEl) return;\n\n  const limit = getPageLimit();\n\n  const { type, filter } = getTypeAndFilterFromUI();\n  const params = buildExercisesParams({ page, limit, type, filter, keyword });\n\n  try {\n    const data = await api.getExercises(params);\n    const items = data.results || [];\n    injectSchemaExercises(data);\n    currentPage = data.page || page;\n    currentTotalPages = data.totalPages || 1;\n\n    renderExercisesList(listEl, items);\n    renderExercisesPagination(currentPage, currentTotalPages);\n  } catch (err) {\n    console.error('Failed to load exercises:', err);\n    showError(err.message || 'Failed to load exercises. Try again later.');\n\n    listEl.innerHTML = `\n      <li class=\"exercises__item\">\n        <p>Failed to load exercises. Try again later.</p>\n      </li>\n    `;\n  }\n}\n\nfunction getTypeAndFilterFromUI() {\n  const urlParams = new URLSearchParams(window.location.search);\n\n  const typeFromUrl = urlParams.get('type') || urlParams.get('tab');\n\n  const activeTab =\n    REFS.exercisesActiveTab?.dataset.tab || typeFromUrl || 'body-parts';\n\n  const filterFromUrl = urlParams.get('filter');\n  const fallbackFilter = getDefaultFilterForType(activeTab);\n\n  return {\n    type: activeTab,\n    filter: filterFromUrl || fallbackFilter,\n  };\n}\n\nfunction getDefaultFilterForType(type) {\n  switch (type) {\n    case 'muscles':\n      return 'abs';\n    case 'equipment':\n      return 'body weight';\n    case 'body-parts':\n    default:\n      return 'waist';\n  }\n}\n\nfunction buildExercisesParams({ page, limit, type, filter, keyword }) {\n  const params = { page, limit };\n\n  if (keyword) params.keyword = keyword;\n\n  switch (type) {\n    case 'body-parts':\n      params.bodypart = filter;\n      break;\n    case 'muscles':\n      params.muscles = filter;\n      break;\n    case 'equipment':\n      params.equipment = filter;\n      break;\n    default:\n      params.bodypart = filter;\n  }\n\n  return params;\n}\n\nfunction renderExercisesList(listEl, items) {\n  if (!items.length) {\n    listEl.innerHTML = `\n      <li class=\"exercises__item\">\n        <p>No exercises found.</p>\n      </li>\n    `;\n    return;\n  }\n\n  const markup = items.map(createExerciseCardMarkup).join('');\n  listEl.innerHTML = markup;\n\n  handleExerciseItemClick(listEl);\n}\n\nfunction createExerciseCardMarkup(item) {\n  const { name, burnedCalories, bodyPart, target, rating } = item;\n\n  return `\n    <li class=\"exercises__item\" data-exercise-id=\"${item._id}\">\n      <div class=\"exercises__item-top\">\n        <div class=\"exercises__item-info\">\n          <span class=\"exercises__badge\">Workout</span>\n          <div class=\"exercises__rating\">\n            <span class=\"exercises__meta-key\">${rating}</span>\n            <span class=\"exercises__meta-value\">\n              <svg class=\"star\"></svg>\n            </span>\n          </div>\n        </div>\n\n        <button\n          type=\"button\"\n          class=\"exercises__start-btn js-open-exercise\"\n          data-exercise-id=\"${item._id}\"\n        >\n          Start\n          <svg class=\"arrow__icon\"></svg>\n        </button>\n      </div>\n\n      <div class=\"exercises__name-container\">\n        <svg class=\"exercises__icon\"></svg>\n        <h3 class=\"exercises__name\">${name}</h3>\n      </div>\n\n      <div class=\"exercises__item-bottom\">\n        <p class=\"exercises__meta\">\n          <span class=\"exercises__meta-label\">Burned calories:</span>\n          <span class=\"exercises__meta-value\">${burnedCalories}</span>\n        </p>\n        <p class=\"exercises__meta\">\n          <span class=\"exercises__meta-label\">Body part:</span>\n          <span class=\"exercises__meta-value\">${bodyPart}</span>\n        </p>\n        <p class=\"exercises__meta\">\n          <span class=\"exercises__meta-label\">Target:</span>\n          <span class=\"exercises__meta-value\">${target}</span>\n        </p>\n      </div>\n    </li>\n  `;\n}\n\nfunction handleExerciseItemClick(listEl) {\n  const startButtons = listEl.querySelectorAll(\n    '.exercises__start-btn[data-exercise-id]'\n  );\n\n  startButtons.forEach(button => {\n    if (button.hasAttribute('data-click-handler-attached')) {\n      return;\n    }\n\n    button.addEventListener('click', handleExcersiseModalOpen);\n    button.setAttribute('data-click-handler-attached', 'true');\n  });\n}\n\nasync function handleExcersiseModalOpen(event) {\n  const button = event.currentTarget;\n  const exerciseId = button.getAttribute('data-exercise-id');\n\n  if (!exerciseId) {\n    console.error('Exercise ID is missing');\n    return;\n  }\n\n  sessionStorage.setItem('exerciseModalExerciseId', exerciseId);\n\n  const content = getExerciseModalContent();\n  if (!content) {\n    console.error('Failed to get exercise modal content');\n    return;\n  }\n\n  openModal(content);\n\n  try {\n    await initExerciseModal(closeModal);\n  } catch (error) {\n    console.error('Error initializing exercise modal:', error);\n  }\n}\n\nexport function renderExercisesPagination(currentPage, totalPages) {\n  const container = REFS.exercisesPagination;\n\n  renderPaginationUniversal({\n    container,\n    currentPage,\n    totalPages,\n    mode: 'neighbors',\n    classes: {\n      page: 'exercises__page',\n      active: 'active',\n    },\n    onPageChange(page) {\n      loadExercisesList({ page });\n    },\n  });\n}","// const tabsContainer = document.querySelector('[data-filters-tabs]');\n// const searchBox = document.querySelector('.filters__search');\n// const subtitle = document.querySelector('.filters__subtitle');\n\n// const isDesktop = () => window.matchMedia('(min-width: 1440px)').matches;\n\n// if (tabsContainer && searchBox && subtitle) {\n//   const updateUIForFilter = filter => {\n//     const desktop = isDesktop();\n\n//     if (filter === 'bodypart') {\n//       subtitle.textContent = ' / Waist';\n\n//       if (desktop) {\n//         // DESKTOP: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ opacity\n//         searchBox.classList.add('filters__search--visible');\n//         // searchBox.classList.remove('filters__search--visible-mobile');\n//       } else {\n//         // MOBILE + TABLET: –ø–æ–∏—Å–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ —Ç–∞–±–æ–≤, —Å–¥–≤–∏–≥–∞—è –∏—Ö –≤–ø—Ä–∞–≤–æ/–≤–Ω–∏–∑\n//         // searchBox.classList.add('filters__search--visible-mobile');\n//         searchBox.classList.add('filters__search--visible');\n//         // searchBox.classList.remove('filters__search--visible');\n//       }\n//     } else {\n//       subtitle.textContent = '';\n//       searchBox.classList.remove(\n//         'filters__search--visible'\n//         // 'filters__search--visible-mobile'\n//       );\n//     }\n//   };\n\n//   tabsContainer.addEventListener('click', e => {\n//     const btn = e.target.closest('.filters__tab');\n//     if (!btn) return;\n\n//     tabsContainer.querySelectorAll('.filters__tab').forEach(tab => {\n//       const isActive = tab === btn;\n//       tab.classList.toggle('filters__tab--active', isActive);\n//       tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\n//     });\n\n//     updateUIForFilter(btn.dataset.filter);\n//   });\n\n//   // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–µ—Å–ª–∏ Body parts –∞–∫—Ç–∏–≤–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)\n//   const activeBtn = tabsContainer.querySelector('.filters__tab--active');\n//   if (activeBtn) {\n//     updateUIForFilter(activeBtn.dataset.filter);\n//   }\n// }\n\n// // === –õ–æ–≥–∏–∫–∞ –∫—Ä–µ—Å—Ç–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ ===\n// const searchInput = document.querySelector('.filters__input');\n// const clearBtn = document.querySelector('.filters__clear-btn');\n\n// if (searchInput && clearBtn) {\n//   const toggleClear = () => {\n//     if (searchInput.value.trim()) {\n//       clearBtn.classList.add('filters__clear-btn--visible');\n//     } else {\n//       clearBtn.classList.remove('filters__clear-btn--visible');\n//     }\n//   };\n\n//   searchInput.addEventListener('input', toggleClear);\n\n//   clearBtn.addEventListener('click', () => {\n//     searchInput.value = '';\n//     searchInput.focus();\n//     toggleClear();\n//   });\n\n//   toggleClear();\n// }\n\n// // filters-tabs.js\n// // const tabsContainer = document.querySelector('[data-filters-tabs]');\n// // const searchBox = document.querySelector('.filters__search');\n// // const subtitle = document.querySelector('.filters__subtitle');\n\n// // // ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó —Ç–∞–±—É –∑–∑–æ–≤–Ω—ñ (–∑ Categories)\n// // export function activateFiltersTab(filterKey, subtitleValue = '') {\n// //   if (!tabsContainer) return;\n\n// //   const btn = tabsContainer.querySelector(`[data-filter=\"${filterKey}\"]`);\n// //   if (!btn) return;\n\n// //   // —Ä–æ–±–∏–º–æ –∞–∫—Ç–∏–≤–Ω–∏–º –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç–∞–±\n// //   tabsContainer.querySelectorAll('.filters__tab').forEach(tab => {\n// //     const isActive = tab === btn;\n// //     tab.classList.toggle('filters__tab--active', isActive);\n// //     tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\n// //   });\n\n// //   // –∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç—É —Å–∞–º—É –ª–æ–≥—ñ–∫—É, —â–æ –±—É–ª–∞ –≤ —Ç–≤–æ—î–º—É if\n// //   if (filterKey === 'bodypart') {\n// //     searchBox.classList.remove('hidden');\n// //     subtitle.textContent = ` / ${subtitleValue || 'Waist'}`;\n// //   } else {\n// //     searchBox.classList.add('hidden');\n// //     subtitle.textContent = '';\n// //   }\n// // }\n\n// // // ‚úÖ –¢–≤—ñ–π —Å—Ç–∞—Ä–∏–π listener ‚Äî –∑–∞–ª–∏—à–∞—î–º–æ, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é\n// // if (tabsContainer) {\n// //   tabsContainer.addEventListener('click', e => {\n// //     const btn = e.target.closest('.filters__tab');\n// //     if (!btn) return;\n\n// //     const filterKey = btn.dataset.filter;\n// //     activateFiltersTab(filterKey);\n// //   });\n// // }\n\n// filters.js\nimport { loadExercisesList } from './exercises-list.js';\nconst tabsContainer = document.querySelector('[data-filters-tabs]');\nconst searchBox = document.querySelector('.filters__search');\nconst subtitle = document.querySelector('.filters__subtitle');\n\nconst isDesktop = () => window.matchMedia('(min-width: 1440px)').matches;\n\n// ‚úÖ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI\nfunction updateUIForFilter(filter, subtitleValue = '') {\n  if (!searchBox || !subtitle) return;\n\n  const desktop = isDesktop();\n\n  if (filter === 'bodypart') {\n    // —è–∫—â–æ –ø—Ä–∏–π—à–ª–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ Categories ‚Äî –ø–æ–∫–∞–∑—É—î–º–æ –π–æ–≥–æ,\n    // —ñ–Ω–∞–∫—à–µ –ª–∏—à–∞—î–º–æ –¥–µ—Ñ–æ–ª—Ç Waist\n    subtitle.textContent = ` / ${subtitleValue || 'Waist'}`;\n\n    // üëâ –î–û–ë–ê–í–õ–ï–ù–û: —Ä–µ–Ω–¥–µ—Ä –µ–∫—Å–µ—Å–∞–π–∑—ñ–≤\n    if (typeof renderExercises === 'function') {\n      renderExercises(window.exercisesList || []);\n    }\n\n    if (desktop) {\n      searchBox.classList.add('filters__search--visible');\n    } else {\n      searchBox.classList.add('filters__search--visible');\n    }\n  } else {\n    subtitle.textContent = '';\n    searchBox.classList.remove('filters__search--visible');\n  }\n}\n\n// ‚úÖ –ï–ö–°–ü–û–†–¢: —Ç–µ, —â–æ –≤–∏–∫–ª–∏–∫–∞—î Categories\nexport function activateFiltersTab(filterKey, subtitleValue = '') {\n  if (!tabsContainer) return;\n\n  const btn = tabsContainer.querySelector(`[data-filter=\"${filterKey}\"]`);\n  if (!btn) return;\n\n  const categories = document.getElementById('cards-box');\n  const exercises = document.getElementById('exercises');\n\n  if (filterKey === 'muscles' || filterKey === 'equipment') {\n    // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –≤–∏–≥–ª—è–¥\n    categories.classList.remove('hidden');\n    exercises.classList.add('hidden');\n    // ‚úÖ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–∞—Ä—Ç–∫–∏ –≤ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω\n\n    // –ß–∏—Å—Ç–∏–º–æ subtitle\n    const subtitle = document.querySelector('.filters__subtitle');\n    subtitle.textContent = '';\n\n    // URL —Å–∫–∏–¥–∞—î–º–æ\n    const url = new URL(window.location.href);\n    url.searchParams.delete('filter');\n    window.history.pushState({}, '', url);\n  } else if (filterKey === 'bodypart') {\n    // ‚úÖ –ø–æ–∫–∞–∑—É—î–º–æ EXERCISES\n    categories.classList.add('hidden');\n    exercises.classList.remove('hidden');\n\n    // ‚úÖ –æ–Ω–æ–≤–ª—é—î–º–æ URL –ø—ñ–¥ —Ñ–æ—Ä–º–∞—Ç exercises-list.js\n    const url = new URL(window.location.href);\n    url.searchParams.set('type', 'body-parts');\n\n    if (subtitleValue) {\n      // –ø—Ä–∏–π—à–ª–∏ –∑ Categories ‚Äî filter –≤–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π,\n      // —Ç—É—Ç –ù–ï —Ä–æ–±–∏–º–æ loadExercisesList, –±–æ Categories –≤–∂–µ –π–æ–≥–æ –≤–∏–∫–ª–∏–∫–∞—î\n      url.searchParams.set('filter', subtitleValue.toLowerCase());\n    } else {\n      // –∫–ª—ñ–∫ –ø–æ —Ç–∞–±—É ‚Äî —Ö–∞–π exercises-list –≤—ñ–∑—å–º–µ –¥–µ—Ñ–æ–ª—Ç waist\n      url.searchParams.delete('filter');\n\n      // ‚úÖ —ñ —Ç—ñ–ª—å–∫–∏ —Ç—É—Ç —Ä–æ–±–∏–º–æ –∑–∞–ø–∏—Ç\n      loadExercisesList({ page: 1 });\n    }\n  }\n\n  // –∞–∫—Ç–∏–≤—É—î–º–æ —Ç–∞–±–∏\n  tabsContainer.querySelectorAll('.filters__tab').forEach(tab => {\n    const isActive = tab === btn;\n    tab.classList.toggle('filters__tab--active', isActive);\n    tab.setAttribute('aria-selected', isActive ? 'true' : 'false');\n  });\n\n  // –æ–Ω–æ–≤–ª—é—î–º–æ UI (search + subtitle)\n  updateUIForFilter(filterKey, subtitleValue);\n}\n\n// ‚úÖ —Ç–≤—ñ–π listener —Ç–µ–ø–µ—Ä –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—É —Å–∞–º—É —Ñ—É–Ω–∫—Ü—ñ—é\nif (tabsContainer && searchBox && subtitle) {\n  tabsContainer.addEventListener('click', e => {\n    const btn = e.target.closest('.filters__tab');\n    if (!btn) return;\n\n    // subtitleValue —Ç—É—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞—î–º–æ ‚Äî –±—É–¥–µ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π Waist\n    activateFiltersTab(btn.dataset.filter);\n  });\n\n  // —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ\n  const activeBtn = tabsContainer.querySelector('.filters__tab--active');\n  if (activeBtn) {\n    updateUIForFilter(activeBtn.dataset.filter);\n  }\n}\n\n// === –õ–æ–≥–∏–∫–∞ –∫—Ä–µ—Å—Ç–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ ===\nconst searchInput = document.querySelector('.filters__input');\nconst clearBtn = document.querySelector('.filters__clear-btn');\n\nif (searchInput && clearBtn) {\n  const toggleClear = () => {\n    if (searchInput.value.trim()) {\n      clearBtn.classList.add('filters__clear-btn--visible');\n    } else {\n      clearBtn.classList.remove('filters__clear-btn--visible');\n    }\n  };\n\n  searchInput.addEventListener('input', toggleClear);\n\n  clearBtn.addEventListener('click', () => {\n    searchInput.value = '';\n    searchInput.focus();\n    toggleClear();\n  });\n\n  toggleClear();\n}","import { activateFiltersTab } from './filters';\nimport { loadExercisesList } from './exercises-list';\n\n\nexport function handleCategoryCardClick(item) {\n  return function (e) {\n    e.preventDefault();\n\n    // 1. –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ç–∏–ø —Ñ—ñ–ª—å—Ç—Ä—É\n    const TYPE_MAP = {\n      Muscles: 'muscles',\n      'Body parts': 'body-parts',\n      Equipment: 'equipment',\n    };\n\n    const type = TYPE_MAP[item.filter] || TYPE_MAP['Body parts'];\n\n    // 2. –•–æ–≤–∞—î–º–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó\n    const categoriesSection = document.getElementById('cards-box');\n    categoriesSection.classList.add('hidden');\n\n    // 3. –ü–æ–∫–∞–∑—É—î–º–æ exercises\n    const exercisesSection = document.getElementById('exercises');\n    exercisesSection.classList.remove('hidden');\n\n    // 4. –ê–∫—Ç–∏–≤—É—î–º–æ —Ç–∞–± Body parts + —á–æ—Ä–Ω–∞ —Ä–∏—Å–∫–∞\n    activateFiltersTab('bodypart', item.name);\n\n    // 5. –ü–æ–∫–∞–∑—É—î–º–æ –ø–æ—à—É–∫ (–∞–∫—Ç–∏–≤—É—î —Å–∞–º–∞ activateFiltersTab)\n\n    // 6. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ exercises –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é\n    loadExercisesList ({\n      page: 1,\n      filter: item.name.toLowerCase(),\n      type,\n    });\n\n    // 7. –û–Ω–æ–≤–ª—é—î–º–æ URL\n    const url = new URL(window.location.href);\n    url.searchParams.set('type', type);\n    url.searchParams.set('filter', item.name.toLowerCase());\n    window.history.pushState({}, '', url);\n  };\n}","import { YourEnergyAPI } from './api';\nimport { showError } from './iziToast-helper';\nimport { injectSchema } from './seo-function';\nimport { handleCategoryCardClick } from './categories-card-click';\nexport const fetchApi = new YourEnergyAPI();\n\nconst PAGE_LIMIT = window.innerWidth < 768 ? 9 : 12;\n\n// UI state\nlet activeFilter = 'Muscles';\nlet activePage = 1;\n\nasync function getCategories(filter = activeFilter, page = 1, limit = PAGE_LIMIT) {\n  activeFilter = filter;\n  activePage = page;\n\n  try {\n    const params = { filter, page, limit };\n    const data = await fetchApi.getFilters(params);\n\n    if (!data) {\n      showError(\"Failed to fetch categories: No response from server\");\n      clearCards();\n      clearPagination();\n      return;\n    }\n\n    if (data.error || data.status === 'error') {\n      showError(data.message || \"Failed to fetch categories\");\n      clearCards();\n      clearPagination();\n      return;\n    }\n\n    if (!data.results || data.results.length === 0) {\n      showError(\"Nothing found\");\n      clearCards();\n      clearPagination();\n      return;\n    }\n\n    renderCards(data.results || []);\n    renderPagination(activePage, data.totalPages || 1);\n\n    if (typeof injectSchema === 'function') {\n      injectSchema(data);\n    }\n  } catch (err) {\n    console.error('getCategories error:', err);\n    showError(err?.message || 'Something went wrong');\n    clearCards();\n    clearPagination();\n  }\n}\n\n// Cards\nfunction renderCards(items) {\n  const container = document.getElementById('cards-container');\n  if (!container) return;\n  container.innerHTML = \"\";\n\n  items.forEach(item => {\n    const card = document.createElement('div');\n    card.className = 'card';\n\n    // Safe values\n    const safeImg = item.imgURL && item.imgURL.trim() !== \"\" \n      ? item.imgURL \n      : \"/img/no-image.jpg\";     // fallback image\n    \n    const safeName = item.name || \"\";\n    const safeFilter = item.filter || \"\";\n\n    card.innerHTML = `\n      <img src=\"${safeImg}\" alt=\"${safeName}\" loading=\"lazy\" />\n      <div class=\"card-body\">\n        <h3>${safeName}</h3>\n        <span>${safeFilter}</span>\n      </div>\n    `;\n    handleCategoryCardClick;\n    card.addEventListener('click', handleCategoryCardClick(item));\n    container.appendChild(card);\n\n    const cardBody = card.querySelector(\".card-body\");\n    cardBody.addEventListener(\"click\", () => {\n      onCardBodyClick(safeName);\n    });\n  });\n}\n\n// Pagination\nfunction renderPagination(currentPage, totalPages) {\n  const container = document.getElementById('pagination');\n  if (!container) return;\n  container.innerHTML = '';\n\n  for (let i = 1; i <= totalPages; i++) {\n    const pageNum = i;\n    const btn = document.createElement('button');\n\n    btn.textContent = pageNum;\n    btn.className = 'pagination-page';\n    btn.setAttribute('data-page', pageNum);\n\n    if (pageNum === currentPage) {\n      btn.classList.add('active');\n    }\n\n    btn.addEventListener('click', () => {\n      if (pageNum === activePage) return;\n      activePage = pageNum;\n      getCategories(activeFilter, pageNum, PAGE_LIMIT);\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    });\n\n    container.appendChild(btn);\n  }\n}\n\n// Clear Helpers\nfunction clearCards() {\n  const container = document.getElementById(\"cards-container\");\n  if (container) container.innerHTML = \"\";\n}\n\nfunction clearPagination() {\n  const container = document.getElementById(\"pagination\");\n  if (container) container.innerHTML = \"\";\n}\n\n// Callback on card click\nexport function onCardBodyClick(nameValue) {\n  console.log(\"Clicked name:\", nameValue);\n  // here need to add logic how to join categories and exercises\n}\n\n// First load\ngetCategories(activeFilter, activePage, PAGE_LIMIT);\n","import { REFS } from './constants.js';\n\n(() => {\n  const {\n    mobileMenu: menu,\n    mobileMenuOpenBtn: openMenuBtn,\n    mobileMenuCloseBtn: closeMenuBtn,\n  } = REFS;\n\n  if (!openMenuBtn || !menu || !closeMenuBtn) return;\n\n  const toggleMenu = () => {\n    menu.classList.toggle('is-open');\n    document.body.classList.toggle('menu-open');\n  };\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n  window\n    .matchMedia('(min-width: 768px)')\n    .addEventListener('change', e => {\n      if (!e.matches) return;\n      menu.classList.remove('is-open');\n      document.body.classList.remove('menu-open');\n    });\n})();\n","import { VALIDATION, ERROR_MESSAGES } from './constants.js';\n\nconst form = document.querySelector('.footer__form');\nconst emailInput = form.querySelector('.footer__input');\nconst messageEl = form.querySelector('.footer__message');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const email = emailInput.value.trim();\n\n  if (!email || !VALIDATION.EMAIL_REGEX.test(email)) {\n    messageEl.textContent = ERROR_MESSAGES.EMAIL_REQUIRED;\n    messageEl.classList.remove('footer__message--success');\n    messageEl.classList.add('footer__message--error');\n    return;\n  }\n\n  try {\n    const response = await fetch(\n      'https://your-energy.b.goit.study/api/subscription',\n      {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email }),\n      }\n    );\n\n    if (response.ok) {\n      messageEl.textContent = 'Subscription successful!';\n      messageEl.classList.remove('footer__message--error');\n      messageEl.classList.add('footer__message--success');\n\n      emailInput.value = '';\n    } else {\n      const data = await response.json();\n\n      messageEl.textContent = data.message || 'Subscription failed.';\n      messageEl.classList.remove('footer__message--success');\n      messageEl.classList.add('footer__message--error');\n    }\n  } catch (error) {\n    messageEl.textContent = 'Network error. Try again later.';\n    messageEl.classList.remove('footer__message--success');\n    messageEl.classList.add('footer__message--error');\n  }\n});\n","const scrollUpButton = document.querySelector('.scroll-up-btn');\n\nif (scrollUpButton) {\n  function smoothScrollToTop(duration = 1000) {\n    const start = window.scrollY;\n    const startTime = performance.now();\n\n    function scrollStep(currentTime) {\n      const elapsed = currentTime - startTime;\n      const progress = Math.min(elapsed / duration, 1);\n      const ease = 1 - Math.pow(1 - progress, 3);\n      window.scrollTo(0, start * (1 - ease));\n\n      if (progress < 1) {\n        requestAnimationFrame(scrollStep);\n      }\n    }\n\n    requestAnimationFrame(scrollStep);\n  }\n\n  window.addEventListener('scroll', () => {\n    if (window.scrollY > 300) {\n      scrollUpButton.classList.add('show');\n    } else {\n      scrollUpButton.classList.remove('show');\n    }\n  });\n\n  scrollUpButton.addEventListener('click', (e) => {\n    e.preventDefault();\n    smoothScrollToTop();\n  });\n}\n","const ref = {\n  loaderOverlay: document.getElementById('loader-overlay'),\n  loaderBg: document.getElementById('bg-loader'),\n};\nexport function startLoader() {\n  if (ref.loaderOverlay) ref.loaderOverlay.classList.remove('hidden');\n  if (ref.loaderBg) ref.loaderBg.classList.add('bg-loader');\n}\nexport function cancelLoader() {\n  if (ref.loaderOverlay) ref.loaderOverlay.classList.add('hidden');\n  if (ref.loaderBg) ref.loaderBg.classList.remove('bg-loader');\n}\n","/**\n * module for working with a confirm modal that opens over the main modal\n */\n\nlet confirmModalRefs = null;\nlet confirmCallback = null;\nlet cancelCallback = null;\n\nfunction initConfirmRefs() {\n  if (confirmModalRefs) return;\n\n  const modal = document.getElementById('modal-confirm');\n  if (!modal) {\n    console.error('Confirm modal not found');\n    return;\n  }\n\n  confirmModalRefs = {\n    modal,\n    backdrop: modal.querySelector('[data-confirm-close]'),\n    message: modal.querySelector('[data-confirm-message]'),\n    cancelBtn: modal.querySelector('[data-confirm-cancel]'),\n    confirmBtn: modal.querySelector('[data-confirm-ok]'),\n  };\n\n  confirmModalRefs.backdrop?.removeEventListener('click', handleBackdropClick, {\n    capture: true,\n  });\n  confirmModalRefs.cancelBtn?.removeEventListener('click', handleCancel, {\n    capture: true,\n  });\n  confirmModalRefs.confirmBtn?.removeEventListener('click', handleConfirm, {\n    capture: true,\n  });\n\n  confirmModalRefs.backdrop?.addEventListener('click', handleBackdropClick, {\n    capture: true,\n  });\n  confirmModalRefs.cancelBtn?.addEventListener('click', handleCancel, {\n    capture: true,\n  });\n  confirmModalRefs.confirmBtn?.addEventListener('click', handleConfirm, {\n    capture: true,\n  });\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initConfirmRefs);\n} else {\n  initConfirmRefs();\n}\n\nfunction handleEscape(event) {\n  if (\n    event.key === 'Escape' &&\n    confirmModalRefs &&\n    !confirmModalRefs.modal.classList.contains('hidden')\n  ) {\n    handleCancel();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === confirmModalRefs.backdrop) {\n    event.stopPropagation();\n    event.preventDefault();\n    handleCancel(event);\n  }\n}\n\nfunction handleCancel(event) {\n  if (event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  const callback = cancelCallback;\n  closeConfirmModal();\n  if (callback) {\n    callback();\n  }\n}\n\nfunction handleConfirm(event) {\n  if (event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  const callback = confirmCallback;\n  closeConfirmModal();\n  setTimeout(() => {\n    if (callback) {\n      callback();\n    }\n  }, 0);\n}\n\nexport function openConfirmModal(message, onConfirm, onCancel = null) {\n  initConfirmRefs();\n\n  if (!confirmModalRefs || !confirmModalRefs.modal) {\n    console.error('Confirm modal elements not found');\n    return;\n  }\n\n  confirmCallback = onConfirm;\n  cancelCallback = onCancel;\n\n  if (confirmModalRefs.message) {\n    confirmModalRefs.message.textContent = message;\n  }\n\n  confirmModalRefs.modal.classList.remove('hidden');\n  document.addEventListener('keydown', handleEscape, { once: true });\n}\n\nexport function closeConfirmModal() {\n  if (!confirmModalRefs || !confirmModalRefs.modal) return;\n\n  confirmModalRefs.modal.classList.add('hidden');\n  confirmCallback = null;\n  cancelCallback = null;\n}\n","import { YourEnergyAPI } from './api.js';\nimport { showError, showSuccess } from './iziToast-helper.js';\nimport { openConfirmModal } from './confirm-modal.js';\nimport { ERROR_MESSAGES } from './constants.js';\n\nconst api = new YourEnergyAPI();\n\nlet checkFormFilledFn = null;\n\nexport function getRatingModalContent() {\n  const existingRatingModal = document.querySelector('.rating-modal');\n\n  if (!existingRatingModal) {\n    console.error(\n      'Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag.'\n    );\n    return null;\n  }\n\n  const clonedModal = existingRatingModal.cloneNode(true);\n  updateElementIds(clonedModal);\n\n  return clonedModal;\n}\n\nfunction initRatingModalButtons() {\n  document.addEventListener(\n    'click',\n    function (event) {\n      const button = event.target.closest('[data-modal=\"rating\"]');\n      if (button) {\n        const exerciseId = button.getAttribute('data-exercise-id');\n        if (exerciseId) {\n          sessionStorage.setItem('ratingModalExerciseId', exerciseId);\n        }\n      }\n    },\n    { capture: true }\n  );\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initRatingModalButtons);\n} else {\n  initRatingModalButtons();\n}\n\nfunction updateElementIds(element) {\n  const elementsWithId = element.querySelectorAll('[id]');\n  const timestamp = Date.now();\n\n  elementsWithId.forEach(el => {\n    const oldId = el.id;\n    el.id = `${oldId}-${timestamp}`;\n\n    const labels = element.querySelectorAll(`label[for=\"${oldId}\"]`);\n    labels.forEach(label => {\n      label.setAttribute('for', el.id);\n    });\n  });\n}\n\nexport function checkRatingFormFilled() {\n  return checkFormFilledFn ? checkFormFilledFn() : false;\n}\n\nfunction clearRatingForm() {\n  const modalBody = document.querySelector('[data-modal-body]');\n  const ratingModal = modalBody?.querySelector('.rating-modal');\n\n  if (!ratingModal) return;\n\n  const form = ratingModal.querySelector('.rating-modal__form');\n  const ratingInput = ratingModal.querySelector('input[name=\"rating\"]');\n  const ratingText = ratingModal.querySelector('.rating-modal__rating-text');\n  const emailInput = ratingModal.querySelector('input[name=\"email\"]');\n  const commentTextarea = ratingModal.querySelector('textarea[name=\"comment\"]');\n  const stars = ratingModal.querySelectorAll('.rating-star');\n\n  if (form) form.reset();\n  if (ratingInput) ratingInput.value = '0';\n  if (emailInput) emailInput.value = '';\n  if (commentTextarea) commentTextarea.value = '';\n  if (ratingText) ratingText.textContent = '';\n\n  stars.forEach(star => {\n    star.classList.remove('active');\n  });\n}\n\nexport function handleRatingModalClose(closeModalFn) {\n  if (checkFormFilledFn && checkFormFilledFn()) {\n    openConfirmModal(\n      'Are you sure you want to cancel your exercise review?',\n      () => {\n        clearRatingForm();\n        checkFormFilledFn = null;\n        closeModalFn();\n      },\n      () => {}\n    );\n  } else {\n    clearRatingForm();\n    checkFormFilledFn = null;\n    closeModalFn();\n  }\n}\n\nexport function initRatingModal(closeModalFn) {\n  checkFormFilledFn = null;\n\n  const modalBody = document.querySelector('[data-modal-body]');\n  const ratingModal = modalBody?.querySelector('.rating-modal');\n\n  if (!modalBody || !ratingModal) {\n    console.error('Modal body or rating modal not found');\n    return;\n  }\n\n  let exerciseId =\n    sessionStorage.getItem('ratingModalExerciseId') ||\n    document\n      .querySelector('[data-modal=\"rating\"][data-exercise-id]')\n      ?.getAttribute('data-exercise-id');\n\n  if (exerciseId) {\n    sessionStorage.removeItem('ratingModalExerciseId');\n  }\n\n  if (!exerciseId) {\n    showError('Exercise ID is missing');\n    return;\n  }\n\n  const stars = ratingModal.querySelectorAll('.rating-star');\n  const ratingInput = ratingModal.querySelector('input[name=\"rating\"]');\n  const ratingText = ratingModal.querySelector('.rating-modal__rating-text');\n  const cancelBtn = ratingModal.querySelector('.rating-modal__btn--cancel');\n  const submitBtn = ratingModal.querySelector(\n    '.rating-modal__btn[type=\"submit\"]'\n  );\n  const emailInput = ratingModal.querySelector('input[name=\"email\"]');\n  const commentTextarea = ratingModal.querySelector('textarea[name=\"comment\"]');\n  const form = ratingModal.querySelector('.rating-modal__form');\n\n  let currentRating = 0;\n  if (submitBtn) submitBtn.disabled = true;\n  if (ratingInput) ratingInput.value = '0';\n  if (ratingText) ratingText.textContent = '0';\n\n  const isFormValid = () => {\n    return (\n      currentRating > 0 &&\n      currentRating <= 5 &&\n      emailInput?.value.trim() !== '' &&\n      commentTextarea?.value.trim() !== ''\n    );\n  };\n\n  const updateSubmitButton = () => {\n    if (submitBtn) {\n      submitBtn.disabled = !isFormValid();\n    }\n  };\n\n  const checkFormFilled = () => {\n    return (\n      currentRating > 0 ||\n      emailInput?.value.trim() !== '' ||\n      commentTextarea?.value.trim() !== ''\n    );\n  };\n\n  checkFormFilledFn = checkFormFilled;\n\n  const updateStars = rating => {\n    stars.forEach((star, index) => {\n      const starRating = index + 1;\n      if (starRating <= rating) {\n        star.classList.add('active');\n      } else {\n        star.classList.remove('active');\n      }\n    });\n  };\n\n  stars.forEach((star, index) => {\n    const rating = index + 1;\n\n    star.addEventListener('click', () => {\n      currentRating = rating;\n      updateStars(rating);\n      if (ratingInput) ratingInput.value = rating;\n      if (ratingText) ratingText.textContent = rating;\n      updateSubmitButton();\n    });\n  });\n\n  [emailInput, commentTextarea].forEach(input => {\n    if (input) {\n      input.addEventListener('input', updateSubmitButton);\n    }\n  });\n\n  const resetForm = () => {\n    currentRating = 0;\n    if (ratingInput) ratingInput.value = '0';\n    if (emailInput) emailInput.value = '';\n    if (commentTextarea) commentTextarea.value = '';\n    if (ratingText) ratingText.textContent = '0';\n    updateStars(0);\n    updateSubmitButton();\n  };\n\n  const backdrop = document.querySelector('[data-modal-close]');\n\n  const isConfirmModalOpen = () => {\n    const confirmModal = document.getElementById('modal-confirm');\n    return confirmModal && !confirmModal.classList.contains('hidden');\n  };\n\n  const handleEscapeCapture = event => {\n    if (event.key === 'Escape') {\n      if (isConfirmModalOpen()) {\n        return;\n      }\n      event.stopPropagation();\n      handleRatingModalClose(() => {\n        cleanup();\n        closeModalFn();\n      });\n    }\n  };\n\n  const backdropClickHandler = event => {\n    if (event.target === backdrop) {\n      if (isConfirmModalOpen()) {\n        return;\n      }\n      event.stopPropagation();\n      handleRatingModalClose(() => {\n        cleanup();\n        closeModalFn();\n      });\n    }\n  };\n\n  const cleanup = () => {\n    document.removeEventListener('keydown', handleEscapeCapture, {\n      capture: true,\n    });\n    backdrop?.removeEventListener('click', backdropClickHandler, {\n      capture: true,\n    });\n    closeBtn?.removeEventListener('click', closeBtnHandler, { capture: true });\n  };\n\n  const closeBtn = document.querySelector('.modal-template__close-btn');\n  const closeBtnHandler = event => {\n    if (isConfirmModalOpen()) {\n      return;\n    }\n    event.stopPropagation();\n    handleClose();\n  };\n\n  document.addEventListener('keydown', handleEscapeCapture, { capture: true });\n  backdrop?.addEventListener('click', backdropClickHandler, { capture: true });\n  closeBtn?.addEventListener('click', closeBtnHandler, { capture: true });\n\n  const handleClose = () => {\n    handleRatingModalClose(() => {\n      cleanup();\n      closeModalFn();\n    });\n  };\n\n  if (cancelBtn && closeModalFn) {\n    cancelBtn.addEventListener('click', () => {\n      handleClose();\n    });\n  }\n\n  if (form) {\n    form.setAttribute('data-no-auto-close', 'true');\n\n    form.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      if (!isFormValid()) {\n        showError('Please fill in all fields');\n        return;\n      }\n\n      const formData = new FormData(form);\n      const rating = parseInt(formData.get('rating'), 10);\n      const email = formData.get('email').trim();\n      const comment = formData.get('comment').trim();\n\n      if (submitBtn) {\n        submitBtn.disabled = true;\n        submitBtn.textContent = 'Sending...';\n      }\n\n      try {\n        await api.rateExercise(exerciseId, {\n          rate: rating,\n          email: email,\n          review: comment,\n        });\n\n        showSuccess('Thank you for your feedback!');\n        checkFormFilledFn = null;\n\n        setTimeout(() => {\n          if (closeModalFn) {\n            cleanup();\n            closeModalFn();\n          }\n        }, 1000);\n      } catch (error) {\n        console.error('Failed to submit rating:', error);\n        showError(error.message || ERROR_MESSAGES.API_ERROR);\n\n        if (submitBtn) {\n          submitBtn.disabled = false;\n          submitBtn.textContent = 'Send';\n        }\n      }\n    });\n  }\n}\n","// export function initExercisesTabs() {\n//   const tabs = document.querySelectorAll('.exercises__tab');\n\n//   tabs.forEach(tab => {\n//     tab.addEventListener('click', () => {\n//       tabs.forEach(t => t.classList.remove('exercises__tab--active'));\n//       tab.classList.add('exercises__tab--active');\n//     });\n//   });\n// }\n\n\n\n\n// src/js/exercises-tabs.js\n// import { loadExercisesList } from './exercises-list.js';\n\n// export function initExercisesTabs() {\n//   const tabsContainer = document.querySelector('.js-exercises-tabs');\n//   if (!tabsContainer) return;\n\n//   const tabs = tabsContainer.querySelectorAll('.exercises__tab');\n//   const searchInput = document.querySelector('.exercises__search-input');\n\n//   tabs.forEach(tab => {\n//     tab.addEventListener('click', () => {\n//       // 1. –º—ñ–Ω—è—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π —Ç–∞–±\n//       tabs.forEach(t => t.classList.remove('exercises__tab--active'));\n//       tab.classList.add('exercises__tab--active');\n\n//       // 2. –º–æ–∂–µ–º–æ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç, —è–∫—â–æ —î\n//       const keyword = searchInput ? searchInput.value.trim() : '';\n\n//       // 3. —Ç—è–≥–Ω–µ–º–æ –Ω–æ–≤—ñ –≤–ø—Ä–∞–≤–∏ –ø—ñ–¥ —Ü–µ–π —Ç–∞–±\n//       loadExercisesList({ page: 1, keyword });\n//     });\n//   });\n// }\n\nimport { loadExercisesList } from './exercises-list.js';\n\nexport function initExercisesTabs() {\n  const tabsContainer = document.querySelector('.js-exercises-tabs');\n  if (!tabsContainer) return;\n\n  const tabs = tabsContainer.querySelectorAll('.exercises__tab');\n  const searchInput = document.querySelector('.exercises__search-input');\n\n  tab.addEventListener('click', () => {\n    document.getElementById('categories-section')?.classList.add('hidden');\n    document.getElementById('exercises-section')?.classList.remove('hidden');\n\n    loadExercisesList({ page: 1 });\n  });\n}\n","import iziToast from 'izitoast';\nimport { loadExercisesList } from './exercises-list.js';\n\nexport function initExercisesSearch() {\n  const searchInput = document.querySelector('.filters__input');\n  const searchBtn = document.querySelector('.filters__search-btn');\n  const clearBtn = document.querySelector('.filters__clear-btn');\n\n  if (!searchInput || !searchBtn) return;\n\n  const runSearch = () => {\n    const query = searchInput.value.trim();\n\n    if (!query) {\n      iziToast.warning({\n        title: 'Attention',\n        message: 'Enter a search query',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    loadExercisesList({ page: 1, keyword: query });\n  };\n\n  searchBtn.addEventListener('click', runSearch);\n\n  searchInput.addEventListener('keydown', e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      runSearch();\n    }\n  });\n\n  if (clearBtn) {\n    clearBtn.addEventListener('click', () => {\n      searchInput.value = '';\n      searchInput.focus();\n\n      loadExercisesList({ page: 1, keyword: '' });\n    });\n  }\n}\n","import 'izitoast/dist/css/iziToast.min.css';\n\nimport './js/quote-of-the-day.js';\n\n// import './js/favorites-btn.js';\n// import './js/favorites-page.js';\n\nimport './js/categories.js';\n\nimport './js/mobile-menu.js';\nimport './js/filters.js';\nimport './js/footer.js';\nimport './js/scroll-up.js';\nimport { cancelLoader } from './js/loader.js';\nimport { registerModalType, initModalButtons } from './js/modal-template.js';\nimport { MODAL_TYPES } from './js/constants.js';\nimport {\n  getExerciseModalContent,\n  initExerciseModal,\n} from './js/modal-exercise-content.js';\nimport {\n  getRatingModalContent,\n  initRatingModal,\n} from './js/modal-rating-content.js';\nimport { initExercisesTabs } from './js/exercises-tabs.js';\nimport { loadExercisesList } from './js/exercises-list.js';\n// import { renderPagination } from './js/categories.js';\nimport { initExercisesSearch } from './js/exercises-search.js';\n\n// —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ—à—É–∫—É\n// ref.searchButton.addEventListener('click', onSearch);\n// ref.loadMoreButton.addEventListener('click', loadMore);\n\n// if (document.readyState === 'loading') {\ndocument.addEventListener('DOMContentLoaded', () => {\n  setTimeout(() => cancelLoader(), 200);\n  initModals();\n});\n// } else {\n//   cancelLoader();\n//   initModals();\n// }\n\nfunction initModals() {\n  registerModalType(MODAL_TYPES.RATING, getRatingModalContent, initRatingModal);\n  registerModalType(\n    MODAL_TYPES.EXERCISE,\n    getExerciseModalContent,\n    initExerciseModal\n  );\n\n  initModalButtons();\n}\n\ninitExercisesTabs();\n// initExercisesList();\n// renderPagination();\ninitExercisesSearch();\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadExercisesList();\n});\n"],"names":["CONFIG","COLORS","API_ENDPOINTS","REGEX","VALIDATION","TOAST","SEO","MODAL_TYPES","ERROR_MESSAGES","REFS","YourEnergyAPI","baseURL","axios","response","error","errorMessage","_b","_a","method","url","data","params","config","message","id","defaultOptions","showSuccess","iziToast","showError","fetchApi","quote","getQuoteData","storedQuote","quoteContent","author","date","savedDate","currentDate","addTextContent","fetchGetExercisesQuote","resp","newQuote","quoteData","err","content","injectSchema","schemaData","item","index","updateSchemaScript","injectSchemaExercises","ex","capitalize","schemaId","script","str","renderPaginationUniversal","container","currentPage","totalPages","onPageChange","mode","showArrows","classes","icons","scrollToTop","scrollTarget","pageClass","activeClass","arrowClass","createBtn","label","page","className","btn","i","pages","_","p","el","refs","isInitialized","modalTypes","registerModalType","type","getContentFn","initFn","initRefs","initModalButtons","button","modalType","getContent","init","openModal","closeModal","handleEscape","handleBackdropClick","handleCloseButtonClick","isConfirmModalOpen","confirmModal","event","FAVORITES_KEY","getFavorites","parsed","ids","saveFavorites","favoritesArray","isFavorite","addFavorite","exerciseObj","favorites","exerciseId","removeFavorite","updated","itemId","currentExercise","initFavoritesBtn","exercise","buttonElement","favoriteBtnElement","isInFavorites","updateButtonText","newBtn","currentId","textNodes","node","svg","text","api","getExerciseModalContent","modalTemplate","fragment","initExerciseModal","closeModalFn","modalBody","modal","loader","renderExerciseData","favoritesBtn","ratingBtn","titleEl","ratingValueEl","starsContainer","gifEl","targetEl","bodypartEl","equipmentEl","popularEl","caloriesEl","descriptionEl","rating","renderStars","capitalizeFirst","popularity","calories","caloriesContainer","time","fullStars","emptyStars","starsHTML","starPath","getPageLimit","currentTotalPages","loadExercisesList","keyword","listEl","limit","filter","getTypeAndFilterFromUI","buildExercisesParams","items","renderExercisesList","renderExercisesPagination","urlParams","typeFromUrl","activeTab","filterFromUrl","fallbackFilter","getDefaultFilterForType","markup","createExerciseCardMarkup","handleExerciseItemClick","name","burnedCalories","bodyPart","target","handleExcersiseModalOpen","tabsContainer","searchBox","subtitle","isDesktop","updateUIForFilter","subtitleValue","desktop","activateFiltersTab","filterKey","categories","exercises","tab","isActive","e","activeBtn","searchInput","clearBtn","toggleClear","handleCategoryCardClick","TYPE_MAP","PAGE_LIMIT","activeFilter","activePage","getCategories","clearCards","clearPagination","renderCards","renderPagination","card","safeImg","safeName","safeFilter","onCardBodyClick","pageNum","nameValue","menu","openMenuBtn","closeMenuBtn","toggleMenu","form","emailInput","messageEl","email","scrollUpButton","smoothScrollToTop","duration","start","startTime","scrollStep","currentTime","elapsed","progress","ease","ref","cancelLoader","confirmModalRefs","confirmCallback","cancelCallback","initConfirmRefs","handleCancel","_c","handleConfirm","_d","_e","_f","callback","closeConfirmModal","openConfirmModal","onConfirm","onCancel","checkFormFilledFn","getRatingModalContent","existingRatingModal","clonedModal","updateElementIds","initRatingModalButtons","element","elementsWithId","timestamp","oldId","clearRatingForm","ratingModal","ratingInput","ratingText","commentTextarea","stars","star","handleRatingModalClose","initRatingModal","cancelBtn","submitBtn","currentRating","isFormValid","updateSubmitButton","updateStars","input","backdrop","handleEscapeCapture","cleanup","backdropClickHandler","closeBtn","closeBtnHandler","handleClose","formData","comment","initExercisesTabs","initExercisesSearch","searchBtn","runSearch","query","initModals"],"mappings":"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"}