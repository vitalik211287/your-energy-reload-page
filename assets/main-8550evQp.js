import{a as qe,i as Ie}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Ne={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},f={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},h={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},we={EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},b={EMAIL_REGEX:we.EMAIL,RATING_MIN:1,RATING_MAX:5},y={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},R={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},ke={RATING:"rating",EXERCISE:"exercise"},p={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Valid email is required",RATING_RANGE:`Rating must be between ${b.RATING_MIN} and ${b.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"};class Y{constructor(t=Ne.BASE_API_URL){this.baseURL=t,this.axios=qe.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(n=>n,n=>{var o,s;const r=((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.message)||n.message||p.API_ERROR;return console.error("API Error:",r),Promise.reject(n)})}async _request(t,n,r=null,o=null){var s,a;try{const m={method:t,url:n};return r&&(m.data=r),o&&(m.params=o),(await this.axios(m)).data}catch(m){const d=((a=(s=m.response)==null?void 0:s.data)==null?void 0:a.message)||m.message;throw new Error(`${t.toUpperCase()} ${n} failed: ${d}`)}}async getFilters(t={}){return this._request("get",h.FILTERS,null,t)}async getExercises(t={}){return this._request("get",h.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(p.EXERCISE_ID_REQUIRED);return this._request("get",`${h.EXERCISES}/${t}`)}async getQuote(){return this._request("get",h.QUOTE)}async subscribe(t){if(!t.email||!b.EMAIL_REGEX.test(t.email))throw new Error(p.EMAIL_REQUIRED);return this._request("post",h.SUBSCRIPTION,t)}async rateExercise(t,n){if(!t)throw new Error(p.EXERCISE_ID_REQUIRED);if(!n.rate||n.rate<b.RATING_MIN||n.rate>b.RATING_MAX)throw new Error(p.RATING_RANGE);if(!n.email||!b.EMAIL_REGEX.test(n.email))throw new Error(p.EMAIL_REQUIRED);return this._request("patch",`${h.EXERCISES}/${t}/rating`,n)}}const Le={position:y.POSITION.TOP_RIGHT,timeout:y.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:f.GRAY_LIGHT,transitionIn:y.TRANSITION.IN,transitionOut:y.TRANSITION.OUT,fontFamily:"inherit",icon:""},Be=e=>{Ie.show({...Le,title:y.TITLE.SUCCESS,message:e,backgroundColor:f.BLACK,titleColor:f.WHITE,messageColor:f.WHITE,icon:y.ICON.SUCCESS,iconColor:f.WHITE})},C=e=>{Ie.show({...Le,title:y.TITLE.ERROR,message:e,backgroundColor:f.BLACK,titleColor:f.WHITE,messageColor:f.GRAY_LIGHT,progressBarColor:f.WHITE,icon:y.ICON.ERROR,iconColor:f.WHITE})},xe=new Y,w={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function Pe(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:n,date:r}=JSON.parse(e),o=new Date(r),s=new Date;if(o.getDate()===s.getDate()){_e(t,n);return}}De()}Pe();async function De(){try{const e=await xe.getQuote(),{quote:t,author:n}=e,r={quote:t,author:n,date:new Date};localStorage.setItem("quoteData",JSON.stringify(r)),_e(t,n)}catch(e){C(e.message||p.API_ERROR)}}function _e(e,t){w.content&&(w.content.textContent=e),w.author&&(w.author.textContent=t)}const ve="favorites";function z(){const e=localStorage.getItem(ve);return e?JSON.parse(e):[]}function He(e){localStorage.setItem(ve,JSON.stringify(e))}function Ge(e){const n=z().filter(r=>r.id!==e);He(n)}const X={quoteContainer:document.querySelector(".favorites-wrapper .quote"),listContainer:document.querySelector(".favorites-list")},le=z();le.length===0?X.listContainer.innerHTML=`
    <div class="favorites-empty">
      <p>It appears that you havenâ€™t added any exercises to your favorites yet.</p>
      <p>To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
    </div>`:he(le);function he(e){X.listContainer.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.classList.add("favorite-card"),n.setAttribute("data-id",t.id),n.innerHTML=`
      <img src="${t.gifUrl}" alt="${t.name}" class="favorite-img">
      <h3 class="favorite-title">${t.name}</h3>
      <p class="favorite-info"><b>Target:</b> ${t.target}</p>
      <p class="favorite-info"><b>Body part:</b> ${t.bodyPart}</p>
      <p class="favorite-info"><b>Equipment:</b> ${t.equipment}</p>

      <button class="delete-btn" data-id="${t.id}">ðŸ—‘</button>
    `,X.listContainer.appendChild(n),n.querySelector(".delete-btn").addEventListener("click",()=>{Ge(t.id);const o=z();he(o)})})}function de(e){const t={"@context":R.SCHEMA_CONTEXT,"@type":R.SCHEMA_TYPES.ITEM_LIST,itemListElement:e==null?void 0:e.results.map((r,o)=>({"@type":R.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":R.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};let n=document.querySelector('script[data-schema="exercises"]');n||(n=document.createElement("script"),n.type=R.JSON_LD_TYPE,n.setAttribute("data-schema","exercises"),document.head.appendChild(n)),n&&(n.textContent=JSON.stringify(t))}const $e=new Y,J=window.innerWidth<768?9:12;let P="Muscles",O=1;async function Te(e=P,t=1,n=J){P=e,O=t;try{const r={filter:e,page:t,limit:n},o=await $e.getFilters(r);if(!o)return C("Data is empty");Ue(o.results||[]),Fe(O,o.totalPages||1),typeof de=="function"&&de(o)}catch(r){console.error("getCategories error:",r),C((r==null?void 0:r.message)||"Something went wrong")}}function Ue(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(n=>{const r=document.createElement("div");r.className="card",r.innerHTML=`
      <img src="${n.imgURL}" alt="${n.name}" />
      <div class="card-body">
        <h3>${n.name}</h3>
        <span class="card-filter">${n.filter}</span>
      </div>
    `,t.appendChild(r)}))}function Fe(e,t){const n=document.getElementById("pagination");if(n){n.innerHTML="";for(let r=1;r<=t;r++){const o=r,s=document.createElement("button");s.textContent=o,s.className="pagination-page",s.setAttribute("data-page",o),o===e&&s.classList.add("active"),s.addEventListener("click",()=>{o!==O&&(O=o,Te(P,o,J),window.scrollTo({top:0,behavior:"smooth"}))}),n.appendChild(s)}}}Te(P,O,J);(()=>{const e={openMenuBtn:document.querySelector("[data-menu-open]"),closeMenuBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]")};if(!e.openMenuBtn||!e.menu||!e.closeMenuBtn)return;const t=()=>{e.menu.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};e.openMenuBtn.addEventListener("click",t),e.closeMenuBtn.addEventListener("click",t),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.menu.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const k=document.querySelector("[data-filters-tabs]"),T=document.querySelector(".filters__search"),U=document.querySelector(".filters__subtitle"),Xe=()=>window.matchMedia("(min-width: 1440px)").matches;if(k&&T&&U){const e=n=>{const r=Xe();n==="bodypart"?(U.textContent=" / Waist",r?(T.classList.add("filters__search--visible"),T.classList.remove("filters__search--visible-mobile")):(T.classList.add("filters__search--visible-mobile"),T.classList.remove("filters__search--visible"))):(U.textContent="",T.classList.remove("filters__search--visible","filters__search--visible-mobile"))};k.addEventListener("click",n=>{const r=n.target.closest(".filters__tab");r&&(k.querySelectorAll(".filters__tab").forEach(o=>{const s=o===r;o.classList.toggle("filters__tab--active",s),o.setAttribute("aria-selected",s?"true":"false")}),e(r.dataset.filter))});const t=k.querySelector(".filters__tab--active");t&&e(t.dataset.filter)}const A=document.querySelector(".filters__input"),B=document.querySelector(".filters__clear-btn");if(A&&B){const e=()=>{A.value.trim()?B.classList.add("filters__clear-btn--visible"):B.classList.remove("filters__clear-btn--visible")};A.addEventListener("input",e),B.addEventListener("click",()=>{A.value="",A.focus(),e()}),e()}const j=document.querySelector(".footer__form"),ue=j.querySelector(".footer__input"),u=j.querySelector(".footer__message"),Qe=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/;j.addEventListener("submit",async e=>{e.preventDefault();const t=ue.value.trim();if(!Qe.test(t)){u.textContent="Please enter a valid email.",u.classList.remove("footer__message--success"),u.classList.add("footer__message--error");return}try{const n=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(n.ok)u.textContent="Subscription successful!",u.classList.remove("footer__message--error"),u.classList.add("footer__message--success"),ue.value="";else{const r=await n.json();u.textContent=r.message||"Subscription failed.",u.classList.remove("footer__message--success"),u.classList.add("footer__message--error")}}catch{u.textContent="Network error. Try again later.",u.classList.remove("footer__message--success"),u.classList.add("footer__message--error")}});const x={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function me(){x.loaderOverlay&&x.loaderOverlay.classList.add("hidden"),x.loaderBg&&x.loaderBg.classList.remove("bg-loader")}let c=null,fe=!1;const Q={};function We(e,t,n){Q[e]={getContent:t,init:n}}function D(){fe||(c={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},fe=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{D()}):D();function Ye(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const n=t.getAttribute("data-modal");if(!Q[n]){console.warn(`Modal type "${n}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:r,init:o}=Q[n],s=r();if(!s){console.error(`Failed to get content for modal type "${n}"`);return}ze(s),o&&setTimeout(async()=>{try{await o(G)}catch(a){console.error("Error initializing modal:",a)}},100)}),t.setAttribute("data-modal-initialized","true")})}function ze(e){var t,n;if(D(),!c||!c.modal||!c.body){console.error("Modal template elements not found");return}if(typeof e=="string")c.body.innerHTML=e;else if(e instanceof HTMLElement)c.body.innerHTML="",c.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}c.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",be,{once:!1}),(t=c.backdrop)==null||t.addEventListener("click",Ce),(n=c.closeBtn)==null||n.addEventListener("click",Re)}function G(){var e,t;D(),!(!c||!c.modal)&&(c.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",be),(e=c.backdrop)==null||e.removeEventListener("click",Ce),(t=c.closeBtn)==null||t.removeEventListener("click",Re),c&&c.body&&(c.body.innerHTML=""))}function K(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function be(e){if(e.key==="Escape"){if(K())return;G()}}function Ce(e){if(e.target===c.backdrop){if(K())return;G()}}function Re(){K()||G()}let l=null,V=null,Z=null;function W(){var t,n,r,o,s,a;if(l)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}l={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=l.backdrop)==null||t.removeEventListener("click",Ee,{capture:!0}),(n=l.cancelBtn)==null||n.removeEventListener("click",H,{capture:!0}),(r=l.confirmBtn)==null||r.removeEventListener("click",ge,{capture:!0}),(o=l.backdrop)==null||o.addEventListener("click",Ee,{capture:!0}),(s=l.cancelBtn)==null||s.addEventListener("click",H,{capture:!0}),(a=l.confirmBtn)==null||a.addEventListener("click",ge,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",W):W();function Je(e){e.key==="Escape"&&l&&!l.modal.classList.contains("hidden")&&H()}function Ee(e){e.target===l.backdrop&&(e.stopPropagation(),e.preventDefault(),H(e))}function H(e){e&&(e.stopPropagation(),e.preventDefault());const t=Z;Ae(),t&&t()}function ge(e){e&&(e.stopPropagation(),e.preventDefault());const t=V;Ae(),setTimeout(()=>{t&&t()},0)}function je(e,t,n=null){if(W(),!l||!l.modal){console.error("Confirm modal elements not found");return}V=t,Z=n,l.message&&(l.message.textContent=e),l.modal.classList.remove("hidden"),document.addEventListener("keydown",Je,{once:!0})}function Ae(){!l||!l.modal||(l.modal.classList.add("hidden"),V=null,Z=null)}const Ke=new Y;let _=null;function Ve(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return Ze(t),t}function pe(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const n=t.getAttribute("data-exercise-id");n&&sessionStorage.setItem("ratingModalExerciseId",n)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",pe):pe();function Ze(e){const t=e.querySelectorAll("[id]"),n=Date.now();t.forEach(r=>{const o=r.id;r.id=`${o}-${n}`,e.querySelectorAll(`label[for="${o}"]`).forEach(a=>{a.setAttribute("for",r.id)})})}function ye(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const n=t.querySelector(".rating-modal__form"),r=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),s=t.querySelector('input[name="email"]'),a=t.querySelector('textarea[name="comment"]'),m=t.querySelectorAll(".rating-star");n&&n.reset(),r&&(r.value="0"),s&&(s.value=""),a&&(a.value=""),o&&(o.textContent=""),m.forEach(d=>{d.classList.remove("active")})}function F(e){_&&_()?je("Are you sure you want to cancel your exercise review?",()=>{ye(),_=null,e()},()=>{}):(ye(),_=null,e())}function et(e){var ae;_=null;const t=document.querySelector("[data-modal-body]"),n=t==null?void 0:t.querySelector(".rating-modal");if(!t||!n){console.error("Modal body or rating modal not found");return}let r=sessionStorage.getItem("ratingModalExerciseId")||((ae=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:ae.getAttribute("data-exercise-id"));if(r&&sessionStorage.removeItem("ratingModalExerciseId"),!r){C("Exercise ID is missing");return}const o=n.querySelectorAll(".rating-star"),s=n.querySelector('input[name="rating"]'),a=n.querySelector(".rating-modal__rating-text"),m=n.querySelector(".rating-modal__btn--cancel"),d=n.querySelector('.rating-modal__btn[type="submit"]'),S=n.querySelector('input[name="email"]'),I=n.querySelector('textarea[name="comment"]'),M=n.querySelector(".rating-modal__form");let q=0;d&&(d.disabled=!0),s&&(s.value="0"),a&&(a.textContent="0");const ee=()=>q>0&&q<=5&&(S==null?void 0:S.value.trim())!==""&&(I==null?void 0:I.value.trim())!=="",te=()=>{d&&(d.disabled=!ee())};_=()=>q>0||(S==null?void 0:S.value.trim())!==""||(I==null?void 0:I.value.trim())!=="";const Oe=i=>{o.forEach((E,g)=>{g+1<=i?E.classList.add("active"):E.classList.remove("active")})};o.forEach((i,E)=>{const g=E+1;i.addEventListener("click",()=>{q=g,Oe(g),s&&(s.value=g),a&&(a.textContent=g),te()})}),[S,I].forEach(i=>{i&&i.addEventListener("input",te)});const L=document.querySelector("[data-modal-close]"),$=()=>{const i=document.getElementById("modal-confirm");return i&&!i.classList.contains("hidden")},ne=i=>{if(i.key==="Escape"){if($())return;i.stopPropagation(),F(()=>{N(),e()})}},oe=i=>{if(i.target===L){if($())return;i.stopPropagation(),F(()=>{N(),e()})}},N=()=>{document.removeEventListener("keydown",ne,{capture:!0}),L==null||L.removeEventListener("click",oe,{capture:!0}),v==null||v.removeEventListener("click",re,{capture:!0})},v=document.querySelector(".modal-template__close-btn"),re=i=>{$()||(i.stopPropagation(),se())};document.addEventListener("keydown",ne,{capture:!0}),L==null||L.addEventListener("click",oe,{capture:!0}),v==null||v.addEventListener("click",re,{capture:!0});const se=()=>{F(()=>{N(),e()})};m&&e&&m.addEventListener("click",()=>{se()}),M&&(M.setAttribute("data-no-auto-close","true"),M.addEventListener("submit",async i=>{if(i.preventDefault(),!ee()){C("Please fill in all fields");return}const E=new FormData(M),g=parseInt(E.get("rating"),10),ie=E.get("email").trim(),Me=E.get("comment").trim();d&&(d.disabled=!0,d.textContent="Sending...");try{await Ke.rateExercise(r,{rate:g,email:ie,review:Me}),Be("Thank you for your feedback!"),_=null,setTimeout(()=>{e&&(N(),e())},1e3)}catch(ce){console.error("Failed to submit rating:",ce),C(ce.message||p.API_ERROR),d&&(d.disabled=!1,d.textContent="Send")}}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{me(),Se()}):(me(),Se());function Se(){We(ke.RATING,Ve,et),Ye()}
//# sourceMappingURL=main-8550evQp.js.map
