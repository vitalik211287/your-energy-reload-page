import{l as p,Y as k,s as A,a as f,i as L,c as C,r as x,b as _,V as F,d as P,e as N,f as S,g as R,h as j,j as U,M as q,k as Y,m as D}from"./assets/modal-rating-content-PoVvHGUZ.js";import{i as $}from"./assets/vendor-3BNOZKAJ.js";function O(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),s=document.querySelector(".filters__clear-btn");if(!e||!t)return;e.value="";const n=()=>{const i=e.value.trim();if(!i){$.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}p({page:1,keyword:i})};t.addEventListener("click",n),e.addEventListener("keydown",i=>{i.key==="Enter"&&(i.preventDefault(),n())}),s&&s.addEventListener("click",()=>{e.value="",e.focus(),p({page:1,keyword:""})})}function I(){const e=document.querySelector(".filters__input");e&&(e.value="")}function z(e){return function(t){t.preventDefault(),I();const n={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"}[e.filter]||"body-parts";p({page:1,type:n,filter:e.name.toLowerCase(),keyword:""})}}const G=new k,b=window.innerWidth<768?9:12;let c=window.activeFilter||"Muscles",m=1;async function l(e=c,t=1,s=b){c=e,window.activeFilter=c,m=t;try{const n={filter:e,page:t,limit:s};A();const i=await G.getFilters(n);if(!i){f("Failed to fetch categories: No response from server"),y(),v();return}if(i.error||i.status==="error"){f(i.message||"Failed to fetch categories"),y(),v();return}if(!i.results||i.results.length===0){f("Nothing found"),y(),v();return}const o=i.results||[],r=i.totalPages||1;H(o),W(m,r),typeof L=="function"&&L(i)}catch(n){console.error("getCategories error:",n),f((n==null?void 0:n.message)||"Something went wrong"),y(),v()}finally{C()}}function H(e){let t="cards-container";switch(window.activeFilter){case"Muscles":t="cards-container";break;case"Equipment":t="cards-container-equipment";break;case"Body parts":t="cards-container";break;default:t="cards-container"}const s=document.getElementById(t);s&&(s.innerHTML="",e.forEach(n=>{const i=document.createElement("div");i.className="card";const o=n.imgURL&&n.imgURL.trim()!==""?n.imgURL:"/img/no-image.jpg",r=n.name||"",a=n.filter||"";i.innerHTML=`
      <img src="${o}" alt="${r}" loading="lazy" />
      <div class="card-body">
        <h3>${r}</h3>
        <span>${a}</span>
      </div>
    `,i.addEventListener("click",()=>z(n)),s.appendChild(i),i.querySelector(".card-body").addEventListener("click",()=>{X(r)})}))}function W(e,t){const s=document.getElementById("pagination"),n=document.getElementById("pagination_1");!s&&!n||(s&&x({container:s,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>3,classes:{page:"pagination-page",active:"active",prev:"pagination-page-prev",next:"pagination-page-next"},icons:{prev:"<",next:">"},scrollToTop:!1,onPageChange(i){return m=i,_(),l(c,i,b)}}),n&&x({container:n,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>3,classes:{page:"pagination-page",active:"active",prev:"pagination-page-p",next:"pagination-page-n"},icons:{prev:"<",next:">"},scrollToTop:!1,onPageChange(i){return m=i,_(),l(c,i,b)}}))}function y(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function v(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function X(e){const t=document.querySelector(".filters__search"),s=document.getElementById("cards-box"),n=document.getElementById("exercises"),i=document.getElementById("equipment-box"),r=document.querySelector("[data-filters-tabs]").querySelector(".filters__tab--active"),a=r?r.dataset.filter:null;s&&s.classList.add("hidden"),n&&n.classList.remove("hidden"),i&&i.classList.add("hidden"),t&&t.classList.add("filters__search--visible");const g=document.querySelector(".filters__subtitle");g?g.textContent=e.charAt(0).toUpperCase()+e.slice(1):g.textContent="",I(),_(),p({page:1,filter:e,type:a,keyword:""})}l(c,m,b);const d=document.querySelector("[data-filters-tabs]"),E=document.querySelector(".filters__search"),w=document.querySelector(".filters__subtitle");function M(e,t=""){if(!E||!w)return;const s=t?t.charAt(0).toUpperCase()+t.slice(1):"";e==="bodypart"&&(w.textContent=` / ${s}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]))}function J(e,t=""){if(!d)return;E&&E.classList.remove("filters__search--visible");const s=d.querySelector(`[data-filter="${e}"]`);if(!s)return;const n=document.getElementById("cards-box"),i=document.getElementById("exercises"),o=document.getElementById("equipment-box");n&&n.classList.add("hidden"),i&&i.classList.add("hidden"),o&&o.classList.add("hidden"),e==="muscles"?(window.activeFilter="Muscles",l("Muscles"),n&&n.classList.remove("hidden")):e==="equipment"?(window.activeFilter="Equipment",l("Equipment"),o&&o.classList.remove("hidden")):e==="bodypart"&&(window.activeFilter="Body parts",l("Body parts"),n&&n.classList.remove("hidden")),d.querySelectorAll(".filters__tab").forEach(r=>{const a=r===s;r.classList.toggle("filters__tab--active",a),r.setAttribute("aria-selected",a?"true":"false")}),M(e,t)}if(d&&E&&w){d.addEventListener("click",t=>{const s=t.target.closest(".filters__tab");s&&J(s.dataset.filter)});const e=d.querySelector(".filters__tab--active");e&&M(e.dataset.filter)}const u=document.querySelector(".filters__input"),h=document.querySelector(".filters__clear-btn");if(u&&h){const e=()=>{u.value.trim()?h.classList.add("filters__clear-btn--visible"):h.classList.remove("filters__clear-btn--visible")};u.addEventListener("input",e),h.addEventListener("click",()=>{u.value="",u.focus(),e()}),e()}const T=document.querySelector(".footer__form"),B=T.querySelector(".footer__input");T.addEventListener("submit",async e=>{e.preventDefault();const t=B.value.trim();if(!(!t||!F.EMAIL_REGEX.test(t)))try{const s=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(s.ok)P("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),B.value="";else{const n=await s.json();N("Subscription already exists")}}catch{f("Server error")}});function Q(){document.querySelector(".js-exercises-tabs")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>C(),300),V()});window.activeFilter="Muscles";function Z(){window.activeFilter="Muscles"}Z();function V(){S(q.RATING,U,j),S(q.EXERCISE,D,Y),R()}p();Q();O();
//# sourceMappingURL=index.js.map
