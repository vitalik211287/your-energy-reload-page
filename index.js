import{l as E,s as D,Y as R,a as U,b as u,i as F,c as P,r as Y,V as $,d as j,E as L,e as T,f as G,g as z,h as H,M as B,j as V,k as W}from"./assets/modal-rating-content-B83OKtR0.js";import{i as X}from"./assets/vendor-3BNOZKAJ.js";function Q(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),n=document.querySelector(".filters__clear-btn");if(!e||!t)return;e.value="";const s=()=>{const r=e.value.trim();if(!r){X.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}E({page:1,keyword:r})};t.addEventListener("click",s),e.addEventListener("keydown",r=>{r.key==="Enter"&&(r.preventDefault(),s())}),n&&n.addEventListener("click",()=>{e.value="",e.focus(),E({page:1,keyword:""})})}function J(){const e=document.querySelector(".filters__input");e&&(e.value="")}let w=!1,I="",q="";function b(e){w=!!e,sessionStorage.setItem("openExercises",w?"true":"false")}function Z(){const e=sessionStorage.getItem("openExercises");return e!==null?e==="true":w}function K(e,t){I=e||"",q=t||"",sessionStorage.setItem("exercisesFilterName",I),sessionStorage.setItem("exercisesFilterType",q)}function ee(){const e=sessionStorage.getItem("exercisesFilterName")??I,t=sessionStorage.getItem("exercisesFilterType")??q;return{name:e,type:t}}function te(e){return function(t){t.preventDefault();const n=document.getElementById("cards-box"),s=document.getElementById("exercises"),r=document.querySelector(".filters__search"),i=document.querySelector(".filters__subtitle");n&&n.classList.add("hidden"),s&&s.classList.remove("hidden");const o=document.getElementById("equipment-box");o&&o.classList.add("hidden"),b(!0);const l={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"}[e.filter]||"body-parts",a=e.name.toLowerCase();K(a,l),i&&(i.textContent=a.charAt(0).toUpperCase()+a.slice(1)),r&&r.classList.add("filters__search--visible"),J(),D(),E({page:1,type:l,filter:a,keyword:""})}}const se=new R,N=window.innerWidth<768?9:12;let g="Muscles",C=1;const k="cards-container",O=".js-categories-pagination";function re(e){switch(e){case"Muscles":return"muscles";case"Equipment":return"equipment";case"Body parts":return"bodypart";default:return"muscles"}}async function p(e=g,t=1,n=N){g=e,window.activeFilter=g,C=t;try{const s={filter:e,page:t,limit:n};U();const r=await se.getFilters(s);if(!r){u("Failed to fetch categories: No response from server"),_(),h();return}if(r.error||r.status==="error"){u(r.message||"Failed to fetch categories"),_(),h();return}if(!r.results||r.results.length===0){u("Nothing found"),_(),h();return}const i=r.results||[],o=r.totalPages||1;ne(i),ie(C,o),typeof F=="function"&&F(r)}catch(s){console.error("getCategories error:",s),u((s==null?void 0:s.message)||"Something went wrong"),_(),h()}finally{P()}}function ne(e){const t=document.getElementById(k);t&&(t.innerHTML="",e.forEach(n=>{const s=document.createElement("div");s.className="card";const r=n.imgURL&&n.imgURL.trim()!==""?n.imgURL:"/img/no-image.jpg",i=n.name||"",o=n.filter||"";s.innerHTML=`
      <img src="${r}" alt="${i}" loading="lazy" />
      <div class="card-body">
        <h3>${i}</h3>
        <span>${o}</span>
      </div>
    `,s.addEventListener("click",te(n)),t.appendChild(s)}))}function ie(e,t){const n=document.querySelector(O);n&&Y({container:n,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>=3,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next",first:"exercises__page-first",last:"exercises__page-last",arrow:"exercises__page-arrow"},icons:{prev:"<",next:">",first:"<<",last:">>"},scrollToTop:!0,scrollTarget:".main-container",onPageChange(s){C=s;const r=re(g),i=new URL(location.href);return i.searchParams.set("tab",r),i.searchParams.set("page",String(s)),history.pushState({tab:r,page:s},"",i),p(g,s,N)}})}function _(){const e=document.getElementById(k);e&&(e.innerHTML="")}function h(){const e=document.querySelector(O);e&&(e.innerHTML="")}const d=document.querySelector("[data-filters-tabs]"),f=document.querySelector(".filters__search"),x=document.querySelector(".filters__subtitle");function oe(e,t=""){if(!f||!x)return;const n=t?t.charAt(0).toUpperCase()+t.slice(1):"";e==="bodypart"?(x.textContent=` / ${n}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[])):x.textContent=""}function ae(e){const t=new URL(location.href);t.searchParams.set("tab",e),history.pushState({tab:e},"",t)}function M(e,t=""){if(!d)return;sessionStorage.setItem("activeFilter",e),f&&f.classList.remove("filters__search--visible");const n=d.querySelector(`[data-filter="${e}"]`);if(!n)return;const s=document.getElementById("cards-box"),r=document.getElementById("exercises");s&&s.classList.remove("hidden"),r&&r.classList.add("hidden"),b(!1),e==="muscles"?(window.activeFilter="Muscles",p("Muscles")):e==="equipment"?(window.activeFilter="Equipment",p("Equipment")):e==="bodypart"&&(window.activeFilter="Body parts",p("Body parts")),d.querySelectorAll(".filters__tab").forEach(i=>{const o=i===n;i.classList.toggle("filters__tab--active",o),i.setAttribute("aria-selected",o?"true":"false")}),oe(e,t)}document.addEventListener("DOMContentLoaded",()=>{if(!d||!f||!x)return;d.addEventListener("click",i=>{const o=i.target.closest(".filters__tab");if(!o)return;const c=o.dataset.filter;ae(c),b(!1),M(c)});const t=new URL(location.href).searchParams.get("tab"),n=sessionStorage.getItem("activeFilter"),s=t||n||"muscles";if(Z()){const i=document.getElementById("cards-box"),o=document.getElementById("exercises");i&&i.classList.add("hidden"),o&&o.classList.remove("hidden"),f&&f.classList.add("filters__search--visible");const c=d.querySelector(`[data-filter="${s}"]`);c&&d.querySelectorAll(".filters__tab").forEach(y=>{const A=y===c;y.classList.toggle("filters__tab--active",A),y.setAttribute("aria-selected",A?"true":"false")});const{name:l,type:a}=ee();l&&E({page:1,filter:l,type:a||s,keyword:""})}else M(s)});const m=document.querySelector(".filters__input"),v=document.querySelector(".filters__clear-btn");if(m&&v){const e=()=>{m.value.trim()?v.classList.add("filters__clear-btn--visible"):v.classList.remove("filters__clear-btn--visible")};m.addEventListener("input",e),v.addEventListener("click",()=>{m.value="",m.focus(),e()}),e()}window.addEventListener("popstate",e=>{const t=e.state;if(!t||!t.tab)return;const n=t.tab,s=t.page||1;if(b(!1),M(n),s>1){let r="Muscles";n==="equipment"?r="Equipment":n==="bodypart"&&(r="Body parts"),p(r,s)}});const S=document.querySelector(".footer__form");if(!S)console.warn("Footer form not found on this page");else{const e=S.querySelector(".footer__input"),t=new R;S.addEventListener("submit",async n=>{var r,i,o,c,l;n.preventDefault();const s=e.value.trim();if(!s){u((r=L)==null?void 0:r.EMAIL_REQUIRED);return}if(!$.EMAIL_REGEX.test(s)){u(((i=L)==null?void 0:i.EMAIL_INVALID)||"Please enter a valid email address");return}try{await t.subscribe({email:s}),j("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),e.value=""}catch(a){(((c=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:c.message)||(a==null?void 0:a.message)||"").toLowerCase().includes("exists")?u("Subscription already exists"):u((l=L)==null?void 0:l.API_ERROR),console.error("Subscription error:",a)}})}function ce(){document.querySelector(".js-exercises-tabs")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>P(),300),ue()});window.activeFilter="Muscles";function le(){window.activeFilter="Muscles"}le();function ue(){T(B.RATING,H,z),T(B.EXERCISE,W,V),G()}E();ce();Q();
//# sourceMappingURL=index.js.map
