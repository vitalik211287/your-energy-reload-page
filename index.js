import{l as g,Y as F,s as k,a as c,i as L,c as B,r as A,b as P,V as j,d as R,e as x,f as U,g as N,h as Y,M as S,j as D,k as $}from"./assets/modal-rating-content-B3okQ2MX.js";import{i as O}from"./assets/vendor-3BNOZKAJ.js";function z(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),n=document.querySelector(".filters__clear-btn");if(!e||!t)return;e.value="";const s=()=>{const i=e.value.trim();if(!i){O.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}g({page:1,keyword:i})};t.addEventListener("click",s),e.addEventListener("keydown",i=>{i.key==="Enter"&&(i.preventDefault(),s())}),n&&n.addEventListener("click",()=>{e.value="",e.focus(),g({page:1,keyword:""})})}function M(){const e=document.querySelector(".filters__input");e&&(e.value="")}function G(e){return function(t){t.preventDefault(),M();const s={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"}[e.filter]||"body-parts";g({page:1,type:s,filter:e.name.toLowerCase(),keyword:""})}}const H=new F,w=window.innerWidth<768?9:12;let f=window.activeFilter||"Muscles",_=1;const q={Muscles:{cardsId:"cards-container",paginationSel:".js-categories-pagination"},Equipment:{cardsId:"cards-container-equipment",paginationSel:".js-equipment-pagination"},"Body parts":{cardsId:"cards-container",paginationSel:".js-categories-pagination"}};function b(){return q[window.activeFilter]||q.Muscles}async function p(e=f,t=1,n=w){f=e,window.activeFilter=f,_=t;try{const s={filter:e,page:t,limit:n};k();const i=await H.getFilters(s);if(!i){c("Failed to fetch categories: No response from server"),m(),y();return}if(i.error||i.status==="error"){c(i.message||"Failed to fetch categories"),m(),y();return}if(!i.results||i.results.length===0){c("Nothing found"),m(),y();return}const r=i.results||[],o=i.totalPages||1;W(r),X(_,o),typeof L=="function"&&L(i)}catch(s){console.error("getCategories error:",s),c((s==null?void 0:s.message)||"Something went wrong"),m(),y()}finally{B()}}function W(e){const t=b(),n=document.getElementById(t.cardsId);n&&(n.innerHTML="",e.forEach(s=>{const i=document.createElement("div");i.className="card";const r=s.imgURL&&s.imgURL.trim()!==""?s.imgURL:"/img/no-image.jpg",o=s.name||"",a=s.filter||"";i.innerHTML=`
      <img src="${r}" alt="${o}" loading="lazy" />
      <div class="card-body">
        <h3>${o}</h3>
        <span>${a}</span>
      </div>
    `,i.addEventListener("click",()=>G(s)),n.appendChild(i);const d=i.querySelector(".card-body");d&&d.addEventListener("click",()=>{J(o)})}))}function X(e,t){const n=b(),s=document.querySelector(n.paginationSel);s&&A({container:s,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>=3,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next",first:"exercises__page-first",last:"exercises__page-last",arrow:"exercises__page-arrow"},icons:{prev:"<",next:">",first:"<<",last:">>"},scrollToTop:!0,scrollTarget:".main-container",onPageChange(i){return _=i,p(f,i,w)}})}function m(){const e=b(),t=document.getElementById(e.cardsId);t&&(t.innerHTML="")}function y(){const e=b(),t=document.querySelector(e.paginationSel);t&&(t.innerHTML="")}function J(e){const t=document.querySelector(".filters__search"),n=document.getElementById("cards-box"),s=document.getElementById("exercises"),i=document.getElementById("equipment-box"),r=document.querySelector("[data-filters-tabs]"),o=r==null?void 0:r.querySelector(".filters__tab--active"),a=o?o.dataset.filter:null;n&&n.classList.add("hidden"),s&&s.classList.remove("hidden"),i&&i.classList.add("hidden"),t&&t.classList.add("filters__search--visible");const d=document.querySelector(".filters__subtitle");d&&(d.textContent=e.charAt(0).toUpperCase()+e.slice(1)),M(),P(),g({page:1,filter:e,type:a,keyword:""})}p(f,_,w);const l=document.querySelector("[data-filters-tabs]"),h=document.querySelector(".filters__search"),E=document.querySelector(".filters__subtitle");function T(e,t=""){if(!h||!E)return;const n=t?t.charAt(0).toUpperCase()+t.slice(1):"";e==="bodypart"&&(E.textContent=` / ${n}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]))}function Q(e,t=""){if(!l)return;h&&h.classList.remove("filters__search--visible");const n=l.querySelector(`[data-filter="${e}"]`);if(!n)return;const s=document.getElementById("cards-box"),i=document.getElementById("exercises"),r=document.getElementById("equipment-box");s&&s.classList.add("hidden"),i&&i.classList.add("hidden"),r&&r.classList.add("hidden"),e==="muscles"?(window.activeFilter="Muscles",p("Muscles"),s&&s.classList.remove("hidden")):e==="equipment"?(window.activeFilter="Equipment",p("Equipment"),r&&r.classList.remove("hidden")):e==="bodypart"&&(window.activeFilter="Body parts",p("Body parts"),s&&s.classList.remove("hidden")),l.querySelectorAll(".filters__tab").forEach(o=>{const a=o===n;o.classList.toggle("filters__tab--active",a),o.setAttribute("aria-selected",a?"true":"false")}),T(e,t)}if(l&&h&&E){l.addEventListener("click",t=>{const n=t.target.closest(".filters__tab");n&&Q(n.dataset.filter)});const e=l.querySelector(".filters__tab--active");e&&T(e.dataset.filter)}const u=document.querySelector(".filters__input"),v=document.querySelector(".filters__clear-btn");if(u&&v){const e=()=>{u.value.trim()?v.classList.add("filters__clear-btn--visible"):v.classList.remove("filters__clear-btn--visible")};u.addEventListener("input",e),v.addEventListener("click",()=>{u.value="",u.focus(),e()}),e()}const C=document.querySelector(".footer__form"),I=C.querySelector(".footer__input");C.addEventListener("submit",async e=>{e.preventDefault();const t=I.value.trim();if(!(!t||!j.EMAIL_REGEX.test(t)))try{const n=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(n.ok)R("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),I.value="";else{const s=await n.json();c("Subscription already exists")}}catch{c("Server error")}});function Z(){document.querySelector(".js-exercises-tabs")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>B(),300),K()});window.activeFilter="Muscles";function V(){window.activeFilter="Muscles"}V();function K(){x(S.RATING,Y,N),x(S.EXERCISE,$,D),U()}g();Z();z();
//# sourceMappingURL=index.js.map
