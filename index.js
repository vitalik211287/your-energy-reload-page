import{S as u,l as d,Y as q,s as P,a as f,c as x,V as A,b as k,d as R,r as S,i as N,e as Y,g as D,M as b,f as H,h as O}from"./assets/modal-rating-content-Cq3Y8AFn.js";import{i as F}from"./assets/vendor-3BNOZKAJ.js";function w(e){if(!e||!e.results)return;const s={"@context":u.SCHEMA_CONTEXT,"@type":u.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((t,r)=>({"@type":u.SCHEMA_TYPES.LIST_ITEM,position:r+1,item:{"@type":u.SCHEMA_TYPES.EXERCISE_PLAN,name:t.name,filter:t.filter,image:t.imgURL}}))};U("filters",s)}function U(e,s){let t=document.querySelector(`script[data-schema="${e}"]`);t||(t=document.createElement("script"),t.type=u.JSON_LD_TYPE,t.setAttribute("data-schema",e),document.head.appendChild(t)),t.textContent=JSON.stringify(s)}const c=document.querySelector("[data-filters-tabs]"),m=document.querySelector(".filters__search"),E=document.querySelector(".filters__subtitle"),$=()=>window.matchMedia("(min-width: 1440px)").matches;function I(e,s=""){if(!m||!E)return;const t=$();e==="bodypart"?(E.textContent=` / ${s||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),m.classList.add("filters__search--visible")):(E.textContent="",m.classList.remove("filters__search--visible"))}function T(e,s=""){if(!c)return;const t=c.querySelector(`[data-filter="${e}"]`);if(!t)return;const r=document.getElementById("cards-box"),n=document.getElementById("exercises"),o=document.getElementById("equipment-box");r&&r.classList.add("hidden"),n&&n.classList.add("hidden"),o&&o.classList.add("hidden");const i=new URL(window.location.href);e==="muscles"?(r&&r.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="equipment"?(o&&o.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="bodypart"&&(n&&n.classList.remove("hidden"),i.searchParams.set("type","body-parts"),s?i.searchParams.set("filter",s.toLowerCase()):(i.searchParams.delete("filter"),d({page:1}))),window.history.pushState({},"",i),c.querySelectorAll(".filters__tab").forEach(a=>{const v=a===t;a.classList.toggle("filters__tab--active",v),a.setAttribute("aria-selected",v?"true":"false")}),I(e,s)}if(c&&m&&E){c.addEventListener("click",s=>{const t=s.target.closest(".filters__tab");t&&T(t.dataset.filter)});const e=c.querySelector(".filters__tab--active");e&&I(e.dataset.filter)}const l=document.querySelector(".filters__input"),g=document.querySelector(".filters__clear-btn");if(l&&g){const e=()=>{l.value.trim()?g.classList.add("filters__clear-btn--visible"):g.classList.remove("filters__clear-btn--visible")};l.addEventListener("input",e),g.addEventListener("click",()=>{l.value="",l.focus(),e()}),e()}function j(e){return function(s){s.preventDefault();const t={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},r=t[e.filter]||t["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),T("bodypart",e.name),d({page:1,filter:e.name.toLowerCase(),type:r});const i=new URL(window.location.href);i.searchParams.set("type",r),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const X=new q,_=window.innerWidth<768?9:12;let L="Muscles",p=1;async function B(e=L,s=1,t=_){L=e,p=s;try{const r={filter:e,page:s,limit:t};P();const n=await X.getFilters(r);if(!n){f("Failed to fetch categories: No response from server"),y(),h();return}if(n.error||n.status==="error"){f(n.message||"Failed to fetch categories"),y(),h();return}if(!n.results||n.results.length===0){f("Nothing found"),y(),h();return}const o=n.results||[],i=n.totalPages||1;G(o),J(p,i),typeof w=="function"&&w(n)}catch(r){console.error("getCategories error:",r),f((r==null?void 0:r.message)||"Something went wrong"),y(),h()}finally{x()}}function G(e){const s=document.getElementById("cards-container");s&&(s.innerHTML="",e.forEach(t=>{const r=document.createElement("div");r.className="card";const n=t.imgURL&&t.imgURL.trim()!==""?t.imgURL:"/img/no-image.jpg",o=t.name||"",i=t.filter||"";r.innerHTML=`
      <img src="${n}" alt="${o}" loading="lazy" />
      <div class="card-body">
        <h3>${o}</h3>
        <span>${i}</span>
      </div>
    `,r.addEventListener("click",j(t)),s.appendChild(r),r.querySelector(".card-body").addEventListener("click",()=>{W(o)})}))}function J(e,s){const t=document.getElementById("pagination");if(t){t.innerHTML="";for(let r=1;r<=s;r++){const n=r,o=document.createElement("button");o.textContent=n,o.className="pagination-page",o.setAttribute("data-page",n),n===e&&o.classList.add("active");const i=document.getElementById("cards-box");o.addEventListener("click",()=>{if(n!==p)if(p=n,B(L,n,_),i){const a=i.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:a-200,behavior:"smooth"})}else window.scrollTo({top:0,behavior:"smooth"})}),t.appendChild(o)}}}function y(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function h(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function W(e){console.log("Clicked name:",e)}B(L,p,_);const M=document.querySelector(".footer__form"),C=M.querySelector(".footer__input");M.addEventListener("submit",async e=>{e.preventDefault();const s=C.value.trim();if(!(!s||!A.EMAIL_REGEX.test(s)))try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(t.ok)k("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),C.value="";else{const r=await t.json();R("Subscription already exists")}}catch{f("Server error")}});function z(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var s,t;(s=document.getElementById("categories-section"))==null||s.classList.add("hidden"),(t=document.getElementById("exercises-section"))==null||t.classList.remove("hidden"),d({page:1})}))}function Q(){const e=document.querySelector(".filters__input"),s=document.querySelector(".filters__search-btn"),t=document.querySelector(".filters__clear-btn");if(!e||!s)return;const r=()=>{const n=e.value.trim();if(console.log(n),!n){F.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}d({page:1,keyword:n})};s.addEventListener("click",r),e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),r())}),t&&t.addEventListener("click",()=>{e.value="",e.focus(),d({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>x(),300),V()});function V(){S(b.RATING,D,Y),S(b.EXERCISE,O,H),N()}d();z();Q();
//# sourceMappingURL=index.js.map
