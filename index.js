import{l as g,s as D,Y as R,a as U,b as d,i as T,c as P,r as Y,V as $,d as j,E as L,e as F,f as G,g as z,h as H,M as B,j as V,k as W}from"./assets/modal-rating-content-B83OKtR0.js";import{i as X}from"./assets/vendor-3BNOZKAJ.js";function Q(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),r=document.querySelector(".filters__clear-btn");if(!e||!t)return;e.value="";const s=()=>{const n=e.value.trim();if(!n){X.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}g({page:1,keyword:n})};t.addEventListener("click",s),e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),s())}),r&&r.addEventListener("click",()=>{e.value="",e.focus(),g({page:1,keyword:""})})}function J(){const e=document.querySelector(".filters__input");e&&(e.value="")}let w=!1,I="",C="";function b(e){w=!!e,sessionStorage.setItem("openExercises",w?"true":"false")}function Z(){const e=sessionStorage.getItem("openExercises");return e!==null?e==="true":w}function K(e,t){I=e||"",C=t||"",sessionStorage.setItem("exercisesFilterName",I),sessionStorage.setItem("exercisesFilterType",C)}function ee(){const e=sessionStorage.getItem("exercisesFilterName")??I,t=sessionStorage.getItem("exercisesFilterType")??C;return{name:e,type:t}}function te(e){return function(t){t.preventDefault();const r=document.getElementById("cards-box"),s=document.getElementById("exercises"),n=document.querySelector(".filters__search"),i=document.querySelector(".filters__subtitle");r&&r.classList.add("hidden"),s&&s.classList.remove("hidden");const o=document.getElementById("equipment-box");o&&o.classList.add("hidden"),b(!0);const l={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"}[e.filter]||"body-parts",a=e.name.toLowerCase();K(a,l),i&&(i.textContent=a.charAt(0).toUpperCase()+a.slice(1)),n&&n.classList.add("filters__search--visible"),J(),D(),g({page:1,type:l,filter:a,keyword:""})}}const se=new R,N=window.innerWidth<768?9:12;let v="Muscles",q=1;const k="cards-container",O=".js-categories-pagination";async function x(e=v,t=1,r=N){v=e,window.activeFilter=v,q=t;try{const s={filter:e,page:t,limit:r};U();const n=await se.getFilters(s);if(!n){d("Failed to fetch categories: No response from server"),E(),_();return}if(n.error||n.status==="error"){d(n.message||"Failed to fetch categories"),E(),_();return}if(!n.results||n.results.length===0){d("Nothing found"),E(),_();return}const i=n.results||[],o=n.totalPages||1;re(i),ne(q,o),typeof T=="function"&&T(n)}catch(s){console.error("getCategories error:",s),d((s==null?void 0:s.message)||"Something went wrong"),E(),_()}finally{P()}}function re(e){const t=document.getElementById(k);t&&(t.innerHTML="",e.forEach(r=>{const s=document.createElement("div");s.className="card";const n=r.imgURL&&r.imgURL.trim()!==""?r.imgURL:"/img/no-image.jpg",i=r.name||"",o=r.filter||"";s.innerHTML=`
      <img src="${n}" alt="${i}" loading="lazy" />
      <div class="card-body">
        <h3>${i}</h3>
        <span>${o}</span>
      </div>
    `,s.addEventListener("click",te(r)),t.appendChild(s)}))}function ne(e,t){const r=document.querySelector(O);r&&Y({container:r,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>=3,classes:{page:"exercises__page",active:"active",prev:"exercises__page-prev",next:"exercises__page-next",first:"exercises__page-first",last:"exercises__page-last",arrow:"exercises__page-arrow"},icons:{prev:"<",next:">",first:"<<",last:">>"},scrollToTop:!0,scrollTarget:".main-container",onPageChange(s){return q=s,x(v,s,N)}})}function E(){const e=document.getElementById(k);e&&(e.innerHTML="")}function _(){const e=document.querySelector(O);e&&(e.innerHTML="")}const u=document.querySelector("[data-filters-tabs]"),f=document.querySelector(".filters__search"),h=document.querySelector(".filters__subtitle");function ie(e,t=""){if(!f||!h)return;const r=t?t.charAt(0).toUpperCase()+t.slice(1):"";e==="bodypart"?(h.textContent=` / ${r}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[])):h.textContent=""}function oe(e){const t=new URL(location.href);t.searchParams.set("tab",e),history.pushState({tab:e},"",t)}function A(e,t=""){if(!u)return;sessionStorage.setItem("activeFilter",e),f&&f.classList.remove("filters__search--visible");const r=u.querySelector(`[data-filter="${e}"]`);if(!r)return;const s=document.getElementById("cards-box"),n=document.getElementById("exercises");s&&s.classList.remove("hidden"),n&&n.classList.add("hidden"),b(!1),e==="muscles"?(window.activeFilter="Muscles",x("Muscles")):e==="equipment"?(window.activeFilter="Equipment",x("Equipment")):e==="bodypart"&&(window.activeFilter="Body parts",x("Body parts")),u.querySelectorAll(".filters__tab").forEach(i=>{const o=i===r;i.classList.toggle("filters__tab--active",o),i.setAttribute("aria-selected",o?"true":"false")}),ie(e,t)}document.addEventListener("DOMContentLoaded",()=>{if(!u||!f||!h)return;u.addEventListener("click",i=>{const o=i.target.closest(".filters__tab");if(!o)return;const c=o.dataset.filter;oe(c),b(!1),A(c)});const t=new URL(location.href).searchParams.get("tab"),r=sessionStorage.getItem("activeFilter"),s=t||r||"muscles";if(Z()){const i=document.getElementById("cards-box"),o=document.getElementById("exercises");i&&i.classList.add("hidden"),o&&o.classList.remove("hidden"),f&&f.classList.add("filters__search--visible");const c=u.querySelector(`[data-filter="${s}"]`);c&&u.querySelectorAll(".filters__tab").forEach(p=>{const M=p===c;p.classList.toggle("filters__tab--active",M),p.setAttribute("aria-selected",M?"true":"false")});const{name:l,type:a}=ee();l&&g({page:1,filter:l,type:a||s,keyword:""})}else A(s)});const m=document.querySelector(".filters__input"),y=document.querySelector(".filters__clear-btn");if(m&&y){const e=()=>{m.value.trim()?y.classList.add("filters__clear-btn--visible"):y.classList.remove("filters__clear-btn--visible")};m.addEventListener("input",e),y.addEventListener("click",()=>{m.value="",m.focus(),e()}),e()}window.addEventListener("popstate",e=>{const t=e.state;if(!t||!t.tab)return;const r=t.tab;b(!1),A(r)});const S=document.querySelector(".footer__form");if(!S)console.warn("Footer form not found on this page");else{const e=S.querySelector(".footer__input"),t=new R;S.addEventListener("submit",async r=>{var n,i,o,c,l;r.preventDefault();const s=e.value.trim();if(!s){d((n=L)==null?void 0:n.EMAIL_REQUIRED);return}if(!$.EMAIL_REGEX.test(s)){d(((i=L)==null?void 0:i.EMAIL_INVALID)||"Please enter a valid email address");return}try{await t.subscribe({email:s}),j("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),e.value=""}catch(a){(((c=(o=a==null?void 0:a.response)==null?void 0:o.data)==null?void 0:c.message)||(a==null?void 0:a.message)||"").toLowerCase().includes("exists")?d("Subscription already exists"):d((l=L)==null?void 0:l.API_ERROR),console.error("Subscription error:",a)}})}function ae(){document.querySelector(".js-exercises-tabs")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>P(),300),le()});window.activeFilter="Muscles";function ce(){window.activeFilter="Muscles"}ce();function le(){F(B.RATING,H,z),F(B.EXERCISE,W,V),G()}g();ae();Q();
//# sourceMappingURL=index.js.map
