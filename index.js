import{S as l,l as c,Y as q,s as u,V as B,a as P,b as A,c as k,r as v,i as N,d as R,g as Y,M as b,e as D,f as H}from"./assets/modal-rating-content-BZSzZYgH.js";import{i as O}from"./assets/vendor-3BNOZKAJ.js";function w(e){if(!e||!e.results)return;const s={"@context":l.SCHEMA_CONTEXT,"@type":l.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((t,r)=>({"@type":l.SCHEMA_TYPES.LIST_ITEM,position:r+1,item:{"@type":l.SCHEMA_TYPES.EXERCISE_PLAN,name:t.name,filter:t.filter,image:t.imgURL}}))};F("filters",s)}function F(e,s){let t=document.querySelector(`script[data-schema="${e}"]`);t||(t=document.createElement("script"),t.type=l.JSON_LD_TYPE,t.setAttribute("data-schema",e),document.head.appendChild(t)),t.textContent=JSON.stringify(s)}const o=document.querySelector("[data-filters-tabs]"),f=document.querySelector(".filters__search"),E=document.querySelector(".filters__subtitle"),U=()=>window.matchMedia("(min-width: 1440px)").matches;function x(e,s=""){if(!f||!E)return;const t=U();e==="bodypart"?(E.textContent=` / ${s||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),f.classList.add("filters__search--visible")):(E.textContent="",f.classList.remove("filters__search--visible"))}function I(e,s=""){if(!o)return;const t=o.querySelector(`[data-filter="${e}"]`);if(!t)return;const r=document.getElementById("cards-box"),n=document.getElementById("exercises"),i=document.getElementById("equipment-box");r&&r.classList.add("hidden"),n&&n.classList.add("hidden"),i&&i.classList.add("hidden");const a=new URL(window.location.href);e==="muscles"?(r&&r.classList.remove("hidden"),a.searchParams.delete("filter"),a.searchParams.delete("type")):e==="equipment"?(i&&i.classList.remove("hidden"),a.searchParams.delete("filter"),a.searchParams.delete("type")):e==="bodypart"&&(n&&n.classList.remove("hidden"),a.searchParams.set("type","body-parts"),s?a.searchParams.set("filter",s.toLowerCase()):(a.searchParams.delete("filter"),c({page:1}))),window.history.pushState({},"",a),o.querySelectorAll(".filters__tab").forEach(p=>{const S=p===t;p.classList.toggle("filters__tab--active",S),p.setAttribute("aria-selected",S?"true":"false")}),x(e,s)}if(o&&f&&E){o.addEventListener("click",s=>{const t=s.target.closest(".filters__tab");t&&I(t.dataset.filter)});const e=o.querySelector(".filters__tab--active");e&&x(e.dataset.filter)}const d=document.querySelector(".filters__input"),g=document.querySelector(".filters__clear-btn");if(d&&g){const e=()=>{d.value.trim()?g.classList.add("filters__clear-btn--visible"):g.classList.remove("filters__clear-btn--visible")};d.addEventListener("input",e),g.addEventListener("click",()=>{d.value="",d.focus(),e()}),e()}function $(e){return function(s){s.preventDefault();const t={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},r=t[e.filter]||t["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),I("bodypart",e.name),c({page:1,filter:e.name.toLowerCase(),type:r});const a=new URL(window.location.href);a.searchParams.set("type",r),a.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",a)}}const j=new q,_=window.innerWidth<768?9:12;let L="Muscles",m=1;async function T(e=L,s=1,t=_){L=e,m=s;try{const r={filter:e,page:s,limit:t},n=await j.getFilters(r);if(!n){u("Failed to fetch categories: No response from server"),y(),h();return}if(n.error||n.status==="error"){u(n.message||"Failed to fetch categories"),y(),h();return}if(!n.results||n.results.length===0){u("Nothing found"),y(),h();return}X(n.results||[]),G(m,n.totalPages||1),typeof w=="function"&&w(n)}catch(r){console.error("getCategories error:",r),u((r==null?void 0:r.message)||"Something went wrong"),y(),h()}}function X(e){const s=document.getElementById("cards-container");s&&(s.innerHTML="",e.forEach(t=>{const r=document.createElement("div");r.className="card";const n=t.imgURL&&t.imgURL.trim()!==""?t.imgURL:"/img/no-image.jpg",i=t.name||"",a=t.filter||"";r.innerHTML=`
      <img src="${n}" alt="${i}" loading="lazy" />
      <div class="card-body">
        <h3>${i}</h3>
        <span>${a}</span>
      </div>
    `,r.addEventListener("click",$(t)),s.appendChild(r),r.querySelector(".card-body").addEventListener("click",()=>{J(i)})}))}function G(e,s){const t=document.getElementById("pagination");if(t){t.innerHTML="";for(let r=1;r<=s;r++){const n=r,i=document.createElement("button");i.textContent=n,i.className="pagination-page",i.setAttribute("data-page",n),n===e&&i.classList.add("active"),i.addEventListener("click",()=>{n!==m&&(m=n,T(L,n,_),window.scrollTo({top:0,behavior:"smooth"}))}),t.appendChild(i)}}}function y(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function h(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function J(e){console.log("Clicked name:",e)}T(L,m,_);const M=document.querySelector(".footer__form"),C=M.querySelector(".footer__input");M.addEventListener("submit",async e=>{e.preventDefault();const s=C.value.trim();if(!(!s||!B.EMAIL_REGEX.test(s)))try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(t.ok)P("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),C.value="";else{const r=await t.json();A("Subscription already exists")}}catch{u("Server error")}});function W(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var s,t;(s=document.getElementById("categories-section"))==null||s.classList.add("hidden"),(t=document.getElementById("exercises-section"))==null||t.classList.remove("hidden"),c({page:1})}))}function z(){const e=document.querySelector(".filters__input"),s=document.querySelector(".filters__search-btn"),t=document.querySelector(".filters__clear-btn");if(!e||!s)return;const r=()=>{const n=e.value.trim();if(console.log(n),!n){O.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}c({page:1,keyword:n})};s.addEventListener("click",r),e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),r())}),t&&t.addEventListener("click",()=>{e.value="",e.focus(),c({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>k(),300),Q()});function Q(){v(b.RATING,Y,R),v(b.EXERCISE,H,D),N()}c();W();z();
//# sourceMappingURL=index.js.map
