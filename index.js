import{l as c,Y as P,s as k,a as l,i as _,c as x,r as M,V as T,b as A,d as R,e as b,f as F,g as N,h as U,M as w,j,k as D}from"./assets/modal-rating-content-CX64clHR.js";import{i as Y}from"./assets/vendor-3BNOZKAJ.js";const o=document.querySelector("[data-filters-tabs]"),u=document.querySelector(".filters__search"),h=document.querySelector(".filters__subtitle"),$=()=>window.matchMedia("(min-width: 1440px)").matches;function C(e,s=""){if(!u||!h)return;const t=$(),n=s?s.charAt(0).toUpperCase()+s.slice(1):"Waist";e==="bodypart"?(h.textContent=` / ${n}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),u.classList.add("filters__search--visible")):(h.textContent="",u.classList.remove("filters__search--visible"))}function B(e,s=""){if(!o)return;const t=o.querySelector(`[data-filter="${e}"]`);if(!t)return;const n=document.getElementById("cards-box"),r=document.getElementById("exercises"),a=document.getElementById("equipment-box");n&&n.classList.add("hidden"),r&&r.classList.add("hidden"),a&&a.classList.add("hidden");const i=new URL(window.location.href);e==="muscles"?(n&&n.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="equipment"?(a&&a.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="bodypart"&&(r&&r.classList.remove("hidden"),i.searchParams.set("type","body-parts"),s?i.searchParams.set("filter",s.toLowerCase()):(i.searchParams.delete("filter"),c({page:1}))),window.history.pushState({},"",i),o.querySelectorAll(".filters__tab").forEach(f=>{const E=f===t;f.classList.toggle("filters__tab--active",E),f.setAttribute("aria-selected",E?"true":"false")}),C(e,s)}if(o&&u&&h){o.addEventListener("click",s=>{const t=s.target.closest(".filters__tab");t&&B(t.dataset.filter)});const e=o.querySelector(".filters__tab--active");e&&C(e.dataset.filter)}const d=document.querySelector(".filters__input"),m=document.querySelector(".filters__clear-btn");if(d&&m){const e=()=>{d.value.trim()?m.classList.add("filters__clear-btn--visible"):m.classList.remove("filters__clear-btn--visible")};d.addEventListener("input",e),m.addEventListener("click",()=>{d.value="",d.focus(),e()}),e()}function O(e){return function(s){s.preventDefault();const t={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},n=t[e.filter]||t["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),B("bodypart",e.name),c({page:1,filter:e.name.toLowerCase(),type:n});const i=new URL(window.location.href);i.searchParams.set("type",n),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const H=new P,L=window.innerWidth<768?9:12;let y="Muscles",v=1;async function I(e=y,s=1,t=L){y=e,v=s;try{const n={filter:e,page:s,limit:t};k();const r=await H.getFilters(n);if(!r){l("Failed to fetch categories: No response from server"),g(),p();return}if(r.error||r.status==="error"){l(r.message||"Failed to fetch categories"),g(),p();return}if(!r.results||r.results.length===0){l("Nothing found"),g(),p();return}const a=r.results||[],i=r.totalPages||1;z(a),G(v,i),typeof _=="function"&&_(r)}catch(n){console.error("getCategories error:",n),l((n==null?void 0:n.message)||"Something went wrong"),g(),p()}finally{x()}}function z(e){const s=document.getElementById("cards-container");s&&(s.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.className="card";const r=t.imgURL&&t.imgURL.trim()!==""?t.imgURL:"/img/no-image.jpg",a=t.name||"",i=t.filter||"";n.innerHTML=`
      <img src="${r}" alt="${a}" loading="lazy" />
      <div class="card-body">
        <h3>${a}</h3>
        <span>${i}</span>
      </div>
    `,n.addEventListener("click",O(t)),s.appendChild(n),n.querySelector(".card-body").addEventListener("click",()=>{W(a)})}))}function G(e,s){const t=document.getElementById("pagination");t&&M({container:t,currentPage:e,totalPages:s,mode:"neighbors",showPrevNext:s>2,classes:{page:"pagination-page",active:"active",prev:"pagination-page-prev",next:"pagination-page-next"},icons:{prev:"<",next:">"},scrollToTop:!0,scrollTarget:".main-container",onPageChange(n){return v=n,I(y,n,L)}})}function g(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function p(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function W(e){console.log("Clicked name:",e)}I(y,v,L);const q=document.querySelector(".footer__form"),S=q.querySelector(".footer__input");q.addEventListener("submit",async e=>{e.preventDefault();const s=S.value.trim();if(!(!s||!T.EMAIL_REGEX.test(s)))try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(t.ok)A("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),S.value="";else{const n=await t.json();R("Subscription already exists")}}catch{l("Server error")}});function X(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var s,t;(s=document.getElementById("categories-section"))==null||s.classList.add("hidden"),(t=document.getElementById("exercises-section"))==null||t.classList.remove("hidden"),c({page:1})}))}function J(){const e=document.querySelector(".filters__input"),s=document.querySelector(".filters__search-btn"),t=document.querySelector(".filters__clear-btn");if(!e||!s)return;const n=()=>{const r=e.value.trim();if(console.log(r),!r){Y.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}c({page:1,keyword:r})};s.addEventListener("click",n),e.addEventListener("keydown",r=>{r.key==="Enter"&&(r.preventDefault(),n())}),t&&t.addEventListener("click",()=>{e.value="",e.focus(),c({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>x(),300),Q()});function Q(){b(w.RATING,U,N),b(w.EXERCISE,D,j),F()}c();X();J();
//# sourceMappingURL=index.js.map
